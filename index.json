
[{"content":" éšä¾¿å†™å†™ã€‚ ","date":"2024-03-16","externalUrl":null,"permalink":"/posts/","section":"åšå®¢","summary":" éšä¾¿å†™å†™ã€‚ ","title":"åšå®¢","type":"posts"},{"content":"","date":"2024-03-16","externalUrl":null,"permalink":"/","section":"å‘“è¯­","summary":"","title":"å‘“è¯­","type":"page"},{"content":"","date":"2024-03-09","externalUrl":null,"permalink":"/tags/dhcp/","section":"Tags","summary":"","title":"DHCP","type":"tags"},{"content":"","date":"2024-03-09","externalUrl":null,"permalink":"/tags/networkmanager/","section":"Tags","summary":"","title":"NetworkManager","type":"tags"},{"content":"NetworkManager ï¼ˆæ¥ä¸‹æ¥ä¸‹é¢å°†ç®€ç§° nmï¼‰ çš„ [main] é…ç½®å—ä¸­ï¼Œå¯ä»¥é€‰æ‹©ä¸åŒçš„å‡ ç§ DHCP Client å®ç°ï¼š\ndhclient dhcpcd internal é…ç½®æœªæŒ‡å®šçš„æƒ…å†µä¸‹é»˜è®¤ä½¿ç”¨ internalï¼Œè€Œå‰é¢ 2 ç§éƒ½éœ€è¦é¢å¤–å®‰è£…äºŒè¿›åˆ¶ï¼š\nClient Distro / OS family Package dhclient C9S (CentOS Stream 9) dhcp-client dhclient Debian isc-dhcp-client dhcpcd C9S (CentOS Stream 9) dhcpcd dhcpcd Debian 12 dhcpcd dhcpcd Ubuntu 22 dhcpcd5 internal ä¸ä¾èµ–ä»»ä½•å¤–éƒ¨äºŒè¿›åˆ¶ï¼Œå› ä¸ºå®ƒæ˜¯ nm è‡ªå·±å†…éƒ¨ä»£ç å®ç°çš„ã€‚ä¹Ÿå°±æ„å‘³ç€åœ¨ç³»ç»Ÿä¸­ä¸ä¼šå­˜åœ¨ç”± nm fork å‡ºçš„å…¶ä»– DHCP Client è¿›ç¨‹ã€‚\nä½†æ˜¯è¿™ä¸ªå®ç°çš„å…·ä½“æƒ…å†µæœ‰ä¸€ä¸ªéšè—çš„ç§˜å¯†ã€‚å¦‚æœä½ æœ‰å¹¸ä½¿ç”¨ debug è¾“å‡ºå¯¹ nm è¿›è¡Œè¿‡è°ƒè¯•ï¼Œå°±å¯ä»¥åœ¨ DHCP ç¯èŠ‚é€šè¿‡æ—¥å¿—è¾“å‡ºå‘ç°è¿™ä¸ªç§˜å¯†ï¼šinternal æœ‰ä¸¤ä¸ªåˆ«åï¼Œsystemdï¼Œæˆ–è€… libsystemdã€‚\næ˜¯çš„ï¼Œå®é™…ä¸Šï¼Œè¿™äº›ä»£ç æ˜¯æ¥è‡ªäº systemdï¼Œå¯¹åº” nm çš„æºä»£ç ç›®å½•ä¸­çš„ README ä¹ŸæŒ‡æ˜äº†è¿™ç‚¹ã€‚\nä»¥ nm çš„ DHCPv6 åŠŸèƒ½æ¥è¯´ï¼Œå¯¹åº” systemd çš„ä»£ç å¯ä»¥è¿½æº¯è‡³ sd-dhcp6-client.c\né€šè¿‡ src/libnm-systemd-shared/README.md çš„è¯´æ˜ï¼Œå¯ä»¥çœ‹è§ systemd çš„å¯¹åº”ä»£ç æ˜¯é€šè¿‡ä¸€ç§æ¯”è¾ƒå¥‡æ€ªçš„å·¥ç¨‹å®è·µå¯¼å…¥è¿› nm çš„ git ä»“åº“çš„ï¼šä»æºä»“åº“ clone åå†ç”±è„šæœ¬å¤åˆ¶æŒ‡å®šæ–‡ä»¶ã€‚ç”±äºæˆ‘å¹¶æ²¡æœ‰ C++ å·¥ç¨‹çš„å®é™…ç»éªŒï¼Œæˆ‘ä¹Ÿä¸å¥½è¯„ä»·ï¼Œä½†æ˜¯å¯¹æ­¤æœ€ç›´è§‚çš„æ„Ÿå—å°±æ˜¯ï¼šè¿™è®©å¯¹åº”ä»£ç æº¯æºå˜å¾—è¾ƒä¸ºå›°éš¾ï¼Œåªèƒ½æ‰¾åˆ°å¯¹åº”çš„ commitå†…å®¹ æ‰èƒ½çŸ¥é“ä¸Šæ¸¸ systemd çš„ä»£ç å…·ä½“å¯¹åº”å…³ç³»ã€‚\næ­£å¦‚æ–‡ç« æœ€å¼€å§‹æ‰€å±•ç¤ºçš„ man page å›¾ä¸­è¯´çš„é‚£æ ·ï¼Œinternal çš„å®ç°ä¸å¦‚å…¶ä»–å¤–éƒ¨å®ç°çš„ featurefulã€‚ç”šè‡³å¯ä»¥è¯´ systemd çš„è¿™äº›å®ç°è¿˜å­˜åœ¨å¾ˆå¤šçš„æ”¹è¿›ç©ºé—´ï¼Œä¸ç°å®ä¸–ç•Œé‚£äº›æ—æ—æ€»æ€»çš„ DHCP Server å®ç°ç¨å¾®æœ‰ç‚¹ä¸å…¼å®¹ï¼Œæœ‰æ—¶ä¼šå‘ç”Ÿä¸€äº›æ„æƒ³ä¸åˆ°çš„é—®é¢˜ã€‚\næ¯”å¦‚è¿™ä¸ª Issue: DHCPv6 client ignores packets with invalid bytes at the endï¼Œæè¿°äº†åœ¨ Oracle äº‘ä¸Šçš„åŸºç¡€è®¾æ–½ä¸­ï¼Œå…¶ VPC ç½‘å…³å®ç°çš„ DHCPv6 Reply æ¶ˆæ¯ä¸­å°¾éƒ¨å«æœ‰éæ³•å­—èŠ‚ï¼Œè¢« systemd è®¤ä¸ºæ˜¯ bad msgï¼Œå¯¼è‡´ IPv6 çš„ DHCP å¤±è´¥ã€‚\næ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯ï¼Œåœ¨ systemd PR ä¿®æ­£åï¼Œè¯„è®ºä¸­æœ‰äººåé¦ˆè¯´ Oracle åœ¨æœ€åˆå»ºè®®ç»•è¿‡è¿™ä¸ªé—®é¢˜ï¼ˆè®©å®¢æˆ·ä¸è¦ä½¿ç”¨ DHCPï¼‰åï¼Œåœ¨æ— æ³•çŸ¥æ™“çš„å…·ä½“æ—¶é—´æ®µæ‚„æ‚„å®Œæˆäº†ä¿®å¤ã€‚\næˆ‘ä¸ºä»€ä¹ˆä¼šæŒ–æ˜å¹¶çŸ¥é“è¿™äº›æ²¡ç”¨çš„çŸ¥è¯†?\nå› ä¸ºæˆ‘åœ¨åä¸ºäº‘ä¹Ÿç¢°è§äº†ç±»ä¼¼çš„é—®é¢˜ã€‚ä¸€æ ·æ˜¯ IPv6 ç¯å¢ƒä¸‹çš„ DHCP æ— æ³•æ­£å¸¸è·å– IPï¼Œåœ¨å¯¹ nm å¼€å¯ debug ååŒæ ·çœ‹è§äº†å¯¹ reply msg åˆ¤æ–­ä¸º bad msg çš„ä¿¡æ¯ã€‚\nå°±åœ¨æˆ‘å¯¹ nm çš„ DHCP è¿›è¡Œäº†ä¸Šè¿°æƒ…å†µçš„ç²—ç•¥æŒ–æ˜ï¼Œæ­£å‡†å¤‡è¿›è¡Œä¸‹ä¸€æ­¥è¡ŒåŠ¨æ—¶ï¼Œä¸åŒäº‹é—²èŠäº†è¿™ä¸ªæ„å¤–æƒ…å†µï¼Œç„¶åå°±è¢«å…¶å‘ŠçŸ¥äº†åä¸ºäº‘å®˜ç½‘çš„æ–‡æ¡£é“¾æ¥ï¼Œå…¶ä¸­å­˜åœ¨æŒ‡å‡ºåœ¨ nm çš„ DHCP é…ç½®ä½¿ç”¨ dhclient çš„æ˜ç¡®æŒ‡å¼•æ®µè½ã€‚å°è¯•äº†ä½¿ç”¨ dhclient åä¸€åˆ‡æ­£å¸¸ã€‚\næ‰€ä»¥ï¼Œæˆ‘ä¸ªäººçš„å»ºè®®æ˜¯ï¼Œå¦‚æœä½ ä¹Ÿç¢°åˆ°äº† nm åœ¨ DHCP åœºæ™¯ä¸‹çš„é—®é¢˜ï¼Œå¯ä»¥å°è¯•é…ç½®ä½¿ç”¨ dhclientã€‚\næˆ–è€…å°½é‡ä¸€å¼€å§‹å°±ä¸ç”¨ internal è¿™ä¸ªå¯èƒ½å­˜åœ¨é—®é¢˜çš„ä»£ç å®ç°ï¼Œç›´åˆ° Red Hat æŸæ—¥åœ¨å…¶æœªæ¥çš„ C10Sï¼ŒC11S ä¸­å°†é»˜è®¤çš„ç½‘ç»œç®¡ç†å™¨è®¾ç½®ä¸º systemd-networkd çš„é‚£å¤©ã€‚\n","date":"2024-03-09","externalUrl":null,"permalink":"/posts/2024/03/nm-dhcp-implementations-selection/","section":"åšå®¢","summary":"NetworkManager ï¼ˆæ¥ä¸‹æ¥ä¸‹é¢å°†ç®€ç§° nmï¼‰ çš„ [main] é…ç½®å—ä¸­ï¼Œå¯ä»¥é€‰æ‹©ä¸åŒçš„å‡ ç§ DHCP Client å®ç°ï¼š","title":"NetworkManager çš„ DHCP é€‰æ‹©","type":"posts"},{"content":"","date":"2024-03-09","externalUrl":null,"permalink":"/tags/systemd/","section":"Tags","summary":"","title":"Systemd","type":"tags"},{"content":"","date":"2024-03-09","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":"","date":"2023-06-26","externalUrl":null,"permalink":"/tags/curl/","section":"Tags","summary":"","title":"CURL","type":"tags"},{"content":"å¶ç„¶çœ‹åˆ°ä¸€ç¯‡æ–‡ç« ï¼šGo: Calculating public key hashes for public key pinning in curlï¼Œå…¶ä¸­æåˆ° cURL çš„ä¸€ä¸ªæœ‰è¶£çš„å‚æ•°ï¼š--pinnedpubkeyã€‚\nä½¿ç”¨è¿‡ cURL çš„è¯»è€…å¯èƒ½å·²ç»çŸ¥é“ -k / --insecure å‚æ•°ï¼Œåœ¨ä½¿ç”¨ TLS é“¾æ¥æ—¶ï¼ˆå¦‚è®¿é—® HTTPS é“¾æ¥ï¼‰æ—¶æŒ‡å®šè¿™ä¸ªå‚æ•°ï¼Œå°†å¿½ç•¥å¯¹æœåŠ¡ç«¯è¿”å›çš„è¯ä¹¦çš„åˆæ³•æ€§æ£€æŸ¥ã€‚é€šå¸¸è®¿é—®ä½¿ç”¨è‡ªç­¾åè¯ä¹¦çš„é“¾æ¥æ—¶ï¼ˆå…¸å‹åœºæ™¯å¦‚ï¼šéç”Ÿäº§ç¯å¢ƒæµ‹è¯•ï¼‰ä¼šä½¿ç”¨åˆ°å®ƒã€‚\nç®€å•æ¥è¯´ï¼ŒTLS 1.3 ä¸­çš„ä¸»è¦æµç¨‹æ˜¯ï¼š\né€šè¿‡ ECDH(E) åè®®åœ¨ä¸å¯ä¿¡çš„ä¿¡é“ä¸Šè¿›è¡Œå¯¹ç§°åŠ å¯†å¯†é’¥åŠå‚æ•°çš„åå•† é€šè¿‡ X509 è¯ä¹¦è¿›è¡Œå¯¹ç«¯çš„èº«ä»½è®¤è¯ï¼ˆå¤šæ•°æƒ…å†µç”±é“¾æ¥å‘èµ·æ–¹è¿›è¡Œï¼Œå³å®¢æˆ·ç«¯æ£€æŸ¥æœåŠ¡ç«¯ï¼ŒåŒå‘æ— éå°±æ˜¯ä¸‹é¢çš„æµç¨‹äº’ç›¸åšä¸€æ¬¡ï¼‰ è¯ä¹¦çš„åˆæ³•æ€§åˆ¤æ–­ 1 \u0026ndash; æ˜¯å¦ç”±å¯ä¿¡çš„ CA ç­¾å‘ è¯ä¹¦çš„æ‹¥æœ‰è€…åˆ¤æ–­ 2 \u0026ndash; æ˜¯å¦æŒæœ‰è¯ä¹¦ä¸­å±•ç¤ºçš„å…¬é’¥å¯¹åº”çš„ç§é’¥ æ ¹æ® man page ä¸­çš„æè¿°ï¼Œè¿™ä¸ª --pinnedpubkey å‚æ•°ï¼Œä¸éœ€è¦é…åˆ -k å‚æ•°æ‰èƒ½ä½¿ç”¨ã€‚ä¸ªäººç†è§£å°±æ˜¯ cURL çš„ä¸€ç§è‡ªå®šä¹‰çš„ã€åœ¨ä¸Šè¿° 2 ä¹‹å¤–çš„ä¸€ç§é¢å¤–çš„èº«ä»½è®¤è¯æ‰‹æ®µã€‚\n--pinnedpubkey å‚æ•°çš„å€¼å¯ä»¥æ˜¯ä»¥ä¸‹ä»»æ„ä¸€ç§ï¼š\næ–‡ä»¶è·¯å¾„ï¼Œæ–‡ä»¶çš„å†…å®¹éœ€è¦å«æœ‰ PEM / DER æ ¼å¼çš„å…¬é’¥ base64 ç¼–ç çš„å…¬é’¥çš„ sha256 å“ˆå¸Œå€¼åŠ ä¸Šå›ºå®šçš„ sha256// å¤´éƒ¨ï¼Œå¤šä¸ªå€¼çš„è¯éœ€è¦ä½¿ç”¨ ; è¡¨ç¤ºåˆ†éš” å¦‚æœå¯¹ OpenSSH çš„èº«ä»½è®¤è¯è¾ƒä¸ºäº†è§£çš„è¯»è€…åº”è¯¥ä¼šæœ‰ä¸€ç§ç†Ÿæ‚‰æ„Ÿï¼Œæ˜¯çš„ï¼Œè¿™ç±»èº«ä»½è®¤è¯æ‰‹æ®µåœ¨æ¦‚å¿µä¸Šéƒ½æ˜¯è¿‘ä¼¼çš„ã€‚\nOpenSSH é»˜è®¤å°†è¿œç«¯ä¸»æœºçš„ SSH Host Key çš„å“ˆå¸Œå€¼å­˜å‚¨åœ¨ ~/.ssh/known_hosts æ–‡ä»¶ä¸­ã€‚\nç¬¬äºŒç§æŒ‰å“ˆå¸Œæ–¹æ³•çš„å…·ä½“å€¼æ€ä¹ˆè®¡ç®—å¯ä»¥å‚è€ƒæ–‡ç« ä¸­çš„ Go ä»£ç ï¼š\nfunc calculatePublicKeyHashes(certs []*x509.Certificate) ([]string, error) { hashes := make([]string, len(certs)) for i, cert := range certs { derCert, err := x509.MarshalPKIXPublicKey(cert.PublicKey) if err != nil { return nil, err } hash := sha256.New() hash.Write(derCert) hashes[i] = fmt.Sprintf(\u0026#34;sha256//%s\u0026#34;, base64.StdEncoding.EncodeToString(hash.Sum(nil))) } return hashesï¼Œnil } å¿½ç•¥ä»£ç ä¸­è¿™ä¸ªè®©äººé€ æˆå›°æƒ‘çš„ derCert å˜é‡å (è§‰å¾—å« pkInfoDERBytes æˆ–è€…ç›´æ¥ bs æ›´åˆé€‚)ï¼Œç†è§£è®¡ç®—çš„è¿‡ç¨‹å°±è¡Œã€‚\nå½“ç„¶åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œè¿˜æ˜¯ä½¿ç”¨æ–‡ä¸­æå‡ºçš„é€šè¿‡è„šæœ¬è°ƒç”¨ OpenSSL è¿›è¡Œè®¡ç®—çš„æ–¹å¼æ›´ä¸ºæ–¹ä¾¿ï¼š\n# Assuming default.crt is a PEM-encoded cert, this extracts the public key # converts it to DER form, hashes it with SHA-256, then base64-encodes it # and prepends \u0026#34;sha256//\u0026#34; echo sha256//$(openssl x509 -in default.crt -pubkey -noout \\ | openssl asn1parse -inform PEM -in - -noout -out - \\ | openssl dgst -sha256 -binary - \\ | openssl base64) # Outputs something like sha256//Y/CGGnkaoZwUgOqArQs12llyoaX0bkjSIgHCPtXba+c= ä½¿ç”¨å…¬é’¥çš„å“ˆå¸Œçš„è®¾è®¡åœ¨æˆ‘çœ‹æ¥å®Œå…¨å¯ä»¥ç›´æ¥ä½¿ç”¨ X509 ä¸­çš„ SKIDï¼Œåªæ˜¯ä¸çŸ¥é“ cURL ä¸ºä»€ä¹ˆé€‰æ‹©äº†è‡ªå®šä¹‰æ ¼å¼çš„æ–¹å¼ã€‚\nè¿™ä¸ªå‚æ•°æ˜¯åœ¨ 7.39.0 (åªæ”¯æŒ OpenSSL) å¼•å…¥çš„ã€‚è§ SSL: implement public key pinning\nç±»ä¼¼çš„ --proxy-pinnedpubkey åœ¨ 7.59.0 åŠ å…¥ï¼Œè§ curl: add \u0026ndash;proxy-pinnedpubkey\nRFC 8446 4.4.2. Certificate\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nRFC 8446 4.4.3. Certificate Verify\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2023-06-26","externalUrl":null,"permalink":"/posts/2023/06/curl-x509-pub-key-pinned/","section":"åšå®¢","summary":"å¶ç„¶çœ‹åˆ°ä¸€ç¯‡æ–‡ç« ï¼šGo: Calculating public key hashes for public key pinning in curlï¼Œå…¶ä¸­æåˆ° cURL çš„ä¸€ä¸ªæœ‰è¶£çš„å‚æ•°ï¼š--pinnedpubkeyã€‚","title":"cURL çš„ --pinnedpubkey","type":"posts"},{"content":"","date":"2023-06-26","externalUrl":null,"permalink":"/tags/tls/","section":"Tags","summary":"","title":"TLS","type":"tags"},{"content":"","date":"2023-06-12","externalUrl":null,"permalink":"/tags/go/","section":"Tags","summary":"","title":"Go","type":"tags"},{"content":" SKID æ˜¯ä»€ä¹ˆ # 1999 çš„ RFC 2459 Internet X.509 Public Key Infrastructure Certificate and CRL Profile ä¸­å®šä¹‰äº† 2 ä¸ª X509 v3 è¯ä¹¦çš„æ‰©å±•æ¦‚å¿µï¼š\nAuthority Key Identifierï¼Œç®€ç§° AKI / AKID Subject Key Identifierï¼Œç®€ç§° SKI / SKID ç®€å•æ¥è¯´ï¼Œå®ƒä»¬æ˜¯ä¸€ç§æ ‡è¯†ï¼Œå¯¹åº”çš„æ„ä¹‰åˆ†åˆ«æ˜¯:\nAKIDï¼Œç”¨æ¥è¯†åˆ« è¢«ç‰¹å®šç§é’¥ç­¾å‘çš„è¯ä¹¦ \u0026ndash; åº”ä½¿ç”¨ç­¾å‘è€…ï¼ˆissuerï¼‰çš„å…¬é’¥è¿›è¡Œç”Ÿæˆ SKIDï¼Œç”¨æ¥è¯†åˆ« åŒ…å«ç‰¹å®šå…¬é’¥çš„è¯ä¹¦ \u0026ndash; åº”ä½¿ç”¨è¯ä¹¦ä¸­çš„å…¬é’¥è¿›è¡Œç”Ÿæˆ æ‰€è¦ç¡®ä¿çš„å°±æ˜¯ï¼Œè¯ä¹¦ Y ä¸­çš„ AKIDï¼Œå¿…ç„¶æ˜¯ç­¾å‘è¯ä¹¦ Y çš„ CA è¯ä¹¦ X çš„ SKIDã€‚\nä»¥ä¸Šå›¾ 1 çš„è¯ä¹¦è·¯å¾„/é“¾æ¡æ„é€ ä¸ºä¾‹ï¼ŒRoot CA è¯ä¹¦ 1 çš„ SKID å°±æ˜¯ CA è¯ä¹¦ 2 çš„ AKIDï¼Œè€Œ CA è¯ä¹¦ 2 çš„ SKID åˆæ˜¯ CA è¯ä¹¦ 3 ä¸­çš„ AKIDã€‚\nRFC æ˜ç¡®è¦æ±‚æ‰€æœ‰è¢« CA ç­¾å‘çš„ä¸‹çº§è¯ä¹¦éƒ½å¿…é¡»å­˜åœ¨ AKIDï¼Œåªæœ‰ \u0026ldquo;è‡ªç­¾å‘\u0026rdquo; çš„è¯ä¹¦æ‰å¯ä»¥ä½œä¸ºç‰¹ä¾‹è€Œçœç•¥å¡«å……è¿™ä¸ªå­—æ®µã€‚è€Œ SKID åˆ™æ˜¯è¦æ±‚å¿…é¡»å‡ºç°åœ¨ CA è¯ä¹¦ä¸­ã€‚\nè¿™ä¸¤ä¸ªæ‰©å±•è®¾è®¡å‡ºæ¥çš„æ„ä¹‰ä¸»è¦æ˜¯ä¸ºäº†æ›´æ–¹ä¾¿çš„è¿›è¡Œè¯ä¹¦è·¯å¾„/é“¾æ¡çš„æ„å»ºï¼Œé€šä¿—ç‚¹è¯´çš„è¯ï¼Œå°±æ˜¯ç»™å®šä¸€ä¸ªè¢«ç­¾å‘çš„è¯ä¹¦ Xï¼Œå¯ä»¥é€šè¿‡å…¶ AKID å¿«é€Ÿçš„åœ¨ CA Pool ä¸­æ‰¾åˆ°ç­¾å‘å®ƒçš„ \u0026ldquo;Parent\u0026quot;ã€‚\nè¿™åªæ˜¯ç”¨æ¥è¿›è¡Œå¯¹è±¡çš„å¿«é€ŸæŸ¥æ‰¾ï¼Œå…·ä½“æ‰¾åˆ°çš„å…³è”å¯¹è±¡æ˜¯ä¸æ˜¯çœŸçš„ \u0026ldquo;Parent\u0026rdquo; è¿˜éœ€è¦è¿›è¡Œæ ¡éªŒç­¾åçš„åˆ¤æ–­ã€‚\næƒ³è¦ç”¨ SKID æŸ¥è¯¢è¯ä¹¦çš„è¯å¯ä»¥å»è¿™é‡Œï¼šcrt.sh\nå…·ä½“ SKID åº”è¯¥å¦‚ä½•ç”Ÿæˆï¼Œæ ‡å‡†ä¸­å®šä¹‰äº†ä¸¤ç§ \u0026ldquo;å¸¸ç”¨æ–¹æ³•\u0026rdquo;ï¼š\nOpenSSL åœ¨è¿™ä¸ªå¯¹æ–‡æ¡£è¿›è¡Œè¡¥å……çš„ æäº¤ ä¸­ä¸“é—¨è¯´æ˜äº†ç”Ÿæˆ SKID çš„å®ç°æ–¹æ³•æ˜¯æŒ‰ç…§ RFC 5280 çš„ 4.2.1.2. (1)ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ RFC 2459 çš„ 4.2.1.2. (1). å› ä¸ºè™½ç„¶ RFC 2459 é€æ­¥è¢«æ–°å‘å¸ƒçš„ 3280ã€5280 æ‰€æ·˜æ±°ï¼Œä½†æ˜¯æ–° RFC ä¸­å…³äº AKIDã€SKID çš„è¿™éƒ¨åˆ†æ²¡ä»€ä¹ˆå˜æ›´ã€‚\nè™½ç„¶æ²¡æœ‰å»çœ‹å…·ä½“çš„ C ä»£ç ï¼Œä½†æˆ‘æƒ³æ—¢ç„¶æ˜¯ä¸“é—¨åœ¨æ–‡æ¡£è¡¥å……è¿™ä¸ªç»†èŠ‚ï¼Œå¤§æ¦‚ç‡è¡¨ç¤º OpenSSL åº”è¯¥ä¸€ç›´éƒ½æ˜¯ä½¿ç”¨è¿™ä¸ªæ–¹æ³•è¿›è¡Œ SKID çš„ç”Ÿæˆã€‚\nå…¶å®æ ‡å‡†ä¸­åœ¨ \u0026ldquo;å¸¸ç”¨æ–¹æ³•\u0026rdquo; çš„å®šä¹‰ä¸‹ç´§æ¥ç€è¯´åˆ° Other methods of generating unique numbers are also acceptable.ï¼Œä½†æˆ‘ä¸ç¦æ€€ç–‘æ˜¯å¦çœŸçš„æœ‰ä½¿ç”¨è‡ªå®šä¹‰æ–¹æ³•è¿›è¡Œå®ç°çš„è½¯ä»¶ã€‚ç›´åˆ°æˆ‘å¶ç„¶äº†è§£åˆ° Go ä¸­ SKID çš„æ•…äº‹ã€‚\nGo ä¸­çš„æ•…äº‹ # åœ¨ Golang 1.15 ä¹‹å‰ï¼Œæ ‡å‡†åº“ x509 ä¸­çš„ CreateCertificate æ–¹æ³•ä¸ä¼šå¯¹ CA ç±»å‹çš„è¯ä¹¦è‡ªåŠ¨çš„æ·»åŠ ä¸Š SKIDï¼Œè¿™ä¸ªè¡Œä¸ºæ˜æ˜¾æ˜¯è¿åäº† RFC çš„è¦æ±‚ã€‚è¿™ä¸ªæƒ…å†µæ˜¯åœ¨ 2018 å¹´è¢«å‘ç°çš„ï¼šcrypto/X509: add SubjectKeyId automatically when IsCA is trueã€‚æŒ‰è¿™ä¸ª issue ä¸­çš„è®¨è®ºçœ‹ï¼ŒGo å›¢é˜Ÿè®¤ä¸ºå°†å…¶åœ¨ 1.14 ä¸­ä¿®å¤æ˜¯èµ¶ä¸ä¸Šäº†ï¼Œäºæ˜¯ç›´åˆ° 2020 å¹´ 4 æœˆæ‰æœ‰äº†ä¿®å¤çš„æäº¤ã€‚\nç„¶è€Œï¼Œè¿™ä¸ªæäº¤çš„ä»£ç å®ç°æ˜¯æœ‰ç‚¹ã€‚ã€‚ã€‚ ç‰¹åˆ«çš„ã€‚ ä½œè€…é€‰æ‹©ç›´æ¥å°† SPKI æ•´ä¸ªç»“æ„ä½“ marshal å‡ºçš„ bytes è¿›è¡Œ hashï¼Œå¹¶ä¸æ˜¯ä¸Šé¢ç« èŠ‚ä¸­æåˆ°çš„ RFC å®šä¹‰çš„ä¸¤ç§å¸¸ç”¨æ–¹æ³•çš„ä»»æ„ä¸€ç§ã€‚\nè™½ç„¶æŒ‰ RFC çš„æ„æ€ï¼Œä½ æè‡ªå®šä¹‰çš„ä¹Ÿä¸æ˜¯ä¸å¯ä»¥ã€‚ä½†è¦çœŸæŒ‰è¿™ä¸ªæ€è·¯ç”Ÿæˆå‡ºæ¥çš„è¯ä¹¦ï¼Œåœ¨ä¸å…¶ä»–ä½¿ç”¨ RFC çš„ã€Œå¸¸ç”¨æ–¹æ³•ã€è¿›è¡Œ SKID ç”Ÿæˆçš„å®ç°ï¼ˆæ¯”å¦‚ OpenSSLï¼‰è¿›è¡Œäº¤äº’æ—¶å°±å¾ˆéš¾è¯´ä¼šä¸ä¼šäº§ç”Ÿæ„æ–™ä¹‹å¤–çš„å…¼å®¹æ€§é—®é¢˜ã€‚\nå¥½åœ¨è¿™ä¸ªæƒ…å†µä»…ä»…è¿‡äº† 2 ä¸ªæœˆå°±è¢«å‘ç°ï¼šcrypto/X509: SKID generation is over full spkiï¼Œrather than just the subjectPublicKeyï¼Œä¹Ÿèµ¶åœ¨ 1.15 æ­£å¼å‘å¸ƒå‰å®Œæˆäº†ä¿®å¤ã€‚\nå¯ä»¥çœ‹è§æœ€ç»ˆæ˜¯é€‰æ‹©äº†ç¬¬ä¸€ç§æ–¹æ³•ï¼Œå¯¹å…¬é’¥çš„ bytes åš SHA-1 çš„ HASHã€‚\nåæ§½ # æ¯”è¾ƒéš¾ä»¥æƒ³è±¡ï¼Œè¿™æ˜¯ä¸€ä¸ª 2020 å¹´ 6 æœˆ 9 å·æ‰ä¿®å¤çš„é—®é¢˜ï¼Œå¹¶ä¸”æ­£å¼çš„ 1.15 ç‰ˆæœ¬æ˜¯ 2020 å¹´ 8 æœˆ 11 å·æ‰å‘å¸ƒçš„ã€‚\nRFC 2459 æ˜¯ 1999 å¹´çš„ä¸œè¥¿äº†ã€‚å°±ç®—ä»¥ 2008 å¹´çš„ RFC 5280 åšæ ‡å‡†ï¼Œåœ¨éšåæ¼«é•¿çš„äº’è”ç½‘äº§ä¸šæ‰©å¼ å¹¶ã€Œé€ ç¦ä¸–ç•Œã€çš„è¿‡ç¨‹ä¸­ï¼Œå„å¤§è¯ä¹¦å‚å•†/å¼€æºå·¥å…·ç­‰å¯¹äº SKID è¿™ä¸ªä¸œè¥¿çš„æ“ä½œå¯ä»¥è¯´åº”è¯¥æ˜¯å·²ç»ç›¸å½“æˆç†Ÿã€‚\nè™½ç„¶ Golang æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¹´è½»çš„è¯­è¨€ï¼Œè¿™ä¹Ÿåªæ˜¯å®ç° RFC æ ‡å‡†çš„è¿‡ç¨‹ä¸­å‡ºç°çš„å°ç‘•ç–µï¼Œä¸æ˜¯ä»€ä¹ˆå¾ˆè‡´å‘½/å…³é”®çš„é”™è¯¯ï¼Œä½†è”æƒ³åˆ°ä¹‹å‰çš„ OpenSSL Heartbleed äº‹ä»¶ï¼Œæ˜¯çœŸçš„è¶Šæ˜¯åº•å±‚çš„åŸºç¡€è®¾æ–½å°±è¶Šæ˜¯è¿™æ ·å¾—ä¸åˆ°è¯¥æœ‰çš„å…³æ³¨å’ŒæŠ•å…¥ï¼Œè¿˜æ˜¯æˆ‘å¤ªæƒ³å½“ç„¶äº†å‘¢?\nAKI and SKI Extension\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2023-06-12","externalUrl":null,"permalink":"/posts/2023/06/golang-x509-skid/","section":"åšå®¢","summary":"SKID æ˜¯ä»€ä¹ˆ # 1999 çš„ RFC 2459 Internet X.","title":"Go X.509 æ ‡å‡†åº“ä¸­ SKID çš„æ•…äº‹","type":"posts"},{"content":"","date":"2023-06-12","externalUrl":null,"permalink":"/tags/x509/","section":"Tags","summary":"","title":"X509","type":"tags"},{"content":"","date":"2023-06-03","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","date":"2023-06-03","externalUrl":null,"permalink":"/categories/cryptography/","section":"Categories","summary":"","title":"Cryptography","type":"categories"},{"content":"","date":"2023-06-03","externalUrl":null,"permalink":"/tags/ecc/","section":"Tags","summary":"","title":"ECC","type":"tags"},{"content":"æœ€è¿‘ç”±äºå·¥ä½œåŸå› ï¼Œæ¥è§¦äº†ä¸å°‘ç°ä»£è®¡ç®—æœºå¯†ç å­¦çŸ¥è¯†ã€‚æƒ³å†™ç‚¹ä¸œè¥¿åˆ†äº«åˆ†äº«ï¼Œä½†ç”±äºå­¦çš„éƒ½æ˜¯äº›çš®æ¯›ï¼Œå±äºå°†å°±èƒ½å¤Ÿåº”ç”¨çš„æ°´å¹³ï¼Œè¿™é‡Œåªèƒ½å†™ä¸€ç¯‡æ‚è°ˆï¼Œé—²èŠä¸‹ ECC å’Œ 25519ã€‚\nECC ç®€ä»‹ # ç°ä»£è®¡ç®—æœºçš„å®‰å…¨æ€§ç¦»ä¸å¼€å…¬é’¥å¯†ç å­¦ï¼Œè€Œå…¬é’¥å¯†ç å­¦çš„åŸºç¡€æ„å»ºåœ¨æ•°å­¦ä¹‹ä¸Šã€‚ä¸è¾ƒä¸ºå‡ºåçš„ RSA åŠ å¯†ç³»ç»Ÿçš„ç®—æ³•å»ºç«‹åœ¨åˆ†è§£ä¸¤ä¸ªå¤§ç´ æ•°ä¹˜ç§¯ï¼ˆå› å¼åˆ†è§£ï¼‰çš„å›°éš¾æ€§ä¸Šä¸åŒï¼Œæ¤­åœ†æ›²çº¿å¯†ç å­¦ Elliptic-curve cryptographyï¼Œå³ ECCï¼Œæ˜¯å»ºç«‹åœ¨æ±‚è§£æ¤­åœ†æ›²çº¿ç¦»æ•£å¯¹æ•°é—®é¢˜çš„å›°éš¾åº¦ä¸Šã€‚å…¶æ˜¾è‘—çš„ç‰¹ç‚¹æ˜¯ï¼Œå¯¹æ¯” RSA æ¥è¯´ ECC å®ç°åŒç­‰åŠ å¯†å¼ºåº¦æ‰€éœ€çš„å¯†é’¥é•¿åº¦è¦å°å¾ˆå¤šï¼Œå¹¶ä¸”æ‰€éœ€çš„ç®—åŠ›å¼€é”€ä¹Ÿæ›´å°ã€‚\nåŸºäº ECC çš„å…·ä½“åº”ç”¨ä¸»è¦åˆ†å¸ƒåœ¨ä¸¤æ–¹é¢ï¼š\næ•°å­—ç­¾å \u0026ndash; è¢«å¹¿æ³›åº”ç”¨åœ¨èº«ä»½è®¤è¯ã€å®Œæ•´æ€§æ£€æŸ¥ç­‰é¢†åŸŸ å¯†é’¥åå•† \u0026ndash; ç”¨äºç°ä»£åŠ å¯†é€šä¿¡æœ€å…³é”®çš„éƒ¨åˆ†ï¼šåœ¨ä¸å¯ä¿¡çš„ä¿¡é“ä¸Šè¿›è¡ŒåŠ å¯†å¯†é’¥çš„åå•† è€Œç›®å‰ä¸–ç•Œä¸Šè¾ƒä¸ºæµè¡Œçš„ ECC æ ‡å‡†åˆå¯å¤§è‡´åˆ†ä¸ºä¸¤ç±»ï¼š\nç”± NIST (ç¾å›½å›½å®¶æ ‡å‡†ä¸æŠ€æœ¯ç ”ç©¶é™¢) æ¨èçš„å¤šä¸ªæ›²çº¿ï¼Œå®šä¹‰åœ¨ 2000 å¹´å‘å¸ƒçš„ FIPS 186-2 ä¸­ ç”±ä¸–ç•Œè‘—åçš„å¯†ç å­¦å®¶ Daniel J. Bernstein åœ¨ 2006 å¹´å‘å¸ƒçš„ 25519 æ›²çº¿ ç”±äºè¾ƒæ—©æ¨å‡ºï¼ŒNIST çš„æ›²çº¿å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ã€‚å¦‚æ•°å­—ç­¾åç®—æ³• ECDSA åœ¨ X509 è¯ä¹¦æ ‡å‡†ä¸­çš„ä½¿ç”¨ï¼Œç”Ÿäº§å‡ºçš„å¯¹è±¡å³æ˜¯ç°å¦‚ä»Šæ­£é€æ­¥æ™®åŠçš„ ECC è¯ä¹¦ã€‚\nè€Œåœ¨åƒ OpenSSL ç­‰ä¸€ä¼—å¼€æº TLS å®ç°ä¸­ï¼ŒNIST çš„æ›²çº¿åœ¨å¯†é’¥åå•† ECDH ä¸­æ›´æ˜¯è¢«ä½œä¸ºä¼˜å…ˆé€‰æ‹©ã€‚\nåœ¨å¾ˆé•¿çš„ä¸€æ®µæ—¶é—´å†…ï¼ŒNIST Curve P-256 æ˜¯ OpenSSL ECDH é»˜è®¤æ›²çº¿åˆ—è¡¨ä¸­çš„é¦–é€‰ã€‚\nOpenSSL ä»£ç ä¸­è™½ç„¶æ²¡æœ‰æ³¨é‡Šè¯´æ˜æ˜¯ NIST æ ‡å‡†ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªè¡Œå¯¹ P-256 çš„ P ç®€å•åšä¸ªæ¢ç®—çœ‹çœ‹ Hex æ˜¯å¦ä¸€è‡´ã€‚\nå¯ä»¥å‘ç°ç¡®å®æ˜¯ NIST çš„æ›²çº¿æ— ç–‘ã€‚\nå¯ç–‘çš„ NIST æ¤­åœ†æ›²çº¿ï¼ŒNSA çš„åé—¨åŠ£è¿¹ # ä»ä¸Šé¢ OpenSSL çš„ä»£ç æˆªå›¾ä¸­å¯ä»¥çœ‹è§ï¼ŒNIST çš„ P-256 æ›²çº¿è¢«å«åš PRIME_256V1. è¿™ä¸ªåå­—å…¶å®æ¥è‡ªäº 1998 å¹´çš„ ANSI X9.62 ECDSA è§„èŒƒï¼Œè‡³äºä¸ºä»€ä¹ˆ NIST çš„æ›²çº¿å‚æ•°è·Ÿè¿™ä¸ª ANSI è§„èŒƒçš„ä¸€æ¨¡ä¸€æ ·ï¼Œæ˜¯å› ä¸ºåæ¥çš„ NIST ç›´æ¥ä½¿ç”¨äº†è¿™äº›æ›²çº¿ã€‚é‚£ä¹ˆé—®é¢˜æ˜¯ï¼Œè¿™äº›æ›²çº¿ä¸ºä½•è¿™æ ·å®šä¹‰ï¼Ÿå®ƒä»¬åˆæ˜¯å“ªé‡Œæ¥çš„ï¼Ÿè¿™ä¸¤ä¸ªé—®é¢˜è‡³ä»Šæ²¡æœ‰æ¸…æ™°çš„ç­”æ¡ˆã€‚å› ä¸ºç°å®å°±æ˜¯è¿™äº›æ›²çº¿ä¸­çš„ Seed å®šä¹‰æ—¢æ²¡æœ‰è§£é‡Šæˆ–ç†ç”±ï¼Œä¹Ÿæ²¡æœ‰ä»»ä½•è¿æ¥å†ä¿¡æ¯ã€‚ä½†æ˜¯åœ¨å„ç§å¯†ç å­¦ã€è®¡ç®—æœºåœˆå­å†…éƒ½å€¾å‘äºä¸€ä¸ªç»Ÿä¸€çš„ï¼Œåˆç†çš„çŒœæµ‹ \u0026ndash; å®ƒä»¬æ˜¯æ¥è‡ªäº NSAï¼ˆç¾å›½å›½å®¶å®‰å…¨å±€ï¼‰ã€‚\né‚£ä¹ˆï¼Œæ›´ä¸ºé‡è¦çš„çµé­‚é—®é¢˜æ˜¯: å®ƒä»¬æ˜¯å¦å­˜åœ¨å¼±ç‚¹æˆ–åé—¨ï¼Ÿ\nå¦‚æœè¯´ä»è¿™äº›æ›²çº¿å‘å¸ƒçš„é‚£å¤©èµ·ï¼Œå¯¹å…¶çš„è´¨ç–‘ 1 åªåœ¨å°èŒƒå›´ä¸“ä¸šåœˆå­å†…ä¼ æ’­ï¼Œåˆ°äº† 2013 å¹´ 9 æœˆ 6 æ—¥åœ¨çº½çº¦æ—¶æŠ¥ç½‘ç»œç‰ˆä¸Šçš„ä¸€ç¯‡æ–°é—» 2 æŠ«éœ²å‡ºçš„å†…å®¹åˆ™æ˜¯åœ¨å…¬å…±é¢†åŸŸæ€èµ·äº†è½©ç„¶å¤§æ³¢ï¼šæ ¹æ® çˆ±å¾·åÂ·æ–¯è¯ºç™»ï¼ˆå¯¹ï¼Œå°±æ˜¯æ£±é•œé—¨çš„ä¸»è§’ï¼‰æŠ«éœ²çš„æœºå¯†æ–‡ä»¶æ˜¾ç¤ºï¼ŒNSA æ›¾ç»å‘æŸå¯†ç å­¦ç®—æ³•æ¤å…¥åé—¨å¹¶å°†å…¶é€šè¿‡ NIST ç¡®ç«‹ä¸ºå›½å®¶æ ‡å‡†ã€‚è™½ç„¶æ–‡å†…å¹¶æœªç›´æ¥æŠ«éœ²æ˜¯ä»€ä¹ˆç®—æ³•ï¼Œä½†å´éšæ™¦çš„æè¿°äº†è¿™æ ·çš„ä¸€æ®µè¯ï¼š\nClassified N.S.A. memos appear to confirm that the fatal weakness, discovered by two Microsoft cryptographers in 2007, was engineered by the agency. The N.S.A. wrote the standard and aggressively pushed it on the international group, privately calling the effort \u0026ldquo;a challenge in finesse.\u0026rdquo;\nè¿™è®©ä¸šç•Œå¾ˆå¿«å°±é”å®šåˆ°äº†å…·ä½“çš„å¯¹è±¡ï¼Œå°±æ˜¯æ—©åœ¨ 2007 å¹´å°±ç”±ä¸¤åæ¥è‡ªå¾®è½¯çš„å¯†ç å­¦ç ”ç©¶ä¸“å®¶å‘ç°å¯ä»¥è¢«æ¤å…¥åé—¨ 3 çš„ä¼ªéšæœºæ•°ç”Ÿæˆç®—æ³•ï¼šæ¥è‡ª NIST SP800-90 çš„ Dual_EC_DRBG.\nç´§æ¥ç€åœ¨åŒå¹´çš„ 12 æœˆï¼Œè·¯é€ç¤¾æ›´æ˜¯ç›´æ¥ç‹¬å®¶çˆ†æ–™å‡ºäº† NSA å¯¹ RSA å…¬å¸è¿›è¡Œ $10 million çš„è´¿èµ‚ï¼Œå°† Dual_EC_DRBG ä½œä¸º RSA å•†ä¸šäº§å“ Bsafe ä¸­é¦–é€‰çš„éšæœºæ•°ç”Ÿæˆç®—æ³•çš„äº‹ 4ã€‚\nå¾ˆå¿«ï¼Œè¶Šæ¥è¶Šå¤šçš„è¯æ®éƒ½æŒ‡å‡º Dual_EC_DRBG ç¡®å®å­˜åœ¨å¯èƒ½çš„åé—¨ 5 6ï¼Œå·¥ä¸šç•Œçº·çº·å¼€å§‹æŠ›å¼ƒ Dual_EC_DRBGï¼Œå¹¶ä¸”éšä¹‹è€Œæ¥çš„è¿˜æœ‰æ„ˆæ¼”æ„ˆçƒˆçš„å¯¹ NIST æ›²çº¿çš„è´¨ç–‘ 7 8 9ï¼Œå¯ä»¥è¯´ä» 2013 åï¼Œå¯†ç å­¦è¿›å…¥äº† ã€Œåæ–¯è¯ºç™»æ—¶ä»£ã€ï¼Œä¸šç•Œæ€¥éœ€ä¸€ä¸ªé€æ˜ã€å…¬å¼€ã€å¯å®¡æŸ¥ã€å¯æŒç»­æ”¹è¿›çš„ ECC å®ç°æ¥æ‘†è„± NSA è¿™ä¸ª\u0026quot;ç¾å›½è€å¤§å“¥\u0026quot;ç»™å‡ºçš„å¯ç–‘æ›²çº¿ã€‚\nCurve25519ï¼ŒX25519ï¼ŒEd25519 # éšç€ä¸šç•Œå¯¹ NIST æ¤­åœ†æ›²çº¿çš„ä¸ä¿¡ä»»åŠ å‰§ï¼ŒåŸå…ˆäº 2006 å¹´å‘å¸ƒååªåœ¨å­¦æœ¯ç•Œä¼ æ’­çš„ 25519 æ›²çº¿çƒ­åº¦è¿…é€Ÿæå‡ï¼Œå„å·¥ä¸šç•Œçš„è½¯ä»¶å¼€å§‹çº·çº·åŠ å…¥å¯¹ 25519 æ›²çº¿çš„æ”¯æŒã€‚ä¸€æ–¹é¢æ˜¯ä¿¡ä»»é—®é¢˜ï¼Œå¦ä¸€æ–¹é¢æ˜¯ ECC åœ¨å·¥ä¸šç•Œä½¿ç”¨ä¸Šå­˜åœ¨å¯èƒ½çš„ä¸“åˆ©çº çº· 10ï¼Œè€Œ Curve25519 æ˜¯å…¬å…±é¢†åŸŸçš„äº§ç‰©ï¼Œä¸å—ä»»ä½•ä¸“åˆ©ä¿æŠ¤ 11ã€‚\nRFC åœ¨ 2016 å¹´ 1 æœˆ æ¨å‡ºçš„ RFC 7748 æ˜ç¡®äº†åœ¨ ECDH åè®®ä¸­åº”ç”¨ 25519 æ›²çº¿çš„ X25519 æ–¹æ³•ï¼Œè€Œ Ed25519 åˆ™æ˜¯å‡ºç°åœ¨ 2017 å¹´ 1 æœˆçš„ RFC 8032 è¿™ä¸ªå¯¹ EdDSA æ•°å­—ç­¾åç®—æ³•è¿›è¡Œäº†æ›´åŠ æ˜æ™°çš„æ ‡å‡†åŒ–è§„èŒƒä¸­ï¼Œå¯ä»¥è¯´è‡ªæ­¤ä¹‹åï¼Œå¯ç–‘çš„ NIST æ›²çº¿å°†ä¼šé€æ­¥çš„é€€å‡ºå†å²èˆå°ã€‚\nä»ç†è®ºä¸Šè¯´ï¼Œ25519 æ›²çº¿çš„ä¼˜åŠ¿åœ¨äºï¼š\næ²¡æœ‰ä¸“åˆ©çº¦æŸ\nå…¬å¼€ï¼Œé€æ˜çš„å‚æ•°ï¼Œå¯ä¿¡åº¦é«˜ \u0026ndash; ä¸åƒ NIST çš„æ›²çº¿é‚£æ ·å­˜åœ¨å¯ç–‘çš„ã€æ¥è·¯ä¸æ˜çš„ Seed\nå®ç”¨å®‰å…¨æ€§é«˜ï¼ŒåŠ›å›¾é€šè¿‡ç²¾å¿ƒè®¾è®¡çš„å®ç”¨æ€§åšå¥½å®‰å…¨æ€§é˜²æŠ¤\nç†è®ºä¸Šçš„å®‰å…¨æ€§ä¸ç­‰äºå®é™…ä¸Šçš„å®‰å…¨æ€§ï¼Œå› ä¸ºä¸æ°å½“çš„å®ç°å¯¼è‡´çš„æ¼æ´ä¸åœ¨å°‘æ•° \u0026ndash; æœ€è‘—åçš„ä¾‹å­å°±æ˜¯ç´¢å°¼çš„ PS3 12 13\nå¯¹äºæ›²çº¿çš„å®‰å…¨æ€§æ¢ç©¶å¯ä»¥å‚è€ƒï¼šSafeCurves: choosing safe curves for elliptic-curve cryptography\næ€§èƒ½ä¼˜å¼‚ï¼Œè®¡ç®—é€Ÿåº¦ä¸Šæ¯” NIST æ›²çº¿è¦å¿«å¾ˆå¤šï¼Œå¯¹ä½ç®—åŠ›çš„ç¡¬ä»¶æ›´å‹å¥½\nå…¬é’¥é•¿åº¦å¾ˆçŸ­ï¼Œåªæœ‰ 32 bytes\næŒ‰ Go æ ‡å‡†åº“ä¸­ç»™å‡ºçš„ç®—æ³•è®¡ç®—äº†ä¸‹ï¼ŒNIST çš„å„ä¸ªæ›²çº¿çš„å…¬é’¥é•¿åº¦å¦‚ä¸‹ï¼š\nNIST Curve Public Key Bytes Length P-224 57 P-256 65 P-384 97 P-521 133 å¯ä»¥çœ‹å‡º 25519 è¿™ä¸ªå…¬é’¥é•¿åº¦ç¡®å®æ¯” NIST çš„è¦çŸ­å¾ˆå¤šã€‚\nIANIX ä¸“é—¨æœ‰ä¸€ä¸ªç½‘é¡µåˆ—å‡ºäº†ä½¿ç”¨ 25519 æ›²çº¿çš„è½¯ä»¶/è½¯ä»¶åº“ï¼šThings that use Curve25519ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥è‡ªè¡Œæµè§ˆã€‚\nä¸‹é¢ç®€å•èŠèŠå‡ ä¸ªæˆ‘ä¸ªäººæ¥è§¦è¾ƒå¤šçš„ä½¿ç”¨äº† 25519 æ›²çº¿çš„é¢†åŸŸ/è½¯ä»¶çš„æƒ…å†µã€‚\nOpenSSH ä¸­çš„ 25519 # SSH çš„å¯†é’¥åå•†æ²¡æœ‰çœ‹è§ä½¿ç”¨ ECDH è¿™ä¸ªæœ¯è¯­ï¼Œè€Œæ˜¯ç›´æ¥å« KEXï¼Œå³ Key Exchange.\nOpenSSH å¯ä»¥é€šè¿‡ ssh -Q kex æŸ¥çœ‹æ”¯æŒçš„ KEX ç®—æ³•\næƒ³è¦çŸ¥é“å…¶ä»–ä¸åŒçš„ SSH å®ç°å¯¹ KEX çš„æ”¯æŒï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªçŸ©é˜µï¼šKey exchange protocols\nLibSSH çš„ Aris Adamantiadis äº 2013 å¹´ 9 æœˆ 27 æ—¥ä¸º LibSSH çš„ KEX æ·»åŠ äº† 25591 æ›²çº¿çš„æ”¯æŒ: kex: implement curve25519-sha256@libssh.orgï¼š\næ˜¯çš„ï¼Œå°±åœ¨çº½çº¦æ—¶æŠ¥é‚£ç¯‡æŠ¥é“ä¹‹åçš„åŒæœˆå°±å®Œæˆäº†ï¼Œè¿™å¯èƒ½æ˜¯ä¸–ç•Œä¸Šç¬¬ä¸€ä¸ªå®ç°åº”ç”¨ 25519 æ›²çº¿çš„ SSH åŠŸèƒ½åº“ã€‚å¼•ç”¨ä»–è‡ªå·±çš„æè¿° 14 æ˜¯ï¼š\nThis algorithm does not rely on NIST-based curves and gives us more security confidence against a possible backdoor in nistp-256 curve.\néšåè¿™ä¸ªåŠŸèƒ½ä½œä¸º Patch 15 è¢«ä»–æäº¤ç»™äº† OpenBSD å›¢é˜Ÿï¼Œå¹¶ä¸”åœ¨ 2013 å¹´ 11 æœˆ 3 æ—¥è¿›å…¥ OpenBSD çš„ä¸»çº¿ use curve25519 for default key exchange (curve25519-sha256@libssh.org);ï¼š\nå¯†é’¥åå•†çš„åŠŸèƒ½æœ‰äº†ï¼Œå‰©ä¸‹çš„èº«ä»½è®¤è¯é‚£å—ï¼ˆHost Key å’Œ User Authentication Keyï¼‰å¯¹ Ed25519 çš„æ”¯æŒä¹Ÿåœ¨åŒå¹´çš„ 12 æœˆ å®Œæˆ support ed25519 keys (hostkeys and user identities) using the public â€¦ï¼š\nOpenSSH å¯ä»¥é€šè¿‡ ssh -Q key æŸ¥çœ‹æ”¯æŒçš„ Host / User Authentication Key åˆ—è¡¨\næƒ³è¦çŸ¥é“å…¶ä»–ä¸åŒçš„ SSH å®ç°å¯¹ Host / User Authentication Key çš„æ”¯æŒï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªçŸ©é˜µ: Hostkey formats\næ‰€æœ‰ä¸Šè¿°çš„ç‰¹æ€§éƒ½éšç€ 2014 å¹´ 1 æœˆ 30 æ—¥å‘å¸ƒçš„ OpenSSH 6.5 åˆ°æ¥ï¼š\nOpenBSD çš„å‘å¸ƒåœ¨ 5.5ï¼Œæ™šäº†å‡ ä¸ªæœˆã€‚\nä¸Šé¢çš„ä¸¤ç±»ç‰¹æ€§åˆ†åˆ«åœ¨ 2020 å¹´çš„ RFC 8709 å’Œ RFC 8731 è¢«æ ‡å‡†åŒ–ã€‚8709 æè¿°çš„æ˜¯å¦‚ä½•åœ¨ SSH åè®®ä¸­ä½¿ç”¨ EdDSA ï¼Œ8731 åˆ™æ˜¯ KEX ä¸­å¯¹ 25519 å’Œ 448 çš„ä½¿ç”¨ã€‚\nä½†æ˜¯æˆ‘çœ‹ç°åœ¨ OpenSSH ä¹Ÿæ²¡æ”¯æŒ 448 æ›²çº¿ 16ã€‚\nTLS ä¸­çš„ 25519 # ä» IANIX ç»™å‡ºçš„æ—¶é—´çº¿çœ‹ï¼Œåœ¨ RFC 7748 æ­£å¼å‘å¸ƒä¹‹å‰ï¼Œå¾ˆå¤š TLS ç›¸å…³çš„è½¯ä»¶å·²ç»æ ¹æ® RFC è‰æ¡ˆç­‰å®ç°äº†å¯¹ 25519 çš„æ”¯æŒã€‚\nçœ‹å¾—å‡ºæœç´¢å·¨äºº Google çš„åŠ¨ä½œè¿˜ç®—æ¯”è¾ƒè¿…é€Ÿï¼Œæ¯•ç«Ÿè¿™æ˜¯å‡ºäº Chromium / Chrome çš„ç°å®éœ€æ±‚ã€‚\nä»å‘å¸ƒå£°æ˜ä¸Šçœ‹ï¼ŒLibreSSL çš„å®ç°ï¼ˆ2017-02-01ï¼Œ2.5.1ï¼‰æ¯”å®ƒé‚£ä¸ªå…„å¼Ÿ OpenSSL è¿˜è¦æ™šæ¥è¿‘åŠå¹´ã€‚è™½ç„¶è¿™å¯èƒ½æ˜¯å› ä¸º LibreSSL è¦ä» OpenBSD æ‰£ä»£ç å¯¼è‡´çš„ï¼Œä½†å®é™…ä¸Š OpenBSD ä»“åº“ä¸­çš„å®ç°å°±æ˜¯æ¯” OpenSSL è¦æ›´æ™š 17ã€‚\nLibsodium æ›´æ™šï¼Œåœ¨ 2017 å¹´ 3 æœˆ çš„ 1.0.12 æ‰æ”¯æŒ\nGolang ä¸­ TLS æ ‡å‡†åº“å¯¹ X25519 çš„æ”¯æŒæ˜¯åœ¨ 2017 å¹´ 2 æœˆå‘å¸ƒçš„ 1.8 å¼•å…¥çš„ï¼Œè§ crypto/tls: support X25519 key exchangeã€‚æ¯”è¾ƒç¥å¥‡çš„æ˜¯ï¼Œä»è¿™ä¸ª issue ä¸­ç”šè‡³èƒ½å‘ç° Google å†…éƒ¨åœ¨ 2015 å¹´ 12 æœˆå¯¹ BoringSSL åšæµ‹è¯•æ—¶ä½¿ç”¨çš„æ˜¯ Go ä»£ç ï¼Œå³å½“æ—¶å°±å·²åšåˆ°ç”¨ Go å®ç°äº† X25519ã€‚\nX509 ä¸­çš„ 25519 # 2018 å¹´ 8 æœˆå‘å¸ƒçš„ RFC 8410 ä¸­æ­£å¼å°† EdDSA è¿ç”¨åœ¨ X509 ä¸­ï¼ŒåŒæ—¶ä¹Ÿå¯¹ RFC 7748 ä¸­å®šä¹‰çš„ X25519 è¡¥å……äº†ä¸‹ ASN.1 çš„ OID ç­‰ä¿¡æ¯ã€‚å¯èƒ½è¯»è€…ä¼šå¥‡æ€ªï¼šX25519 ä¸æ˜¯ ECDH åè®®ä½¿ç”¨çš„ç®—æ³•å—ï¼Œæ€ä¹ˆä¼šæœ‰ ASN.1 çš„å®šä¹‰ï¼ŸåŸå› åœ¨äºè¿™ä¸ª RFC æ ‡å‡†ä¸­è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå¥‡æ€ªçš„ç”¨æ³•: å°† X25519 çš„å…¬é’¥ç­¾ååæ”¾åœ¨è¯ä¹¦çš„ç»“æ„ä¸­ï¼Œæ‰€ä»¥æ‰éœ€è¦å®šä¹‰ X25519 çš„ OIDã€‚ä¸è¿‡æˆ‘ä¹Ÿæ²¡å¤ªææ˜ç™½å…·ä½“çš„ç”¨æ³•å’Œæ„ä¹‰ï¼Œç½‘ä¸Šçš„èµ„æ–™ä¹Ÿç›¸å¯¹è¾ƒå°‘ 18ã€‚\nOpenSSL å€’æ˜¯åœ¨åŒå¹´ 9 æœˆ 20 æ—¥å‘å¸ƒçš„ 1.1.1 æ­£å¼ç‰ˆ 19 20 ä¸­æ”¯æŒäº† EdDSA ç­¾åçš„è¯ä¹¦ï¼Œä½†æ˜¯æˆªæ­¢ç›®å‰ï¼ˆæ–‡ç« ç¼–å†™æ—¶ï¼‰ï¼Œç°å®ä¸–ç•Œä¸­çš„å¯ä¿¡ CA ç»„ç»‡æ™®ééƒ½ä¸æ”¯æŒç­¾å‘ä½¿ç”¨ Ed25519 ç­¾åæ–¹æ¡ˆçš„è¯ä¹¦ã€‚\nåœ¨ Google Groups ä¸Šçš„ sci.crypt Usenet è®¨è®ºå­˜æ¡£ NIST annouces set of Elliptic Curves\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nN.S.A. Able to Foil Basic Safeguards of Privacy on Web\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nOn the Possibility of a Back Door in the NIST SP800-90 Dual Ec Prng\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nExclusive: Secret contract tied NSA and security industry pioneer\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nDual EC in X9.82 and SP 800-90\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nYouTube è§†é¢‘ How did the NSA hack our emails?\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nWhy I donâ€™t Trust NIST P-256\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nA+ Fail\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nAn overview of the new features in GnuTLS 3.5.0\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nECC patents\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nIrrelevant patents on elliptic-curve cryptography\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nConsole Hacking 2010 - PS3 Epic Fail\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nHackers Describe PS3 Security As Epic Fail, Gain Unrestricted Access\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nOpenSSH introduces curve25519-sha256@libssh.org key exchange !\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n[PATCH] curve25519-sha256 at libssh.org key exchange proposal\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nOpenSSH Specifications\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nAdd support for ECDHE with X25519.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\ncryptography é¡¹ç›®ä¸­çš„ issueï¼Œè¯„è®ºä¸­æè¿°äº†å¯èƒ½çš„ X25519 è¯ä¹¦ç”¨é€” X25519 certificates\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nPR #3503 Ed25519 support\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nAdd Ed25519 algorithm.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2023-06-03","externalUrl":null,"permalink":"/posts/2023/06/ecc-meandering/","section":"åšå®¢","summary":"æœ€è¿‘ç”±äºå·¥ä½œåŸå› ï¼Œæ¥è§¦äº†ä¸å°‘ç°ä»£è®¡ç®—æœºå¯†ç å­¦çŸ¥è¯†ã€‚æƒ³å†™ç‚¹ä¸œè¥¿åˆ†äº«åˆ†äº«ï¼Œä½†ç”±äºå­¦çš„éƒ½æ˜¯äº›çš®æ¯›ï¼Œå±äºå°†å°±èƒ½å¤Ÿåº”ç”¨çš„æ°´å¹³ï¼Œè¿™é‡Œåªèƒ½å†™ä¸€ç¯‡æ‚è°ˆï¼Œé—²èŠä¸‹ ECC å’Œ 25519ã€‚","title":"ECC æ‚è°ˆï¼šNIST / NSA åé—¨ï¼ŒCurve25519","type":"posts"},{"content":"","date":"2022-11-10","externalUrl":null,"permalink":"/tags/dns/","section":"Tags","summary":"","title":"DNS","type":"tags"},{"content":"","date":"2022-11-10","externalUrl":null,"permalink":"/tags/macos/","section":"Tags","summary":"","title":"MacOS","type":"tags"},{"content":"è¦å®ç°æ ‡é¢˜æ‰€æè¿°çš„ç›®çš„ï¼Œåœ¨ macOS ä¸Šæœ‰ä¸¤ç§æ‰‹æ®µã€‚\næœ¬æ–‡æ‰€è¿°å‘½ä»¤æ“ä½œå‡ä½¿ç”¨ macOS Ventura 13.0 å®Œæˆã€‚\nBSD styleï¼Œresolver file # ä»å¾ˆå¤è€çš„ OS X æ—¶æœŸèµ·ï¼Œmac ä¸Šå°±æ”¯æŒé€šè¿‡é…ç½® resolver æ–‡ä»¶çš„æ–¹å¼æ¥è®¾ç½® DNSã€‚æ–‡ä»¶çš„å…·ä½“æ ¼å¼å¯ä»¥é€šè¿‡ man 5 resolver äº†è§£ã€‚\nå…·ä½“ç”¨æ³•å¯ä»¥ç®€è¦æ¦‚è¿°ä¸ºï¼Œåªéœ€è¦åœ¨ /etc/resolver æ–‡ä»¶å¤¹ä¸‹ï¼ˆéœ€è¦è‡ªè¡Œåˆ›å»ºè¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œé»˜è®¤ä¸å­˜åœ¨ï¼‰ä¸‹åˆ›å»ºä¸€ä¸ªå«æœ‰ resolver æ ¼å¼å†…å®¹çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ /etc/resolver/example.comï¼Œå°±èƒ½è®© example.com çš„åŸŸåè§£æéƒ½ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶å†…æŒ‡å®šçš„ DNS æœåŠ¡å™¨åœ°å€ã€‚ä¸å†éœ€è¦çš„è¯åªè¦åˆ é™¤æ‰å¯¹åº”æ–‡ä»¶å³å¯ã€‚\nä»¥æˆ‘å®¶ä¸­ç½‘ç»œä½¿ç”¨çš„ lan è¿™ä¸ª TLD ä¸ºä¾‹ï¼Œæ–‡ä»¶æœ€ç®€å•çš„å†…å®¹åªéœ€è¦å†™æˆè¿™æ ·ï¼š\ndomain lan search lan nameserver 192.168.15.1 åˆ›å»ºæˆ–ä¿®æ”¹äº†è¿™ä¸ªæ–‡ä»¶åæ‰§è¡Œ scutil --dns æŸ¥çœ‹æ˜¯å¦å‡ºç°äº†å¯¹åº”çš„ resolverï¼š\n$ scutil --dns DNS configuration resolver #1 nameserver[0] : fe80::800c:67ff:fe1d:fd64%12d nameserver[1] : 172.20.10.1 if_index : 12 (en1) flags : Request A records, Request AAAA records reach : 0x00020002 (Reachable,Directly Reachable Address) resolver #2 domain : local options : mdns timeout : 5 flags : Request A records, Request AAAA records reach : 0x00000000 (Not Reachable) order : 300000 resolver #3 domain : 254.169.in-addr.arpa options : mdns timeout : 5 flags : Request A records, Request AAAA records reach : 0x00000000 (Not Reachable) order : 300200 resolver #4 domain : 8.e.f.ip6.arpa options : mdns timeout : 5 flags : Request A records, Request AAAA records reach : 0x00000000 (Not Reachable) order : 300400 resolver #5 domain : 9.e.f.ip6.arpa options : mdns timeout : 5 flags : Request A records, Request AAAA records reach : 0x00000000 (Not Reachable) order : 300600 resolver #6 domain : a.e.f.ip6.arpa options : mdns timeout : 5 flags : Request A records, Request AAAA records reach : 0x00000000 (Not Reachable) order : 300800 resolver #7 domain : b.e.f.ip6.arpa options : mdns timeout : 5 flags : Request A records, Request AAAA records reach : 0x00000000 (Not Reachable) order : 301000 resolver #8 domain : lan search domain[0] : lan nameserver[0] : 192.168.15.1 flags : Request A records, Request AAAA records reach : 0x00000002 (Reachable) DNS configuration (for scoped queries) resolver #1 nameserver[0] : fe80::800c:67ff:fe1d:fd64%12d nameserver[1] : 172.20.10.1 if_index : 12 (en1) flags : Scoped, Request A records, Request AAAA records reach : 0x00020002 (Reachable,Directly Reachable Address) å¯ä»¥çœ‹è§ #8ï¼Œè¡¨æ˜é…ç½®å·²ç»ç”Ÿæ•ˆã€‚\nè¿™ä¸ª scutil å‘½ä»¤å°†åœ¨ä¸‹ä¸€ç« æè¿°ã€‚\nå¦‚æœæ˜¯ macOS 10.10.4+ çš„ç³»ç»Ÿï¼Œåœ¨åˆ›å»ºæˆ–ä¿®æ”¹äº†è¿™ä¸ªæ–‡ä»¶åï¼Œå»ºè®®ç»™ mDNSResponder å‘é€ HUP ä¿¡å·æ¥æ¸…é™¤ç³»ç»Ÿçš„ DNS ç¼“å­˜ã€‚\nkillall -HUP mDNSResponder æµ‹è¯•é…ç½®æ˜¯å¦ç”Ÿæ•ˆå¯ä»¥ä½¿ç”¨ dns-sd å‘½ä»¤ï¼š\n$ dns-sd -q netbox DATE: ---Wed 09 Nov 2022--- 23:21:40.760 ...STARTING... Timestamp A/R Flags IF Name Type Class Rdata 23:21:40.836 Add 3 0 netbox.lan. CNAME IN unicorn.lan. 23:21:40.836 Add 2 0 unicorn.lan. Addr IN 192.168.15.2 ^C ä¹Ÿå¯ä»¥åœ¨ -G åæŒ‡å®š v4 / v6 æ¥æŸ¥è¯¢ A / AAAAï¼š\n$ dns-sd -G v4v6 netbox DATE: ---Wed 09 Nov 2022--- 23:23:41.669 ...STARTING... Timestamp A/R Flags IF Hostname Address TTL 23:23:41.686 Add 2 0 unicorn.lan. 192.168.15.2 15 23:23:41.700 Add 2 0 netbox. 0000:0000:0000:0000:0000:0000:0000:0000%\u0026lt;0\u0026gt; 77 No Such Record ^C System Configuration Frameworkï¼Œscutil # åœ¨ macOS ä¸Šï¼Œè¿˜æœ‰ä¸€å¥—ç§°ä¸º System Configuration Framework çš„é«˜çº§ç³»ç»Ÿæ¡†æ¶ï¼Œæœ€æ—©å¯èƒ½å¯ä»¥è¿½è¿°åˆ° Mac OS X Leopard æ—¶ä»£ 1ã€‚è¿™å¥—æ¡†æ¶ç”¨äºåŠ¨æ€ç®¡ç†ç³»ç»Ÿä¸­çš„å„ä¸ªé…ç½®é¡¹ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬é…ç½®ç³»ç»Ÿ DNS çš„èƒ½åŠ›ã€‚æ ¹æ®å®˜æ–¹æ–‡æ¡£ System Configuration é¡µé¢ä¸Šçš„æè¿°ï¼Œå®ƒåŸºæœ¬æ”¯æŒäº† Apple æ‰€æœ‰çš„ç³»ç»Ÿï¼Œå¦‚ iOS / iPadOS / macOS ç­‰ç­‰ã€‚åƒ iOS ä¸Šçš„ APP å¯ä»¥é€šè¿‡è°ƒç”¨è¿™å¥—æ¡†æ¶å¯¹åº”çš„ç³»ç»Ÿ API SCDynamicStore æ¥è®¾ç½® DNSï¼Œè€Œå¯¹ macOS ä¸Šçš„ç®¡ç†å‘˜ / ç”¨æˆ·æ¥è¯´ï¼Œæ›´å®ç”¨çš„æ‰‹æ®µæ˜¯é€šè¿‡ä¸Šä¸€ç« æåˆ°è¿‡çš„ scutil å‘½ä»¤ã€‚\nsc æ˜¯ System Configuration é¦–å­—æ¯çš„ç¼©å†™ã€‚\né€šè¿‡æŸ¥çœ‹ scutil çš„ man pageï¼Œå¯ä»¥åœ¨ --dns è¿™ä¸ªé€‰é¡¹ä¸‹çš„æè¿°ä¸­å‘ç°ï¼Œç³»ç»Ÿä¸Šçš„ DNS è§£æåº“ä¾ç„¶ä¿æŒç€å¯¹æ—§æœ‰çš„ BSD é£æ ¼ resolver æ–‡ä»¶çš„å…¼å®¹å’Œé€‚é…ï¼š\nç»“åˆä¸Šä¸€ç« èŠ‚ä¸­çš„å®é™…è¡¨ç°ä¹Ÿç¡®å®å¦‚æ­¤ã€‚åªæ˜¯æŒ‰ç…§ Apple çš„é£æ ¼ï¼Œçªç„¶æœªæ¥çš„æŸä¸€å¤©ç³»ç»Ÿæ›´æ–°å°±ä¸æ”¯æŒè¿™ä¸ªç‰¹æ€§äº†ä¹Ÿè¯´ä¸å‡†ï¼Œæ‰€ä»¥æå‰é€‚åº”æ–°å·¥å…·ä¹Ÿæ˜¯æœ‰ä¸€å®šå¿…è¦çš„ã€‚ä¸‹é¢å°±å±•ç¤ºä¸‹å¦‚ä½•ä½¿ç”¨ scutil è¿›è¡Œ DNS çš„é…ç½®ã€‚\nscutil æ‰§è¡ŒæŒ‡ä»¤çš„æ–¹æ³•æ˜¯äº¤äº’å¼çš„ï¼Œæ‰§è¡Œå®ƒä¼šè¿›å…¥ä¸€ä¸ªç±»ä¼¼ shell çš„åœºæ™¯ã€‚ä½†æ˜¯ä½ ä¹Ÿå¯ä»¥åƒè°ƒç”¨å…¶ä»–æ™®é€šå‘½ä»¤é‚£æ ·æ¥è°ƒç”¨å®ƒï¼Œæ¯”å¦‚ä½¿ç”¨ç®¡é“æ–¹æ³•ä¼ é€’ stdinï¼š\n$ echo help | scutil Available commands: help : list available commands f.read file : process commands from file quit : quit d.init : initialize (empty) dictionary d.show : show dictionary contents d.add key [*#?%] val [v2 ...] : add information to dictionary (*=arrayï¼Œ#=numberï¼Œ?=booleanï¼Œ%=hex data) d.remove key : remove key from dictionary list [pattern] : list keys in data store add key [\u0026#34;temporary\u0026#34;] : add key in data store w/current dict get key : get dict from data store w/key set key : set key in data store w/current dict show key [\u0026#34;pattern\u0026#34;] : show values in data store w/key remove key : remove key from data store notify key : notify key in data store n.list [\u0026#34;pattern\u0026#34;] : list notification keys n.add key [\u0026#34;pattern\u0026#34;] : add notification key n.remove key [\u0026#34;pattern\u0026#34;] : remove notification key n.changes : list changed keys n.watch : watch for changes n.cancel : cancel notification requests æˆ–è€…ä½¿ç”¨ heredocï¼š\n$ scutil \u0026lt;\u0026lt; EOF heredoc\u0026gt; help heredoc\u0026gt; EOF Available commands: help : list available commands f.read file : process commands from file quit : quit d.init : initialize (empty) dictionary d.show : show dictionary contents d.add key [*#?%] val [v2 ...] : add information to dictionary (*=arrayï¼Œ#=numberï¼Œ?=booleanï¼Œ%=hex data) d.remove key : remove key from dictionary list [pattern] : list keys in data store add key [\u0026#34;temporary\u0026#34;] : add key in data store w/current dict get key : get dict from data store w/key set key : set key in data store w/current dict show key [\u0026#34;pattern\u0026#34;] : show values in data store w/key remove key : remove key from data store notify key : notify key in data store n.list [\u0026#34;pattern\u0026#34;] : list notification keys n.add key [\u0026#34;pattern\u0026#34;] : add notification key n.remove key [\u0026#34;pattern\u0026#34;] : remove notification key n.changes : list changed keys n.watch : watch for changes n.cancel : cancel notification requests å¦‚æœç¼–å†™è„šæœ¬ï¼Œå»ºè®®ä½¿ç”¨ help ä¸­æåˆ°çš„ f.read ç›´æ¥ä»æ–‡ä»¶ä¸­è¯»å–æŒ‡ä»¤ï¼Œæˆ–è€…ä½¿ç”¨ heredoc çš„æ–¹æ³•ã€‚è¿™ä¸¤ç§æ–¹æ³•åœ¨è¿ç»­æ‰§è¡Œå¤šä¸ªæŒ‡ä»¤çš„æƒ…å†µä¸‹æ¯”ç®¡é“ä¼ é€’ stdin èƒ½å¤Ÿæä¾›æ›´å¥½çš„é˜…è¯»æ€§ã€‚\nç®¡é“ä¼ é€’ stdin æ–¹æ³•ä¸­å¤šä¸ªæŒ‡ä»¤ä¹‹é—´éœ€è¦åŒ…å« \\nã€‚\nå…·ä½“å¦‚ä½•é…ç½® DNSï¼Œscutil çš„æ–‡æ¡£å¹¶æœªåšå‡ºè¿‡å¤šè§£é‡Šï¼Œæ¯•ç«Ÿå®ƒä¹Ÿåªæ˜¯è°ƒç”¨çš„ SystemConfiguration.framework SCDynamicStore APIs å»è®¾ç½® K / Vï¼Œä½†è®©äººæ— è¯­çš„æ˜¯ï¼Œæ¡†æ¶çš„æ–‡æ¡£é¡µåªåˆ—å‡ºäº†é…ç½® DNS çš„ Keyï¼šDNS Entity Keysï¼Œå…·ä½“è¿™äº› Key ä»£è¡¨ä»€ä¹ˆï¼Œæ¯ä¸ª Key å€¼çš„æ ¼å¼ç­‰ä¹Ÿå¹¶æœªåšå‡ºè¯¦ç»†è¯´æ˜ã€‚\nå¥½åœ¨æœ‰ Stack Exchange ä¸Šçš„ mecki çš„å›ç­” 2 3ï¼Œç»™å‡ºäº†ä½¿ç”¨ scutil é…ç½®çš„å®Œæ•´ä¾‹å­ï¼š\n#!/bin/bash sudo scutil \u0026lt;\u0026lt; EOF d.init d.add ServerAddresses * 9.9.9.9 d.add SearchDomains * stackexchange.com d.add SupplementalMatchDomains * stackexchange.com set State:/Network/Service/whatever-you-want-as-long-as-unique/DNS exit EOF æ³¨æ„ SearchDomains è¿™è¡Œï¼Œè¿™ä¸ª key åœ¨ mecki çš„å›ç­”ä¸­æ²¡æœ‰æåŠï¼Œæ˜¯æˆ‘è‡ªå·±å¯¹ç…§ DNS Entity Keys åæµ‹è¯•çš„ï¼Œå®é™…ç»“æœæ˜¾ç¤ºå®ƒæ²¡ä»€ä¹ˆç”¨ã€‚\nå¯¹äº mecki æ€ä¹ˆçŸ¥é“ä½¿ç”¨ä»€ä¹ˆ Key è¿™å›äº‹ï¼Œä»ä»–èƒ½ç»™å‡º Apple è¿™äº›ç»„ä»¶æºç åœ¨ GitHub çš„åœ°å€ è¿™æƒ…å†µçœ‹ï¼Œåæœ‰å…«ä¹æ˜¯ä»–çœ‹è¿‡ä»£ç ã€‚\nè¯­æ³•ä¸­çš„ * æ˜¯ä¸€ä¸ªç‰¹æ®Šæ ‡è¯†ï¼Œç”¨æ¥è¡¨ç¤ºåé¢å€¼æ˜¯ Array ç±»å‹ã€‚\nd.add SearchDomains stackexchange.com åˆ›å»ºå‡ºçš„å¯¹è±¡ï¼š\n\u0026gt; get State:/Network/Service/whatever-you-want-as-long-as-unique/DNS \u0026gt; d.show \u0026lt;dictionary\u0026gt; { SearchDomains : stackexchange.com ServerAddresses : \u0026lt;array\u0026gt; { 0 : 9.9.9.9 } SupplementalMatchDomains : \u0026lt;array\u0026gt; { 0 : stackexchange.com } } d.add SearchDomains * stackexchange.com åˆ›å»ºå‡ºçš„å¯¹è±¡ï¼š\n\u0026gt; get State:/Network/Service/whatever-you-want-as-long-as-unique/DNS \u0026gt; d.show \u0026lt;dictionary\u0026gt; { SearchDomains : \u0026lt;array\u0026gt; { 0 : stackexchange.com } ServerAddresses : \u0026lt;array\u0026gt; { 0 : 9.9.9.9 } SupplementalMatchDomains : \u0026lt;array\u0026gt; { 0 : stackexchange.com } } é…ç½®å®Œåè¿˜æ˜¯è€æ ·å­ï¼Œé€šè¿‡ scutil --dns æŸ¥çœ‹æ˜¯å¦å‡ºç°äº†å¯¹åº”çš„ resolverï¼š\n$ scutil --dns DNS configuration resolver #1 search domain[0] : stackexchange.com search domain[1] : lan nameserver[0] : 192.168.15.1 nameserver[1] : fd6f:9316:1db::1 if_index : 12 (en1) flags : Request A records, Request AAAA records reach : 0x00020002 (Reachable,Directly Reachable Address) resolver #2 domain : stackexchange.com nameserver[0] : 9.9.9.9 flags : Supplemental, Request A records, Request AAAA records reach : 0x00000002 (Reachable) order : 101800 ... å¯ä»¥çœ‹å‡ºæ˜æ˜¾çš„ä¸ resolver file é…ç½®æ—¶ä¸ä¸€æ ·çš„è¾“å‡ºã€‚\nä½¿ç”¨ dns-sd æµ‹è¯•ï¼š\n$ dns-sd -q apple DATE: ---Thu 10 Nov 2022--- 00:13:03.209 ...STARTING... Timestamp A/R Flags IF Name Type Class Rdata 00:13:03.211 Add 40000003 0 apple.stackexchange.com. Addr IN 172.64.144.30 00:13:03.211 Add 40000002 0 apple.stackexchange.com. Addr IN 104.18.43.226 ^C å¦‚æœæƒ³è¦ç§»é™¤è¿™ä¸ªé…ç½®åªéœ€åˆ é™¤è¿™ä¸ª Key å³å¯ï¼š\nsudo scutil remove State:/Network/Service/whatever-you-want-as-long-as-unique/DNS è¦åœ¨ scutil ä¸­æŸ¥çœ‹è¿˜æœ‰å…¶ä»–å“ªäº› DNS çš„ Keys å¯ä»¥ä½¿ç”¨ list \u0026quot;.*DNS\u0026quot;ï¼š\n$ echo \u0026#39;list \u0026#34;.*DNS\u0026#34;\u0026#39; | scutil subKey [0] = State:/Network/Global/DNS subKey [1] = State:/Network/MulticastDNS subKey [2] = State:/Network/PrivateDNS subKey [3] = State:/Network/Service/C6BA5C2B-B3FB-4A34-99EA-EE62154A2BD6/DNS subKey [4] = State:/Network/Service/whatever-you-want-as-long-as-unique/DNS å…¶ä»–ä½¿ç”¨ scutil çš„ä¾‹å­å¯ä»¥å‚è€ƒï¼š\nVPN client over-riding DNS on macOS How to add some additional DNS search domains without ignoring the DHCP ones? Tinc integration # å¦‚æœæœ‰è¯»è€…åƒæˆ‘ä¸€æ ·ä½¿ç”¨ tincï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹æˆ‘ç®€å•çš„ up / down è„šæœ¬ã€‚\nresolver file # /opt/homebrew/etc/tinc/z10n0110/tinc-up:\n#!/bin/sh ifconfig $INTERFACE 10.0.7.3 10.0.7.9 netmask 255.255.0.0 route add -net 10.0.7.0/24 -interface $INTERFACE route add -net 192.168.15.0/24 -interface $INTERFACE mkdir -p /etc/resolver cat \u0026gt; /etc/resolver/lan \u0026lt;\u0026lt; HERE domain lan search lan nameserver 192.168.15.1 HERE cat \u0026gt; /etc/resolver/z10n0110.men \u0026lt;\u0026lt; HERE domain z10n0110.men search z10n0110.men nameserver 192.168.15.1 HERE killall -HUP mDNSResponder /opt/homebrew/etc/tinc/z10n0110/tinc-down:\n#!/bin/sh route delete -net 192.168.15.0/24 -interface $INTERFACE route delete -net 10.0.7.0/24 -interface $INTERFACE ifconfig $INTERFACE down if [ -f /etc/resolver/lan ]; then rm -rf /etc/resolver/lan fi if [ -f /etc/resolver/z10n0110.men ]; then rm -rf /etc/resolver/z10n0110.men fi killall -HUP mDNSResponder scutil # /opt/homebrew/etc/tinc/z10n0110/tinc-up:\n#!/bin/sh ifconfig $INTERFACE 10.0.7.3 10.0.7.9 netmask 255.255.0.0 route add -net 10.0.7.0/24 -interface $INTERFACE route add -net 192.168.15.0/24 -interface $INTERFACE cat \u0026gt; /opt/homebrew/etc/tinc/z10n0110/up-cmds.scutil \u0026lt;\u0026lt; HERE d.init d.add ServerAddresses * 192.168.15.1 d.add SupplementalMatchDomains * lan z10n0110.men set State:/Network/Service/tinc-z10n0110/DNS exit HERE echo \u0026#39;f.read /opt/homebrew/etc/tinc/z10n0110/up-cmds.scutil\u0026#39; | scutil killall -HUP mDNSResponder /opt/homebrew/etc/tinc/z10n0110/tinc-down:\n#!/bin/sh route delete -net 192.168.15.0/24 -interface $INTERFACE route delete -net 10.0.7.0/24 -interface $INTERFACE ifconfig $INTERFACE down echo \u0026#39;remove State:/Network/Service/tinc-z10n0110/DNS\u0026#39; | scutil killall -HUP mDNSResponder 2009 å¹´çš„æ–‡ç« ï¼šOverriding DHCP- or VPN-assigned DNS servers in Mac OS X Leopard\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nDo /etc/resolver/ files work in Mountain Lion for DNS resolution?\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nWhat\u0026rsquo;s the grammar of the Dynamic Store\u0026rsquo;s DNS config?\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2022-11-10","externalUrl":null,"permalink":"/posts/2022/11/set-specific-dns-nameservers-for-specific-domain-on-macos/","section":"åšå®¢","summary":"è¦å®ç°æ ‡é¢˜æ‰€æè¿°çš„ç›®çš„ï¼Œåœ¨ macOS ä¸Šæœ‰ä¸¤ç§æ‰‹æ®µã€‚","title":"macOS ä¸‹è®©ç‰¹å®šåŸŸåçš„è§£æä½¿ç”¨æŒ‡å®šçš„ DNS Nameserver","type":"posts"},{"content":"","date":"2022-11-08","externalUrl":null,"permalink":"/tags/prometheus/","section":"Tags","summary":"","title":"Prometheus","type":"tags"},{"content":"æœ€è¿‘ç»™ Grafana çš„ Node Exporter Full è¿™ä¸ªå…¬å¼€ä»ªè¡¨ç›˜æäº†ä¸€ä¸ª PR. ä¸»è¦æ˜¯è§£å†³ä¸æ–°ç‰ˆçš„ Grafana 9 çš„å…¼å®¹é—®é¢˜ã€‚\nè¿™ä¸ªä»ªè¡¨ç›˜ä¸­çš„ CPU é¢æ¿å›¾ä¸­ï¼Œéœ€è¦æŒ‰é¡ºåºç²¾å¿ƒé…ç½® 6 ä¸ªç›¸å·®ä¸å¤§çš„å¯¹åº”æ¯ä¸ª CPU æ¨¡å¼çš„æŸ¥è¯¢ã€‚ä¸ºä»€ä¹ˆè¯´ç›¸å·®ä¸å¤§ï¼Œå› ä¸ºå…¶å®éƒ½æ˜¯åœ¨æŸ¥åŒä¸€ä¸ªæŒ‡æ ‡ï¼šnode_cpu_seconds_totalï¼Œåªæ˜¯ mode ä¸åŒè€Œå·²ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯éœ€è¦ä¿è¯ mode=\u0026quot;idle\u0026quot; è¿™ä¸ªæŸ¥è¯¢çš„å±•ç¤ºæ’åœ¨æœ€åï¼Œå› ä¸ºè¿™ä¸ªé¢æ¿çš„ stack series æ¸²æŸ“é€»è¾‘éœ€è¦å¦‚æ­¤ã€‚ä»Šå¤©çªç„¶æƒ³åˆ°æ˜¯å¦èƒ½åªé…ç½®ä¸€æ¬¡æŸ¥è¯¢æ¥åšåˆ°ä¸€æ ·çš„æ•ˆæœï¼Œåªè¦ä¿è¯ API æŸ¥è¯¢è¿”å›çš„ç»“æœä¸­ï¼Œidle æ ‡ç­¾çš„ç›¸å…³æ•°æ®è¢«æ’åºåœ¨æœ€åå°±å¯ä»¥ã€‚\nç»“æœæœäº†ä¸‹ï¼Œå‘ç°å®˜æ–¹çš„ promQL æ ¹æœ¬æ²¡æœ‰è¿™æ ·çš„ sort by label ä¹‹ç±»çš„å‡½æ•°ã€‚åœ¨ 2014 å¹´ Prometheus è‡ªå·±å›¢é˜Ÿçš„äººå°±æäº†ä¸€ä¸ª Consider supporting sorting by label value çš„ issueï¼Œè§‰å¾—åº”è¯¥åŠ å…¥æ ¹æ® label value çš„æ’åºåŠŸèƒ½ï¼Œä½†æ˜¯ä¸€ç›´æ²¡ä»€ä¹ˆä¸‹æ–‡ã€‚\nåˆ°äº† 2016 å¹´ï¼Œç›´æ¥æœ‰äººå®ç°äº†å®ƒå¹¶æäº¤äº† PRï¼Œä½†æ˜¯è¢«æ‹’äº†ï¼Œç†ç”±æ˜¯ï¼š\næ¦‚è¿°ä¸€ä¸‹å°±æ˜¯è¦ç»´æŠ¤ promQL çš„ çº¯æ´æ€§ã€‚\nåš¯ï¼Œçœ‹çœ‹è¿™ ğŸ‘ æ•°é‡ã€‚\nç„¶è€Œéš”å£çš„ VictoriaMetrics çš„ MetricsQL å´å®ç°äº† 4 ä¸ªå‡½æ•° 1ï¼š\nsort_by_label sort_by_label_desc sort_by_label_numeric sort_by_label_numeric_desc åœ¨ PR çš„è¯„è®ºä¸­ï¼Œè¿™æ¡è¯„è®ºç®—æ˜¯è¯´å‡ºäº†å¤§å®¶çš„å¿ƒå£°ã€‚ç”Ÿæ€ä¸­çš„ä¸¤æ–¹äº’ç›¸æ¨è¯¿è¿™ä¸ªå®ç°ï¼Œç¤¾åŒºç”¨æˆ·è¿«åˆ‡éœ€è¦çš„åŠŸèƒ½æ€»æ˜¯å¡åœ¨ promQL è¿™é‡Œã€‚è€Œä¸”ç°åœ¨ Prometheus çš„ç”Ÿæ€ç¡®å®è®©äººæœ‰ç‚¹æ— è¯­ï¼ŒåŠŸèƒ½ç‰¹æ€§ä¸Šï¼Œå®˜æ–¹åªæœ‰ä¸¤ä¸ªä¸åš: è¿™ä¹Ÿä¸åšï¼Œé‚£ä¹Ÿä¸åšã€‚æçš„ç°åœ¨ Cortexã€ Thanosã€VictoriaMetrics ç­‰æ— ä¸€ä¸æ˜¯é€‰æ‹©å°† Prometheus è¿™ä¸ªå•å®ä¾‹ç¨‹åºè‚¢è§£æˆä¸€ä¸ªä¸ªæ¨¡å—æ¥è¶…è¶Šå®˜æ–¹çš„åŠŸèƒ½å±€é™ã€‚\næœ€åï¼Œå¦‚æœå®˜æ–¹çš„ promQL æ”¯æŒ sort_by_label_desc çš„è¯ï¼ŒCPU é¢æ¿çš„é…ç½®å°±ç®€æ´å¤šäº†ï¼Œé…ç½®ä¸€æ¡æŸ¥è¯¢è¯­å¥å³å¯ï¼š\nsort_by_label_desc( sum by(instanceï¼Œmode) ( irate(node_cpu_seconds_total{instance=\u0026#34;$node\u0026#34;ï¼Œjob=\u0026#34;$job\u0026#34;}[1m]) ) / on (instance) group_left sum by (instance) ( irate(node_cpu_seconds_total{instance=\u0026#34;$node\u0026#34;ï¼Œjob=\u0026#34;$job\u0026#34;}[1m]) ), \u0026#34;mode\u0026#34; ) åŸºäºä¸Šé¢è¿™ä¸ªç¾å¥½çš„å‡è®¾ï¼Œä½¿ç”¨ VictoriaMetrics ä½œä¸ºæ•°æ®æºæµ‹è¯•ï¼Œå¯ä»¥çœ‹è§æ•ˆæœä¸€åˆ‡æ­£å¸¸ã€‚\nMetricsQL\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2022-11-08","externalUrl":null,"permalink":"/posts/2022/11/promql-sort-by-label-feat/","section":"åšå®¢","summary":"æœ€è¿‘ç»™ Grafana çš„ Node Exporter Full è¿™ä¸ªå…¬å¼€ä»ªè¡¨ç›˜æäº†ä¸€ä¸ª PR.","title":"promQL æŒ‰ Label æ’åºçš„å‡½æ•°","type":"posts"},{"content":"","date":"2022-10-29","externalUrl":null,"permalink":"/tags/etcd/","section":"Tags","summary":"","title":"Etcd","type":"tags"},{"content":"Etcd ä½œä¸ºäº‘åŸç”Ÿé¢†åŸŸçŸ¥åçš„å¼€æºåˆ†å¸ƒå¼ KV å­˜å‚¨ç³»ç»Ÿï¼Œåœ¨å­˜å‚¨çš„æ•°æ®é›†è¾ƒå¤§çš„æƒ…å†µä¸‹ä¸€ç›´å­˜åœ¨ä¸€å®šçš„æ€§èƒ½é—®é¢˜ã€‚æ‰€ä»¥åœ¨å…¶å®˜ç½‘æ–‡æ¡£é¡µé¢ä¸Šçš„ System limits ç« èŠ‚æ˜ç¡®æŒ‡å‡ºäº†å»ºè®®ç»™å­˜å‚¨é…ç½®æœ€å¤§çš„é™é¢æ˜¯ 8 GBï¼š\næ ¹æ®ç½‘ä¸Šä¼—å¤šçš„èµ„æ–™æŒ‡å‡ºï¼Œåˆ¶çº¦æ€§èƒ½çš„ä¸»è¦å…³é”®æ˜¯å…¶å­˜å‚¨å¼•æ“: bboltã€‚\nEtcd ç›®å‰ä½¿ç”¨çš„ bbolt æ˜¯ fork è‡ª Boltdbï¼ŒåŸå› æ˜¯ Blotdb çš„åŸä½œè€…æŠŠä»“åº“ archive äº†ï¼ŒREADME ä¸­å¯ä»¥çœ‹è§æè¿°çš„ç†ç”±æ˜¯è®¤ä¸ºé¡¹ç›®å…³é”®ç›®æ ‡å·²ç»å®Œæˆï¼Œåç»­æ²¡æœ‰ç²¾åŠ›ç»§ç»­ç»´æŠ¤ã€‚\né˜¿é‡Œå·´å·´åœ¨ 2019 å¹´å¯¹ bbolt æäº¤äº†ä¸€ä¸ª PRï¼Œè¿˜å¯¹åº”åœ¨ CNCF çš„åšå®¢å‘æ–‡ Performance optimization of etcd in web scale data scenario æè¿°äº†è¿™ä¸ªæ”¹åŠ¨çš„èƒŒæ™¯ï¼Œè¿‡ç¨‹å’ŒæŠ€æœ¯ç»†èŠ‚ï¼Œå·ç§°æ”¹å–„äº†1000xçš„é€Ÿåº¦ï¼Œè®©åŸå…ˆ Etcd æ–‡æ¡£å†…æåˆ°çš„æœ€å¤§ 8 GB çš„æ–‡ä»¶ç³»ç»Ÿé™åˆ¶ä¸å†å­˜åœ¨ï¼Œç”šè‡³å¯ä»¥è®© Etcd å­˜å‚¨å¢é•¿åˆ° 100 GB ä¹Ÿä¸ä¼šæœ‰æ€§èƒ½è¡°å‡ã€‚\nä»è¿™ä¸ª PR è¢« merge çš„ commit å¯ä»¥çœ‹è§ï¼Œå—ç›Šçš„æ­£å¼ç‰ˆæœ¬æ˜¯ v1.3.2+ã€‚\nç¡®å®šäº†è¿™ä¸ª tagï¼Œè¿½è¸ªä¸‹ Etcd çš„ go.mod çš„æäº¤è®°å½•å°±å¯ä»¥å¾ˆè½»æ¾çš„æ‰¾åˆ°å…·ä½“æ˜¯ä»ä»€ä¹ˆç‰ˆæœ¬å¼€å§‹å¼•å…¥è¿™ä¸ªå˜æ›´çš„ã€‚ä» vendor: update boltdb and grpc middleware version å¯ä»¥çœ‹å‡ºï¼Œæ­£å¼ç‰ˆæœ¬æ˜¯åœ¨ v3.4.0+ã€‚\nä¸è¿‡å¾ˆæœ‰æ„æ€çš„æ˜¯ï¼Œä»å¼€å¤´æŒ‡å‡ºçš„ v3.5 å¯¹åº”æ–‡æ¡£ç« èŠ‚é¡µé¢èƒ½å¤Ÿçœ‹å‡ºï¼Œå…¶å®æ–‡æ¡£å¹¶æœªæ›´æ–°å…³äº 8 GB é™åˆ¶çš„è¿™ä¸ªè¯´æ³•ã€‚åœ¨ Issues é‡Œæœ‰äººæ 8GB recommended limit can be lifted è®¤ä¸ºæ–‡æ¡£è¯¥æ›´æ–°äº†ï¼Œä½†æ˜¯å°±æ˜¯è¿˜æ²¡æ›´æ–°ã€‚serathiusï¼ˆä»æ­¤äººç®€ä»‹çœ‹ç®—æ˜¯ Etcd çš„æŠ€æœ¯å†³ç­–è€…ï¼‰åœ¨è¯„è®ºä¸­æŒ‡å‡ºéœ€è¦ä¸ªæ›´å®˜æ–¹çš„æµ‹è¯•ç»“æœæ¥æ”¯æ’‘æ–‡æ¡£å¹ä¸Šçš„ç‰›ï¼Œæ‰€ä»¥è¿™ä¸ªä¼°è®¡è¿˜å¾—è¦æ®µæ—¶é—´ã€‚\næœ€åå†™åˆ°è¿™ï¼Œå°±æŒºçº³é—·çš„ï¼šå¯¹äº Etcd è¿™æ ·ä¸€ä¸ªé¡¹ç›®æ¥è¯´ï¼Œå¦‚æ­¤å·¨å¤§çš„æ€§èƒ½æå‡ patchï¼Œç§»é™¤äº†è¿™æ ·ä¸€ä¸ªé™åˆ¶ï¼Œå±…ç„¶ä» 2019 åˆ° 2022ï¼Œç»è¿‡äº†æ•°ä¸ª minor versionï¼Œæ²¡æœ‰æ›´æ–°æ–‡æ¡£ä¸è¯´ï¼Œç”šè‡³ v3.4.0 çš„ changelog é‡Œéƒ½æ²¡æåˆ°ï¼Œæ˜¯ä¸ªä»€ä¹ˆæƒ…å†µå‘¢?\n","date":"2022-10-29","externalUrl":null,"permalink":"/posts/2022/10/etcd-big-data-performance/","section":"åšå®¢","summary":"Etcd ä½œä¸ºäº‘åŸç”Ÿé¢†åŸŸçŸ¥åçš„å¼€æºåˆ†å¸ƒå¼ KV å­˜å‚¨ç³»ç»Ÿï¼Œåœ¨å­˜å‚¨çš„æ•°æ®é›†è¾ƒå¤§çš„æƒ…å†µä¸‹ä¸€ç›´å­˜åœ¨ä¸€å®šçš„æ€§èƒ½é—®é¢˜ã€‚æ‰€ä»¥åœ¨å…¶å®˜ç½‘æ–‡æ¡£é¡µé¢ä¸Šçš„ System limits ç« èŠ‚æ˜ç¡®æŒ‡å‡ºäº†å»ºè®®ç»™å­˜å‚¨é…ç½®æœ€å¤§çš„é™é¢æ˜¯ 8 GBï¼š","title":"Etcd çš„ Storage size limit","type":"posts"},{"content":"","date":"2022-10-23","externalUrl":null,"permalink":"/tags/fqdn/","section":"Tags","summary":"","title":"FQDN","type":"tags"},{"content":"","date":"2022-10-23","externalUrl":null,"permalink":"/tags/homelab/","section":"Tags","summary":"","title":"HomeLab","type":"tags"},{"content":"åœ¨ å¦‚ä½•ä¸ºä½ çš„ç§æœ‰ç½‘ç»œé€‰æ‹© TLD(é¡¶çº§åŸŸå) ä¸­ï¼Œæè¿°äº† TLD çš„é€‰æ‹©ã€‚è¿™ç¯‡æ–‡ç« ç®—æ˜¯ç»­é›†ï¼Œè®²è®²æœåŠ¡å™¨çš„å‘½åã€‚\nmnx.io ä¸»å¼ çš„æœ€ä½³å®è·µ # mnx.io æ˜¯ä¸€å®¶ä¸»æœºæ‰˜ç®¡å•†ï¼Œå…¶å®˜ç½‘çš„å…¬å¼€åšå®¢ä¸Šæœ‰ä¸€ç¯‡å‘è¡¨äº 2014-06-10 çš„å…³äºæœåŠ¡å™¨å‘½åçš„æœ€ä½³å®è·µåšæ–‡ï¼šA Proper Server Naming Schemeã€‚æŒ‰æ–‡ç« çš„è¯´æ³•ï¼Œè¿™å¥—æœ€ä½³å®è·µé€‚åˆå¤§å¤šæ•°çš„ä¸­å°ä¼ä¸šï¼Œå¯ä»¥è½»æ¾ç®¡ç† 1500+ çš„æœåŠ¡å™¨ã€‚æˆ‘å°†é€šè¿‡ä¸‹é¢çš„å‡ ä¸ªå­ç« èŠ‚ç®€è¦æ¦‚è¿°ä¸€ä¸‹æ–‡ç« çš„ä¸»å¼ ã€‚\nä½¿ç”¨ FQDN # ä½¿ç”¨ DNS ç³»ç»Ÿï¼Œç»™ä¸»æœºè®¾ç½®çœŸæ­£çš„ FQDNã€‚\nè¿™æ„å‘³ç€ä½ éœ€è¦æœ‰ä¸€ä¸ªé…ç½®äº† TLD çš„æœ¬åœ° DNS æœåŠ¡å™¨ã€‚\né€‰æ‹©åˆé€‚çš„ Label è®¾ç½® A è®°å½• # é€‰æ‹©å¥½åˆé€‚çš„ Label åç›´æ¥è®¾ç½® A è®°å½•ã€‚ä¾‹å¦‚ä½¿ç”¨ crimsonï¼š\ncrimson.example.com. A 192.0.2.11 ä¸ç†è§£ Label è¿™ä¸ªæœ¯è¯­çš„å¯ä»¥è‡ªè¡Œé˜…è¯» RFC 1035 2.3.1. Preferred name syntaxï¼Œæˆ–è€…ç®€å•å‚è€ƒ Route 53 DNS domain name format çš„æ–‡æ¡£æ‘˜æŠ„ï¼š\nDomain names (including the names of domains, hosted zones, and records) consist of a series of labels separated by dots.\né€šå¸¸æƒ…å†µä¸‹ï¼ŒLabel ä¸åº”è¯¥è¡¨ç¤ºå‡ºå«æœ‰çœŸæ­£çš„ç›®çš„æˆ–åŠŸèƒ½çš„è¯ï¼Œè€Œåªæ˜¯ä¸€ä¸ªä»£è¡¨äº†å”¯ä¸€ ID çš„åå­—ã€ä¸€ä¸ªä»£å·ã€ä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚\nåº”è¯¥å¦‚ä½•é€‰æ‹©å…·ä½“çš„ Labelï¼Œæ–‡ç« ç»™å‡ºäº†ä¸€ä¸ªè¯å…¸ï¼šOren Tiroshâ€™s mnemonic encoding projectï¼Œå»ºè®®ä»å…¶ä¸­éšæœºæŒ‘é€‰ã€‚è¿™ä»½è¯å…¸ä¸­ç²¾å¿ƒæŒ‘é€‰çš„ 1633 ä¸ªå•è¯å…·å¤‡ä»¥ä¸‹ç‰¹å¾ï¼š\næçŸ­ (4 - 7 letters)ï¼Œç®€æ´æ˜äº† å‘éŸ³ä¸Šå®¹æ˜“åŒºåˆ«ï¼Œå¯ä»¥è½»æ¾é€šè¿‡è¯­éŸ³äº¤æµè¯†åˆ«ï¼ˆä¾‹å¦‚ç”µè¯è®¨è®ºï¼‰ï¼Œå›½é™…åŒ–äº¤æµæ— éšœç¢ ä¹¦é¢ä¸æ˜“å‡ºç°æ··æ·†é—®é¢˜ï¼Œå¦‚æ‹¼å†™é”™è¯¯ï¼Œå­—ç¬¦äº’æ¢ç­‰ å­—ç¬¦äº’æ¢çš„å…¸å‹ä¾‹å­å°±æ˜¯æ•°å­— 0 å’Œå­—æ¯ O\nè®¾ç½® CNAME æ¥é™„åŠ ä¿¡æ¯ # æœ‰äº†æœ€åŸºç¡€çš„ FQDNï¼Œä½ å°±å¯ä»¥ç»™å®ƒè®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ªåˆ«å (CNAME) æ¥ä¸°å¯Œè¿™ä¸ªæœåŠ¡å™¨çš„åŠŸèƒ½è¯¦ç»†ä¿¡æ¯ï¼Œå…¸å‹çš„æœ‰ï¼š\nåœ°ç†ä½ç½® ç¯å¢ƒ (devã€testã€prod) ç»„ç»‡æ¶æ„ ä¸šåŠ¡èƒ½åŠ›ã€ä»£å· æ€»ä¹‹ï¼Œåœ¨æ­¤å¤„å°†é™„åŠ ä¿¡æ¯ä¿æŒè§„èŒƒã€ç»“æ„åŒ–å°±æ˜“äºå°†å…¶ä¸ CMDB å…³è”ï¼Œå¯ä»¥æœ‰æ•ˆé™ä½ä½¿ç”¨äººå‘˜çš„è„‘åŠ›è´Ÿæ‹…ã€‚å¹¶ä¸”å¾—ç›Šäº DNS çš„åˆ†å±‚è®¾è®¡ï¼Œåœ¨ DNS è®°å½•ä¸Šè¿™äº›ä¿¡æ¯å¯ä»¥éå¸¸æ¸…æ™°çš„ä»¥å±‚å±‚é€’è¿›çš„æ–¹å¼å±•ç°ï¼Œä¾‹å¦‚ï¼š\nå…ˆä½¿ç”¨ 5 ä¸ªå­—ç¬¦çš„ è”åˆå›½è´¸æ˜“å’Œè¿è¾“åœ°ç‚¹ä»£ç  UN / LOCODE è¡¨ç¤ºåœ°ç†ä½ç½®ï¼š\n\u0026lt;wip\u0026gt;.nyc.example.com. CNAME crimson.example.com. æ¥ä¸‹æ¥æ ‡è¯†ä¸Šç¯å¢ƒï¼š\n\u0026lt;wip\u0026gt;.prd.nyc.example.com. CNAME crimson.example.com. æœ€åï¼Œé™„ä¸Šå…·ä½“åŠŸèƒ½åŠåºå·ï¼š\nweb01.prd.nyc.example.com. CNAME crimson.example.com. é’ˆå¯¹ç‰¹æ®Šæƒ…å†µçš„ç­–ç•¥å˜åŒ– # å½“ç„¶, æ€»æ˜¯å­˜åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µ, éœ€è¦è¿åä¸Šè¿°çš„å‡†åˆ™è¿›è¡Œçµæ´»çš„è°ƒæ•´ã€‚å¸¸è§çš„æƒ…å†µæœ‰ä»¥ä¸‹å‡ ç§:\nä¸“ç”¨ç½‘ç»œå’Œç”µåŠ›è®¾å¤‡ã€‚ç”±äºæ­¤ç±»è®¾å¤‡ç¡¬ä»¶è·Ÿç”¨é€”ç‰¢ç‰¢ç»‘å®š, å¯ä»¥åœ¨ Label ä¸­ä½¿ç”¨åŠŸèƒ½å•è¯çš„ç¼©å†™ç›´æ¥æŒ‡å‘ A è®°å½•ï¼š\nvpn01.nyc.example.com. A 192.0.2.1 è¾…åŠ© IP å’Œè™šæ‹Ÿ IPã€‚è¿™ç±»å¯¹è±¡ä»æœ¬è´¨ä¸Šæ¥è¯´ä¹Ÿæ˜¯ä¸åŠŸèƒ½/ç”¨é€”ç»‘å®šçš„, ä¹Ÿå»ºè®®ä¸ä¸Šè¿°ä¸€æ ·å¤„ç†ï¼š\nsql01.nyc.example.com. A 192.0.2.1 é‚®ä»¶æˆ– DNS æœåŠ¡å™¨ã€‚åœ¨ RFC 2181 çš„ 10.3. MX and NS records ä¸­æ˜ç¡®æåˆ°, MX/NS è®°å½•ä¸­é…ç½®çš„å€¼ä¸èƒ½æ˜¯ CNAME ç±»å‹çš„ DNS è®°å½•ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€é‚®ä»¶æˆ– DNS ç”¨é€”çš„æœåŠ¡å™¨ä¹Ÿåªèƒ½ä½¿ç”¨ A è®°å½•ï¼š\nmta01.example.com. A 192.0.2.20 é…ç½® Domain Name Search # æœ€åï¼Œå¯ä»¥åœ¨æ¯ä¸ªæœºå™¨ä¸Šé…ç½® æœç´¢åŸŸï¼Œæ¥æ–¹ä¾¿åœ¨æœåŠ¡å™¨é—´ä½¿ç”¨çŸ­åè¿›è¡Œé€šä¿¡ã€‚ä¾‹å¦‚é…ç½® NY åœ°åŒºçš„ prd ç¯å¢ƒä½¿ç”¨ï¼š\nsearch prd.nyc.example.com example.com ä¹‹ååœ¨å…¶ä»–æœåŠ¡å™¨ä¸Šå‘èµ·çš„ä¸è¿™å°æœåŠ¡å™¨çš„ç½‘ç»œé€šä¿¡ï¼ˆæ¯”å¦‚ pingã€ssh ç­‰å‘½ä»¤ï¼‰ä¸­å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ sql01ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å®Œæ•´çš„ sql01.prd.nyc.example.comã€‚\nç»“è¯­ # è™½ç„¶æ–¹æ¡ˆçœ‹èµ·æ¥ä¸ä¼šæœ‰å¤šå¤æ‚ï¼Œåªæ˜¯ç¨å¾®éœ€è¦æœ‰ç»“æ„æ€§çš„æ€è€ƒå’Œä½¿ç”¨/é…ç½®æœ¬åœ° DNS æœåŠ¡çš„å‰ææ¡ä»¶ï¼Œæœ‰ä¸€ç‚¹é—¨æ§›ã€‚ä½†æ­£å¦‚ mnx.io çš„æ–‡ç« æ‰€æŒ‡å‡ºçš„é‚£æ ·ï¼Œå®ƒåœ¨å¯ç”¨æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯¹é•¿æœŸå¢é•¿çš„æ”¯æŒä¹‹é—´å–å¾—äº†å¾ˆå¥½çš„å¹³è¡¡ã€‚å»ºè®®åœ¨å®è·µè¿‡ç¨‹ä¸­å¯ä»¥å°½é‡å‚è€ƒä½¿ç”¨ä»–ä»¬çš„ Tips \u0026amp; Tricks ä½œä¸ºæŒ‡å¯¼ã€‚\nä»ç†è®ºä¸Šè¯´ï¼Œå¦‚æœä½ çš„æœåŠ¡å™¨æ•°é‡è¶…è¿‡äº†è¯å…¸ä¸­çš„æ€»è¯æ•° (1633)ï¼Œé‚£ä¹ˆåœ¨ Label çš„é€‰æ‹©ä¸Šè¯å…¸å°±æ²¡ä»€ä¹ˆå¸®åŠ©äº†ã€‚æˆ‘ä¸ªäººè§‰å¾—ï¼ŒæœåŠ¡å™¨æ•°é‡è¶…è¿‡ 800 çš„è¯ï¼Œæˆ–è®¸å¯ä»¥è€ƒè™‘é€æ­¥è½¬å‘ä½¿ç”¨ç‰¹æ®Š ID ä»¥é€‚åº”æœªæ¥çš„å˜åŒ–ï¼Œä¹Ÿå¯ä»¥æŠ›å¼ƒè¿™ä¸ªæ–¹æ¡ˆæ¢ç´¢ä¸€æ¡å…¨æ–°çš„é“è·¯ã€‚\nåœ¨ OpenWrt ä¸Šçš„å®è·µ # ç†è®ºæœ‰äº†ï¼Œæ¥ä¸‹æ¥ç®€å•èŠèŠæˆ‘åœ¨å®¶åº­ç½‘ç»œä¸­é€šè¿‡ OpenWrt ä¸»è·¯ç”±ä¸Šçš„ Dnsmasq å®ç°çš„å…·ä½“å®è·µã€‚å…¨éƒ¨æ“ä½œå‡é€šè¿‡ LuCI Web é¡µé¢è¿›è¡Œã€‚\nOpenWrt ç‰ˆæœ¬æ˜¯ v22.03.0ã€‚\nè¿›å…¥ ç½‘ç»œ -\u0026gt; DHCP/DNSï¼Œåœ¨é»˜è®¤çš„ å¸¸è§„è®¾ç½® æ ‡ç­¾é¡µï¼Œå¯ä»¥çœ‹è§é…ç½®çš„ TLD æ˜¯ .lanã€‚\nè¿›å…¥ ä¸»æœºåæ˜ å°„ æ ‡ç­¾é¡µï¼Œé…ç½®åŸºç¡€åå­—ã€‚\næˆ‘ä½¿ç”¨çš„ä¸»æœºåå•è¯éƒ½æ˜¯ä»ä¸Šè¿°æåˆ°çš„é‚£ä¸ªè¯å…¸ä¸­æŒ‘é€‰çš„ï¼Œå¯¹åº”èŠ‚ç‚¹çš„è¯¦æƒ…æ˜¯:\nHostname Motherboard OS Description unicorn Supermicro X10SLM-F PVE OpenWrt çš„ VM æ‰€åœ¨çš„å®¿ä¸»æœº fiber ASUS P9A-I Debian ä¸€å°å†·å¤‡ç”¨é€”çš„å­˜å‚¨æœºå™¨ axis Supermicro X10DRL-i PVE å®¶ä¸­ä¸»è¦çš„ Homelab è®¾å¤‡ æ¥ä¸‹æ¥ï¼Œè½¬åˆ° CNAME æ ‡ç­¾é¡µè¿›è¡Œé…ç½®æ—¥å¸¸ä½¿ç”¨çš„çœŸæ­£åå­—.\nç”±äºæ˜¯å®¶åº­ç½‘ç»œï¼Œå°±æ— éœ€åœ¨ CNAME çš„è®°å½•ä¸­ä½¿ç”¨åœ°ç†ä½ç½®ã€ç¯å¢ƒç­‰ä¿¡æ¯ï¼Œè€Œæ˜¯å°½é‡é€‰æ‹©ä¸ªäººæ˜“äºè®°å¿†çš„ï¼Œèƒ½æ˜¾è‘—ä»£è¡¨åŠŸèƒ½çš„åˆ«åã€‚ä¾‹å¦‚ unicorn å®é™…ä½¿ç”¨çš„åˆ«å netboxï¼Œå°±æ˜¯å› ä¸ºå®ƒçš„ä¸»è¦ç”¨é€”æ˜¯å®¶é‡Œçš„ä¸»åŠ›ç½‘ç»œå¤„ç†è®¾å¤‡ï¼Œè€Œ axis çš„åˆ™æ˜¯ homelabã€‚\né™¤äº†æœ¬åœ°çš„ .lan TLD ä¹‹å¤–ï¼Œå›¾ä¸Šä¹Ÿå¯çœ‹å‡ºï¼Œæˆ‘è¿˜ä½¿ç”¨äº†çœŸå®çš„ï¼Œç›®å‰ç”±æˆ‘æŒæœ‰çš„ .z10n0110.men è¿™ä¸ª TLDã€‚å› ä¸ºæœ‰ Let\u0026rsquo;s Encrypt ç­¾å‘æ¥çš„å…è´¹è¯ä¹¦ï¼Œæˆ‘é€‰æ‹©å°†è¿™ä¸ªåŸŸåç”¨åœ¨å„ä¸ªæœåŠ¡çš„ HTTPS ç«¯ç‚¹ä¸Šï¼Œæ¯”å¦‚ PVE çš„ WEB æ§åˆ¶å°ï¼š\né…ç½®å®Œæˆåï¼Œä½¿ç”¨ ping æµ‹è¯•ä¸€ä¸‹ï¼š\n$ ping -c 2 axis PING axis.lan (192.168.15.6): 56 data bytes 64 bytes from 192.168.15.6: icmp_seq=0 ttl=64 time=10.607 ms 64 bytes from 192.168.15.6: icmp_seq=1 ttl=64 time=12.834 ms --- axis.lan ping statistics --- 2 packets transmittedï¼Œ2 packets receivedï¼Œ0.0% packet loss round-trip min/avg/max/stddev = 10.607/11.720/12.834/1.113 ms $ ping -c 2 homelab PING axis.lan (192.168.15.6): 56 data bytes 64 bytes from 192.168.15.6: icmp_seq=0 ttl=64 time=5.552 ms 64 bytes from 192.168.15.6: icmp_seq=1 ttl=64 time=5.422 ms --- axis.lan ping statistics --- 2 packets transmittedï¼Œ2 packets receivedï¼Œ0.0% packet loss round-trip min/avg/max/stddev = 5.422/5.487/5.552/0.065 ms ä¸€åˆ‡å°±ç»ªåï¼Œåªéœ€è¦ä½¿ç”¨ä¾¿å®œçš„çƒ­æ•æ‰“å°æœºç»™æ¯ä¸ªæœºå™¨è´´ä¸Šæ ‡ç­¾ï¼Œæ ‡æ˜æœ€åŸºç¡€çš„/æœ€å…³å¿ƒçš„ä¿¡æ¯æ–¹ä¾¿ç®¡ç†å³å¯ã€‚\n","date":"2022-10-23","externalUrl":null,"permalink":"/posts/2022/10/naming-hosts-on-your-network/","section":"åšå®¢","summary":"åœ¨ å¦‚ä½•ä¸ºä½ çš„ç§æœ‰ç½‘ç»œé€‰æ‹© TLD(é¡¶çº§åŸŸå) ä¸­ï¼Œæè¿°äº† TLD çš„é€‰æ‹©ã€‚è¿™ç¯‡æ–‡ç« ç®—æ˜¯ç»­é›†ï¼Œè®²è®²æœåŠ¡å™¨çš„å‘½åã€‚","title":"å¦‚ä½•ç»™ä½ çš„æœåŠ¡å™¨å‘½å","type":"posts"},{"content":"å®¶ä¸­æœ‰ N ä¸ª HomeLab è®¾å¤‡ï¼Œä¸Šé¢å¸¸æ€åŒ–è¿è¡Œç€ä¸€äº› VM æä¾›æœåŠ¡/å®éªŒç”¨é€”ã€‚æ•°é‡ä¸€å¤šï¼Œæ€ä¹ˆè®¿é—®æœåŠ¡åœ°å€å˜æˆäº†ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸º IP åœ°å€å®åœ¨æ˜¯è®°ä¸ä½ã€‚æ˜¯æ—¶å€™ç»™å®¶ä¸­çš„ç½‘ç»œç»Ÿä¸€é…ç½®ä¸€ä¸ªç§æœ‰çš„ TLD (é¡¶çº§åŸŸå)äº†ã€‚\né€‰æ‹©ä»€ä¹ˆ TLD å‘¢ï¼ŸRFC æ˜¯å¦æœ‰å¯¹åº”è§„èŒƒï¼Ÿå¾ˆé—æ†¾ï¼Œæœç´¢åå‘ç°ï¼Œæˆªè‡³ç›®å‰è¿˜æ²¡æœ‰ RFC æ˜ç¡®è§„èŒƒäº†é¢„ç•™ç»™ç§æœ‰ç½‘ç»œä½¿ç”¨çš„ TLDsã€‚é‚£æ—¢ç„¶æ˜¯ç§æœ‰ç½‘ç»œï¼Œæ˜¯ä¸æ˜¯éšä¾¿ç”¨ä¸€ä¸ªæˆ‘æƒ³ç”¨çš„å°±è¡Œäº†å‘¢ï¼Ÿç»§ç»­åœ¨ç½‘ä¸Šæœç´¢åå‘ç°è¿™ä¸ª Top level domain/domain suffix for private network? ä¸­çš„å›ç­”å¾ˆæœ‰å‚è€ƒä»·å€¼ã€‚\né¦–å…ˆæ˜¯ Garret Wilson çš„ï¼š\nä¸å»ºè®®ä½¿ç”¨çœŸå®å­˜åœ¨çš„åŸŸåçš„å­åŸŸå\nRFC 6762 é™„å½• G ä¸­æŒ‡å‡ºä¸å°‘äººåœ¨ä½¿ç”¨ .internal\nSAC113 è°ƒæŸ¥æŠ¥å‘ŠæŒ‡å‡ºåº”è¯¥ä¸ºç§æœ‰ç½‘ç»œç”¨é€”åˆ¶å®šä¸€ä¸ª TLDï¼ŒåŒæ—¶ä¸æ¨èä½¿ç”¨ .internal\nè¿™ä¸ªå¥‡æ€ªçš„ zghjccbob3n0 åŸŸåæ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ\ngavenkoa åˆ™æåˆ°äº†è¶…å¤§è§„æ¨¡å…¬å¸çš„å†…éƒ¨åŸŸå TLD é€‰æ‹©ï¼š.internalã€‚æˆ‘æœç´¢äº†ä¸€ä¸‹ AWS å’Œ GCE ä¸Šä¸€äº›äº§å“æ–‡æ¡£ï¼Œå‘ç°ç¡®å®å¦‚æ­¤ã€‚\nAWS åœ¨å®ƒæä¾›çš„ EMR(Hadoop) äº§å“çš„æ–‡æ¡£é¡µ Set up a VPC to host clusters æ˜ç¡®æåˆ°äº†å¯ä»¥ä½¿ç”¨ ec2.internal æˆ–è€…å…¶ä»– .internal çš„åŸŸåæ¥åšèŠ‚ç‚¹çš„ FQDN è§£æã€‚\nè€Œ GCE æ›´æ˜¯åœ¨æ–‡æ¡£ Types of internal DNS names ä¸­å¼ºçƒˆå»ºè®®åœ¨ FQDN ä¸­åŠ ä¸Š zone çš„ä¿¡æ¯ã€‚\nè™½ç„¶ .local ä¹Ÿæ˜¯ä¸€ä¸ªä¿ç•™çš„ TLDï¼Œä½†æ˜¯è¿™ä¸ªåŸŸåç»å¸¸è¢«ç”¨æ¥åš mDNS çš„å¤šæ’­ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚\nç»¼åˆä»¥ä¸Šè¿™äº›ä¿¡æ¯æ¥çœ‹ï¼Œå…¶å®ä» ICANN ä¿ç•™æˆ–è€…ä¸ä¼šæ¥å—ç”³è¯·çš„ TLD ä¸­é€‰ä¸€ä¸ªå°±è¡Œã€‚æ¨èä½¿ç”¨ RFC 6762 é™„å½• G ä¸­æåˆ°çš„ï¼š\nintranet internal private corp home lan ç”±äº OpenWrt é»˜è®¤çš„æœ¬åœ° TLD æ˜¯ .lanï¼Œæœ€åæˆ‘ä¹Ÿæ˜¯å·æ‡’å°±é€‰æ‹©ä½¿ç”¨äº† .lanã€‚\n","date":"2022-10-22","externalUrl":null,"permalink":"/posts/2022/10/choose-tld-for-your-private-network/","section":"åšå®¢","summary":"å®¶ä¸­æœ‰ N ä¸ª HomeLab è®¾å¤‡ï¼Œä¸Šé¢å¸¸æ€åŒ–è¿è¡Œç€ä¸€äº› VM æä¾›æœåŠ¡/å®éªŒç”¨é€”ã€‚æ•°é‡ä¸€å¤šï¼Œæ€ä¹ˆè®¿é—®æœåŠ¡åœ°å€å˜æˆäº†ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸º IP åœ°å€å®åœ¨æ˜¯è®°ä¸ä½ã€‚æ˜¯æ—¶å€™ç»™å®¶ä¸­çš„ç½‘ç»œç»Ÿä¸€é…ç½®ä¸€ä¸ªç§æœ‰çš„ TLD (é¡¶çº§åŸŸå)äº†ã€‚","title":"å¦‚ä½•ä¸ºä½ çš„ç§æœ‰ç½‘ç»œé€‰æ‹© TLDï¼ˆé¡¶çº§åŸŸåï¼‰","type":"posts"},{"content":"","date":"2022-10-18","externalUrl":null,"permalink":"/tags/vnstat/","section":"Tags","summary":"","title":"Vnstat","type":"tags"},{"content":"æœ‰æœ‹å‹é—®æˆ‘æ˜¯å¦èƒ½åƒ OpenWrt ä¸Šçš„ vnstat é‚£æ ·ï¼Œé€šè¿‡ç½‘é¡µçœ‹ VPS èŠ‚ç‚¹ä¸Š vnstat ç”Ÿæˆçš„ç»Ÿè®¡å›¾ã€‚æˆ‘ä¸ªäººçš„æ–¹æ¡ˆæ˜¯é€šè¿‡æ¯”è¾ƒç®€é™‹çš„è„šæœ¬å®ç°çš„ï¼ˆèƒ½ç”¨å°±è¡Œï¼‰ï¼Œå·²ç»åœ¨ VPS ä¸Šè¿è¡Œäº†å¾ˆä¹…äº†ï¼Œè¿™é‡Œç®€å•åˆ†äº«ä¸€ä¸‹å…·ä½“è¿‡ç¨‹ã€‚\nå…¶å®å°±æ˜¯ä½¿ç”¨è„šæœ¬è°ƒç”¨ vnstati ç”Ÿæˆå¯¹åº”çš„å›¾ç‰‡æ–‡ä»¶ï¼Œå†æ¸²æŸ“å‡ºä¸€ä¸ªç®€å•çš„ index.html æ–‡ä»¶ï¼Œæœ€åé€šè¿‡ nginx æä¾› Web æœåŠ¡ã€‚\nç®€å•çš„è„šæœ¬ /opt/gen_vnstat_imgs.shï¼š\n#!/bin/sh VNSTAT_WWW=/data/vnstat_images VNSTAT_DB=/var/lib/vnstat BIN=/usr/bin/vnstati IMGS=\u0026#34;s h d t m\u0026#34; mkdir -p $VNSTAT_WWW interfaces=\u0026#34;$(ls -1 $VNSTAT_DB)\u0026#34; if [ -z \u0026#34;$interfaces\u0026#34; ]; then echo \u0026#34;No database found. Create new by command: vnstat -u -i eth0\u0026#34; exit 0 fi for interface in $interfaces; do if [ \u0026#34;$interface\u0026#34; = \u0026#34;vnstat.db\u0026#34; ]; then continue fi for imgs in $IMGS; do $BIN -${imgs} -i $interface -o $VNSTAT_WWW/vnstat_${interface}_${imgs}.png done done if [ ! -f $VNSTAT_WWW/index.html ]; then cat \u0026gt; $VNSTAT_WWW/index.html \u0026lt;\u0026lt; EOL \u0026lt;META HTTP-EQUIV=\u0026#34;refresh\u0026#34; CONTENT=\u0026#34;300\u0026#34;\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;Traffic of Interface(s)\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; EOL for interface in $interfaces; do cat \u0026gt;\u0026gt; $VNSTAT_WWW/index.html \u0026lt;\u0026lt; EOL \u0026lt;h2\u0026gt;Traffic of Interface ${interface}\u0026lt;/h2\u0026gt; \u0026lt;table\u0026gt; \u0026lt;tbody\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td\u0026gt; \u0026lt;img src=\u0026#34;vnstat_${interface}_s.png\u0026#34; alt=\u0026#34;${interface} Summary\u0026#34; /\u0026gt; \u0026lt;/td\u0026gt; \u0026lt;td\u0026gt; \u0026lt;img src=\u0026#34;vnstat_${interface}_h.png\u0026#34; alt=\u0026#34;${interface} Hourly\u0026#34; /\u0026gt; \u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;td valign=\u0026#34;top\u0026#34;\u0026gt; \u0026lt;img src=\u0026#34;vnstat_${interface}_d.png\u0026#34; alt=\u0026#34;${interface} Daily\u0026#34; /\u0026gt; \u0026lt;/td\u0026gt; \u0026lt;td valign=\u0026#34;top\u0026#34;\u0026gt; \u0026lt;img src=\u0026#34;vnstat_${interface}_t.png\u0026#34; alt=\u0026#34;${interface} Top 10\u0026#34; /\u0026gt; \u0026lt;img src=\u0026#34;vnstat_${interface}_m.png\u0026#34; alt=\u0026#34;${interface} Monthly\u0026#34; style=\u0026#34;margin-top:5px;\u0026#34;/\u0026gt; \u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/tbody\u0026gt; \u0026lt;/table\u0026gt; EOL done cat \u0026gt;\u0026gt; $VNSTAT_WWW/index.html \u0026lt;\u0026lt; EOL \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; EOL fi ä¸ªäºº VPS ä¸Šç›®å‰è¿è¡Œçš„æ˜¯ Debian 11ï¼Œéƒ¨ç½²åœ¨ä¸åŒå‘è¡Œç‰ˆçš„è¯ï¼Œè„šæœ¬ä¸­ä¸€äº›å˜é‡è¯»è€…å¯ä»¥è‡ªè¡Œä¿®æ”¹ä»¥åŒ¹é…è‡ªå·±çš„å®é™…æƒ…å†µã€‚\né…ç½®ä¸€ä¸‹å®šæ—¶ä»»åŠ¡ï¼Œå®šæ—¶ç”Ÿæˆæ–°çš„ç»Ÿè®¡å›¾ï¼Œæˆ‘è¿™é‡Œæ˜¯ 30 åˆ†é’Ÿä¸€æ¬¡ï¼š\n*/30 * * * * /opt/gen_vnstat_imgs.sh nginx çš„é…ç½®éå¸¸ç®€å•ï¼š\nserver { listen *:443 ssl http2; server_name abc.com; location ^~ /bw { alias /data/vnstat_images/; index index.html; } } æœ€åé™„ä¸€å¼ æ•ˆæœå›¾ï¼Œå¿½ç•¥è¿™ä¸‘é™‹çš„æ’ç‰ˆï¼Œèƒ½ç”¨å°±è¡Œ :)\n","date":"2022-10-18","externalUrl":null,"permalink":"/posts/2022/10/show-vnstat-imgs-via-web/","section":"åšå®¢","summary":"æœ‰æœ‹å‹é—®æˆ‘æ˜¯å¦èƒ½åƒ OpenWrt ä¸Šçš„ vnstat é‚£æ ·ï¼Œé€šè¿‡ç½‘é¡µçœ‹ VPS èŠ‚ç‚¹ä¸Š vnstat ç”Ÿæˆçš„ç»Ÿè®¡å›¾ã€‚æˆ‘ä¸ªäººçš„æ–¹æ¡ˆæ˜¯é€šè¿‡æ¯”è¾ƒç®€é™‹çš„è„šæœ¬å®ç°çš„ï¼ˆèƒ½ç”¨å°±è¡Œï¼‰ï¼Œå·²ç»åœ¨ VPS ä¸Šè¿è¡Œäº†å¾ˆä¹…äº†ï¼Œè¿™é‡Œç®€å•åˆ†äº«ä¸€ä¸‹å…·ä½“è¿‡ç¨‹ã€‚","title":"é€šè¿‡ Web è®¿é—® vnstat çš„ç»Ÿè®¡å›¾","type":"posts"},{"content":"","date":"2022-05-21","externalUrl":null,"permalink":"/tags/supermicro/","section":"Tags","summary":"","title":"Supermicro","type":"tags"},{"content":"åœ¨æŸæµ·é²œäºŒæ‰‹å¸‚åœºä¹°äº†ä¸€å—è¶…å¾®çš„ X10DRL-iï¼Œç”¨æ¥åšå®¶é‡Œçš„ HomeLabã€‚\nåœ¨è¶…å¾®çš„ X99 ç³»åˆ—ä¸­é€‰æ‹©å®ƒä¸»è¦æ˜¯å› ä¸ºç´§å‡‘çš„å¸ƒå±€ (ATX) å’Œè¾ƒå¤šçš„ PICe æ’æ§½ã€‚\nè¿™ç¯‡æ–‡ç« å°†ç•¥å»å…·ä½“çš„ HomeLab æœºå™¨æ„å»ºè¿‡ç¨‹ï¼Œä¸»è¦è®°å½•ä¸€ä¸‹é…ç½®è¿™å—ä¸»æ¿çš„ä¸€äº›æ“ä½œã€‚\nå‡çº§ BIOS / BMC å›ºä»¶ # æˆ‘æ‰‹ä¸Šè¿™å—ä¸»æ¿çš„å›ºä»¶ç›¸å½“è€æ—§ï¼ŒBIOS ç‰ˆæœ¬æ˜¯ 2.0bï¼ŒBMC ç‰ˆæœ¬æ˜¯ 3.58ã€‚çŒœæƒ³æ˜¯è¿™å—ä»æœºæˆ¿æ·˜æ±°å‡ºæ¥çš„ä¸»æ¿ï¼Œåœ¨å‡ºå‚åˆ°é€€å½¹çš„è¿™æ®µæ—¶é—´å†…ä»æœªè¿›è¡Œè¿‡å›ºä»¶æ›´æ–°ã€‚\nåœ¨å¯¹è¶…å¾®å®˜ç½‘åº”äº§å“å›ºä»¶é¡µä¸‹è½½ BIOS / BMC å›ºä»¶æ–‡ä»¶è¿›è¡Œå›ºä»¶æ›´æ–°ä¹‹å‰ï¼Œéœ€è¦å…ˆæŸ¥çœ‹å¯¹åº”çš„ Release Notesï¼Œä»¥ç¡®å®šæ¸…æ¥šéœ€è¦è¿›è¡Œçš„æ“ä½œæ­¥éª¤ã€‚\næœ€æ–°çš„ BIOS 3.4 ä¸­æ²¡æœ‰çœ‹è§ç‰¹æ®Šçš„æ³¨æ„äº‹é¡¹ï¼Œå¯ä»¥ç›´æ¥æ›´æ–°ã€‚è€Œ BMC 3.91 çš„è¯´æ˜å†…æè¿°äº†é‡è¦äº‹é¡¹ï¼š\nå³ï¼Œä¸ºäº†ä¸ä¸¢å¤± FRU å’Œé…ç½®ä¿¡æ¯ï¼Œä½äº 3.73 çš„å›ºä»¶éœ€è¦å…ˆå‡çº§åˆ° 3.80 å†å‡çº§åˆ° 3.85+ã€‚\n3.80 å›ºä»¶ä»å“ªé‡Œè·å–å‘¢ï¼Ÿ æŒ‰è¯´æ˜ä¸­çš„æè¿°ï¼Œéœ€è¦è”ç³»è¶…å¾®çš„å®˜æ–¹æ”¯æŒæ¥è·å–ï¼Œè¿™ä¹Ÿç¬¦åˆè¶…å¾®å®˜ç½‘å¹¶ä¸æä¾›å†å²å›ºä»¶ä¸‹è½½çš„å®é™…æƒ…å†µã€‚ä¸è¿‡è¿™ä¸è¦ç´§ï¼Œå› ä¸º drunkencat.net ä¸Šä¸“é—¨æä¾›äº†ç›¸å½“å¤šçš„è¶…å¾®å†å²å›ºä»¶ä¸‹è½½ã€‚\nå›¾ä¸Šå¯è§ï¼Œè¾“å…¥ X10DRL-i è¿›è¡ŒæŸ¥è¯¢ï¼Œå¯ä»¥æ‰¾åˆ° 3.80 çš„ BMC å›ºä»¶å’Œå‘è¡Œè¯´æ˜ã€‚æŸ¥çœ‹å‘è¡Œè¯´æ˜å¹¶æœªå‘ç°å¦‚ 3.91 é‚£æ ·çš„ç‰¹æ®Šè¦æ±‚ï¼Œäºæ˜¯ç¡®å®šäº† BMC çš„æ›´æ–°æµç¨‹ï¼šç›´æ¥æ›´æ–°åˆ° 3.80ï¼Œç„¶åå†æ›´æ–°åˆ° 3.91ã€‚\næ›´æ–°å›ºä»¶çš„è¿‡ç¨‹è¾ƒç®€å•ï¼Œåªéœ€è¦ä¸‹è½½å›ºä»¶å‹ç¼©åŒ…ï¼Œè§£å‹åé˜…è¯»å…¶ä¸­çš„è¯´æ˜æ–‡ä»¶äº†è§£æ¸…æ¥šå¯ç”¨çš„å¹³å°å’Œå¯¹åº”å·¥å…·å¦‚ä½•æ“ä½œåï¼Œé€‰æ‹©ä½ å–œå¥½çš„å·¥å…·æ‰§è¡Œå³å¯ã€‚æˆ‘ä¸ªäººé€‰æ‹©çš„æ˜¯åœ¨ FreeDOS ç¯å¢ƒä¸‹ä½¿ç”¨ DOS å·¥å…·æ¥æ›´æ–° BIOS / BMC å›ºä»¶ã€‚å½“ç„¶è¿˜æœ‰æ›´ä¾¿æ·çš„æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨ BMC ä¸Šçš„å›ºä»¶æ›´æ–°åŠŸèƒ½ï¼Œä½†è¿™éƒ¨åˆ†åŠŸèƒ½éœ€è¦å…ˆä½¿ç”¨è®¸å¯è¯æ¿€æ´»åæ‰èƒ½ä½¿ç”¨ã€‚\nä½¿ç”¨ OOB License æ¿€æ´» BMC åŠŸèƒ½ # åœ¨ BIOS ä¸­é…ç½®å¥½ BMC çš„ IP åœ°å€åï¼Œå¯ä»¥ç™»å½• BMC çš„ç½‘é¡µè¿›è¡ŒåŸºç¡€ä½“éªŒã€‚\nè®°å¾—ä½¿ç”¨ HTTPS åè®®ï¼Œè¿™å—ä¸»æ¿é»˜è®¤çš„ BMC ç™»å½•ç”¨æˆ·åå¯†ç æ˜¯ ADMIN / ADMINã€‚\nä¸ºä»€ä¹ˆè¯´æ˜¯åŸºç¡€ä½“éªŒï¼Ÿ å› ä¸º BMC ä¸­é‚£äº›å¼ºå¤§çš„åŠŸèƒ½éœ€è¦è®¸å¯¹åº”çš„è®¸å¯è¯æ‰èƒ½æ¿€æ´»ï¼Œæ¯”å¦‚ï¼š\né€šè¿‡ IPMI æˆ–è€…ç½‘é¡µè¿›è¡Œ BIOS / BMC å›ºä»¶çš„æ›´æ–° æ¨¡æ‹ŸæŒ‚è½½ ISO é•œåƒ RAID çš„é…ç½®åŠç›‘æ§ å¼ºå¤§çš„ RESTful API æ”¯æŒ å…·ä½“ä¸åŒè®¸å¯è¯ä¹‹é—´çš„åŠŸèƒ½å·®å¼‚å‚è€ƒ System Management Softwareï¼š\nä¸Šè¿°æåŠçš„å›ºä»¶æ›´æ–°åŠŸèƒ½ï¼Œå°±å±äº OOB è®¸å¯è¯çš„èƒ½åŠ›èŒƒå›´ï¼Œå¯¹åº”çš„å”®ä»·æ˜¯ $27ã€‚åŠŸèƒ½æ›´å¤šçš„ DCMS çš„åˆ™è¦è´µå¾—å¤šï¼Œå”®ä»· $180ã€‚\nè¶…å¾®è¿™ç§è¿æœ€åŸºç¡€çš„é€šè¿‡ç½‘é¡µæ›´æ–°å›ºä»¶çš„èƒ½åŠ›éƒ½éœ€è¦ä»˜è´¹è´­ä¹°è®¸å¯è¯æ¥æ¿€æ´»å¤šå°‘æ˜¯æœ‰ç‚¹åƒç›¸éš¾çœ‹ã€‚å¥½åœ¨ä¸–ç•Œä¸Šå­˜åœ¨ä¸æˆ‘æŒç›¸åŒæ„è§çš„èƒ½äººï¼Œå› ä¸º OOB è®¸å¯è¯çš„å…·ä½“ç®—æ³•å¯ä»¥åœ¨äº’è”ç½‘ä¸Šè½»æ¾æœç´¢åˆ°ï¼š\nSupermicro IPMI License Key (for updating BIOS) = HMAC-SHA1-96(INPUT: MAC address of BMCï¼ŒSECRET KEY: 85 44 E3 B4 7E CA 58 F9 58 30 43 F8)\nå°±æ˜¯ä½¿ç”¨ BMC ç½‘å£çš„ MAC åœ°å€è®¡ç®— HMACã€‚åœ¨ Linux / Unix ç¯å¢ƒä¸‹å¯ä»¥é€šè¿‡ openssl æ¥ç”Ÿæˆè®¸å¯è¯ï¼š\necho -n \u0026#39;{YOUR_BMC_MAC_ADDR}\u0026#39; | xxd -r -p | openssl dgst -sha1 -mac HMAC -macopt hexkey:8544E3B47ECA58F9583043F8 | awk \u0026#39;{print $2}\u0026#39; | cut -c 1-24 æ²¡æœ‰å¯¹åº”ç¯å¢ƒçš„å¯ä»¥ä½¿ç”¨ getmyoob ç½‘é¡µæ¥ç”Ÿæˆã€‚\nåœ¨ Miscellaneous -\u0026gt; Activate License çš„é¡µé¢ä¸­å°†è®¸å¯è¯å¡«å…¥å³å¯å®Œæˆæ¿€æ´»ã€‚\néœ€è¦é‡ç½®è®¸å¯è¯çš„è¯å¯ä»¥é€šè¿‡ä¿®æ”¹ BMC çš„ MAC åœ°å€æ¥å®Œæˆã€‚ä¿¡æ¯æ¥è‡ªå®˜æ–¹çš„ IPMI_Users_Guide.pdfï¼š\nNote 2: If BMC MAC address is changedï¼Œprior license keys will be lost.\nä½†æ˜¯å¥‡æ€ªçš„æ˜¯ï¼Œæˆ‘è¿™å—åœ¨ BIOS ä¸­çš„ IPMI -\u0026gt; BMC Network Configuration ä¸­ Station MAC Address æ˜¯ç°è‰²çš„ï¼Œæ— æ³•ä¿®æ”¹ã€‚\næˆ‘çŒœæˆ–è®¸å¯ä»¥é€šè¿‡ ipmitool æ¥å®Œæˆ (æœªæµ‹è¯•)ï¼š\n# example to configure bmc lan 1 mac addr ipmitool lan set 1 macaddr 00:11:22:33:44:55 BMC Redfishï¼ŒRESTful API # å¯¹äº X10 ç³»åˆ—ä¸»æ¿ï¼Œè¶…å¾®çš„ BMC å›ºä»¶æä¾›äº† Redfish æ”¯æŒï¼Œä»ä¸‹è½½çš„ BMC å›ºä»¶æ–‡ä»¶å REDFISH_X10_391_20200806_unsigned.zip ä¸­å°±å¯ä»¥çœ‹è§å¤§å†™çš„ Redfish è¿™ä¸ªå•è¯ã€‚å½“ç„¶ï¼Œè¶…å¾®å¯¹ä½¿ç”¨ Redfish çš„æœ€åŸºæœ¬çš„è¦æ±‚æ˜¯æ¿€æ´»äº† OOB è®¸å¯è¯ã€‚\næœåŠ¡å™¨ä¸»æ¿ä¸Š BMC æœ€ä¸»è¦çš„èƒ½åŠ›å°±æ˜¯ä»¥ IPMI åè®®å®ç°æä¾›æ“ä½œç¡¬ä»¶çš„æ¥å£ï¼Œä½†æ˜¯è‡ª IPMI æ ‡å‡†åœ¨ 1994 å¹´å‘å¸ƒä»¥æ¥ï¼Œé€æ¸æš´éœ²å‡ºä»¥ä¸‹é—®é¢˜ï¼š\nå¯æ‰©å±•æ€§ä¸å¼º å¯¹ç”¨æˆ·ä¸å‹å¥½ åè®®åŠå®ç°ä¸­çš„å®‰å…¨æ¼æ´å±¡è§ä¸é²œ ä¾›åº”å•†èƒ½åŠ›æ— æ³•å¯¹é½ã€ç¢ç‰‡åŒ–ã€å­˜åœ¨å„ç§ä¸å…¼å®¹çš„ APIã€æ ‡å‡†ã€åè®®å’Œæ¥å£ ç”± DTMF å¼€å‘çš„ Redfish ä½œä¸ºå–ä»£ IPMI çš„ä¸‹ä¸€ä»£åè®®ï¼Œä¸»è¦å°±æ˜¯è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæä¾›æ›´ç°ä»£åŒ–çš„æ ‡å‡† API \u0026ndash; ä½¿ç”¨ JSON æ•°æ®è¿›è¡Œäº¤äº’çš„ çš„ RESTful APIã€‚\nå¤§æ¦‚çš„æ¶æ„å¯ä»¥å‚è€ƒè¿™å¼ ç½‘å›¾ï¼š\nåœ¨è¿™å—ä¸»æ¿ä¸Šï¼Œæ¿€æ´» OOB è®¸å¯è¯åï¼Œå°±å¯ä»¥åƒè¿™æ ·è°ƒç”¨è´¦æˆ·ç®¡ç†çš„ API è·å–è´¦æˆ·ä¿¡æ¯ï¼š\n$ curl -sku \u0026#39;ADMIN:ADMIN\u0026#39; https://192.168.15.7/redfish/v1/AccountService/Accounts/2 | jq { \u0026#34;@odata.context\u0026#34;: \u0026#34;/redfish/v1/$metadata#ManagerAccount.ManagerAccount\u0026#34;, \u0026#34;@odata.type\u0026#34;: \u0026#34;#ManagerAccount.v1_0_0.ManagerAccount\u0026#34;, \u0026#34;@odata.id\u0026#34;: \u0026#34;/redfish/v1/AccountService/Accounts/2\u0026#34;, \u0026#34;Id\u0026#34;: \u0026#34;2\u0026#34;, \u0026#34;Name\u0026#34;: \u0026#34;User Account\u0026#34;, \u0026#34;Description\u0026#34;: \u0026#34;User Account\u0026#34;, \u0026#34;Password\u0026#34;: \u0026#34;null\u0026#34;, \u0026#34;UserName\u0026#34;: \u0026#34;ADMIN\u0026#34;, \u0026#34;Locked\u0026#34;: false, \u0026#34;RoleId\u0026#34;: \u0026#34;Administrator\u0026#34;, \u0026#34;Enabled\u0026#34;: true, \u0026#34;Links\u0026#34;: { \u0026#34;Role\u0026#34;: { \u0026#34;@odata.id\u0026#34;: \u0026#34;/redfish/v1/AccountService/Roles/Administrator\u0026#34; } } } å…·ä½“çš„æ¥å£åŠæ“ä½œæŒ‡å—å¯ä»¥æŸ¥çœ‹ BMC å›ºä»¶ zip æ–‡ä»¶è§£å‹å‡ºçš„ Redfish_Ref_Guide_xxx.pdfã€‚\né™¤äº†ç›´æ¥ä½¿ç”¨ cURL æ­¤ç±» HTTP å®¢æˆ·ç«¯ç¨‹åºï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹© DMTF å®˜æ–¹å‡ºå“çš„ Python Cli ç¨‹åº Redfishtoolã€‚\nå¾ˆå¯æƒœçš„æ˜¯ UpdateService ç›¸å…³ API éœ€è¦ DCMS çš„è®¸å¯è¯æ‰èƒ½å·¥ä½œã€‚\n$ curl -k -u \u0026#39;ADMIN:ADMIN\u0026#39; https://192.168.15.7/redfish/v1/UpdateService/IPMIConfig | jq { \u0026#34;error\u0026#34;: { \u0026#34;code\u0026#34;: \u0026#34;Base.v1_4_0.GeneralError\u0026#34;, \u0026#34;Message\u0026#34;: \u0026#34;A general error has occurred. See ExtendedInfo for more information.\u0026#34;, \u0026#34;@Message.ExtendedInfo\u0026#34;: [ { \u0026#34;MessageId\u0026#34;: \u0026#34;Base.v1_4_0.OemLicenseNotPassed\u0026#34;, \u0026#34;Severity\u0026#34;: \u0026#34;Warning\u0026#34;, \u0026#34;Resolution\u0026#34;: \u0026#34;Please activate at least one license in above message.\u0026#34;, \u0026#34;Message\u0026#34;: \u0026#34;Not licensed to perform this request. The following licenses DCMS were needed\u0026#34;, \u0026#34;MessageArgs\u0026#34;: [ \u0026#34;DCMS \u0026#34; ], \u0026#34;RelatedProperties\u0026#34;: [ \u0026#34;\u0026#34; ] } ] } } è¿™ä¸æŸ¥è¯¢åˆ°çš„è¶…å¾® FAQ å›ç­”ä¸€è‡´ã€‚\nQ: What license is required to upload SSL using Redfish APIï¼Ÿ\nA: X10/X11 UP will be require DCMS and X11DP board will require OOB license.\nåº”è¯¥è¯´ç›¸å½“å¤šçš„ API éƒ½éœ€è¦ä½¿ç”¨ DCMS è®¸å¯è¯æ‰èƒ½å·¥ä½œï¼Œå€’ä¹Ÿå¹¶ä¸æ„å¤–ã€‚\nå¦‚æœè®¸å¯è¯ä¸æ˜¯é—®é¢˜ï¼ŒBMC ä¸­ HTTPS è¯ä¹¦çš„è‡ªåŠ¨åŒ–æ›´æ–°å°±å¯ä»¥é€šè¿‡ç¼–å†™è„šæœ¬è°ƒç”¨ /redfish/v1/UpdateService/SSLCert æ¥å®Œæˆï¼Œå¯ä»¥å®Œç¾çš„åšåœ¨ Let\u0026rsquo;s Encrypt è¯ä¹¦çš„è‡ªåŠ¨åŒ–ç”³è¯·/æ›´æ–°çš„æµç¨‹ä¸‹æ¸¸ã€‚\nBMC SMASH Shell # SMASHï¼Œä¸€ä¸ªåŒæ ·æ˜¯ç”± DTMF å¼€å‘çš„æ ‡å‡†ï¼Œè¿™ä¸ªä¸œè¥¿ä»æ‰‹å†Œä¸Šçœ‹è·Ÿ Redfish å¾ˆåƒï¼Œéƒ½æ˜¯ç»“æ„åŒ–ã€æ ‘å½¢çš„èµ„æºåˆ†ç±»ä¸ç®¡ç†ï¼Œçœ‹èµ·æ¥åŒºåˆ«åªæ˜¯æä¾›äº†ä¸€ä¸ª SSH åè®®çš„ adapter æ–¹ä¾¿ä½¿ç”¨è„šæœ¬æ¥å®ç°ç®€å•çš„ç›‘æ§/ç®¡ç†åŠŸèƒ½ã€‚\nä½¿ç”¨å®ƒåªéœ€è¦é€šè¿‡ SSH åè®®ç™»å½•å³å¯ï¼Œç™»å½•ä½¿ç”¨çš„è´¦å·å¯†ç å°±æ˜¯ BMC ä¸­é…ç½®çš„è´¦å·å¯†ç ã€‚ç™»é™†æˆåŠŸåè¿›å…¥çš„æ˜¯ä¸€ä¸ªç®€å•çš„ Shellï¼š\nå¯ä»¥ä½¿ç”¨ show {TARGET} æ¥æŸ¥çœ‹å…·ä½“å¯¹è±¡çš„ä¿¡æ¯ï¼Œå¦‚ show system1/sensors1/sensor001ï¼š\nå…·ä½“çš„è¯´æ˜ã€èƒ½åŠ›å’Œç”¨æ³•å‚è€ƒ IPMI_Users_Guide.pdf ä¸­çš„ Appendix B: Using SMASH éƒ¨åˆ†ã€‚\nBMC çš„ SSH ç«¯å£å¯ä»¥åœ¨ BMC ç½‘é¡µçš„ Configuration -\u0026gt; Port ä¸­ä¿®æ”¹ã€‚\nPCIe æ‹†åˆ† # æ§åˆ¶ PCIe æ‹†åˆ†çš„è®¾ç½®åœ¨ BIOS ä¸­ã€‚ä¸å¸¸ç”¨äºå®¶ç”¨çš„æ¶ˆè´¹çº§ä¸»æ¿ä¸åŒï¼Œè¶…å¾®çš„è¿™ä¸ªé…ç½®å…¥å£ç¨å¾®æœ‰äº›éš¾æ‰¾ï¼ˆç¼ºä¹ç»éªŒï¼‰ï¼Œè¿™å—ä¸»æ¿çš„æ‰‹å†Œé¡µé¢ä¹Ÿå¹¶æ²¡æœ‰è¯¦ç»†è¯´æ˜ã€‚è¿˜æ˜¯é€šè¿‡ FAQï¼Œå¾—çŸ¥å…·ä½“çš„é…ç½®è·¯å¾„æ˜¯ï¼š\nAdvanced \u0026raquo; Chipset Configuration \u0026raquo; North Bridge \u0026raquo; IIO Configuration \u0026raquo; IIO1 / IIO2 configuration\nåŒæ—¶æ ¹æ® FAQ ä¸­çš„å›ç­”ç†è§£ï¼Œå¯ä»¥æ‹†åˆ†çš„ PCIe æ’æ§½ï¼Œä¸Šé¢å°±ä¼šæœ‰ä¸€ä¸ª IOUNï¼ˆN æ˜¯æ•°å­—ï¼‰çš„é€‰é¡¹ã€‚\næˆ‘åªå®‰è£…äº†ä¸€ä¸ª CPUï¼ŒBIOS ä¸­åªæœ‰ IIO1 Configurationã€‚\nè¿™æ˜¯æˆ‘é€‰æ‹©å¯¹ CPU1 SLOT2 è¿›è¡Œäº† x4x4 æ‹†åˆ†åçš„å®é™… BIOS ç•Œé¢æˆªå›¾(é€šè¿‡ BMC iKVM åŠŸèƒ½è¿œç¨‹æ“ä½œ)ï¼š\nBIOS ä¸­æ‰€å±•ç¤ºçš„ CPU1 SLOT1 ...ã€CPU1 SLOT2 ... ç­‰ä¸å®é™…ç‰©ç†æ’æ§½çš„å¯¹åº”å…³ç³»éƒ½åœ¨æ‰‹å†Œ X10DRL-i USERâ€™S MANUAL ä¸­ã€‚\nç»“åˆä¸Šè¿°ä¿¡æ¯å¹¶å®é™…æ“ä½œ BIOS åï¼Œç¡®å®šè¿™å—ä¸»æ¿æ”¯æŒæ‹†åˆ†çš„æ’æ§½åŠèƒ½åŠ›æ˜¯ï¼š\nPCIe Slot Form Factor Lanes Actually Connected Lanes Bifurcation Support CPU1 SLOT2 8 8 x4x4 CPU1 SLOT3 8 8 x4x4 CPU1 SLOT5 16 16 x4x4x4x4 / x8x8 / x8x4x4 å¦‚æœä½ è¶³å¤Ÿ ä¸§ å¿ƒ ç—… ç‹‚ çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤å— X8-\u0026gt; X4X4 çš„ M.2 æ‹†åˆ†é€‚é…å¡ï¼ŒåŠ ä¸Šä¸€å— X16 -\u0026gt; X4X4X4X4 çš„ M.2 æ‹†åˆ†é€‚é…å¡ï¼Œå…‰è¿™ä¸‰ä¸ªæ’æ§½å°±èƒ½æ’ä¸Š 8 å— NVMe SSDã€‚\nè¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®æ–½ä»»æ„æ’æ§½çš„æ‹†åˆ†éƒ½ä¼šå½±å“åŸ PCIe æ€»çº¿åœ°å€å·çš„åˆ†é…ã€‚æˆ‘è¿™å¼  LSI çš„ HBA å¡åŸå…ˆåœ°å€å·æ˜¯ 02:00ï¼š\nå¦ä¸€ä¸ªæ’æ§½æ‹†åˆ†å¹¶å®‰è£…ä¸Šå‚²è…¾åï¼ŒLSI HBA å¡çš„åœ°å€å·å˜æˆäº† 03:00ï¼ŒåŸå…ˆçš„ 02:00 è¢«åˆ†é…ç»™äº†å‚²è…¾ã€‚\nä¸Šè¿°æˆªå›¾æ¥è‡ª PVE ç½‘é¡µæ§åˆ¶å°ã€‚\næ§åˆ¶é£æ‰‡è½¬é€Ÿ # è¿™å—ä¸»æ¿çš„ BIOS ç•Œé¢æ²¡æœ‰åœ°æ–¹å¯ä»¥è°ƒæ•´é£æ‰‡çš„è®¾ç½®ï¼Œå› ä¸ºé£æ‰‡å…¨éƒ½ç”± BMC è¿›è¡Œæ§åˆ¶ã€‚\nè¿›å…¥ BMC ç½‘é¡µçš„ Configuration -\u0026gt; Fan mode é¡µé¢ä¸­å¯ä»¥çœ‹è§ 4 ä¸ªé€‰é¡¹ï¼š\næˆ‘è¿™å—ä¸»æ¿é»˜è®¤ä¹‹å‰å°±é…ç½®çš„æ˜¯ä¸Šå›¾æ‰€ç¤ºçš„å…¨é€Ÿæ¨¡å¼ï¼Œè€Œå…¶ä»–çš„ 3 ä¸ªæ¨¡å¼æ‰¾ä¸åˆ°ä»»ä½•å…·ä½“çš„æ–‡æ¡£å®šä¹‰åŠè¯´æ˜ï¼Œåªæœ‰ä¸€ä¸ª FAQ å›ç­”äº†ä¼¼æ˜¯è€Œéçš„ç­”æ¡ˆï¼š\nQ: For X10SRL-F, we found there are Heavy IO speed option in IPMI, what is this fan mode definition ? We couldn\u0026rsquo;t find any document states for it.\nA: X10SRL-F supports the following fan modes:\nStandard â€“ Provide standard fan speed\nFull Speed â€“ Maximum cooling\nOptimal â€“ Balanced fan speed and power consumption\nHeavy I/O â€“ Boost cooling to the add-on card zone\næˆ‘åªåœ¨ä¸»æ¿ä¸Šè¿æ¥äº† 2 ä¸ªé£æ‰‡ï¼š\nConnecter Name Type Usage Max RPM In Specification Max RPM Reported By BMC FAN2 Thermalright(åˆ©æ°‘) TL-D12B CPU æ•£çƒ­ 1500Â±10% 1600 FAN6 Prolimatech(é‡‡è) PT12025(DB) æœºç®±åç½®å‡ºé£ 1500Â±10% 1400 å®é™…å¯¹è¿™ 3 ä¸ªæ¨¡å¼æµ‹è¯•è§‚å¯Ÿåˆ°çš„ç»“æœæ˜¯ï¼š\nFan Mode Behavior Standard æ‰€æœ‰é£æ‰‡ä½é€Ÿè¿è¡Œå‡ ç§’åçªç„¶æ»¡é€Ÿè¿è¡Œä¸€ä¸¤ç§’ï¼Œç„¶åè½¬é€Ÿåˆé€æ¸é™ä½ï¼Œå‘¨è€Œå¤å§‹ã€‚ Optimal åŒä¸Š HeavyIO åŒä¸Š æœç´¢å¹¶é˜…è¯» TrueNAS è®ºå›ä¸Šçš„è¿™ç¯‡ How To: Change IPMI Sensor Thresholds using ipmitool å¸–å­åæ‰ç†è§£äº†è¿™ä¸ªç°è±¡ã€‚\nåŸå› å°±æ˜¯ BMC ä¸­é…ç½®çš„ä¼ æ„Ÿå™¨é˜ˆå€¼ \u0026ndash; æ‰€æœ‰é£æ‰‡çš„ LNR (Lower Non-Recoverable) é˜ˆå€¼éƒ½åœ¨ 15000 RPMï¼ˆå¿˜è®°æˆªå›¾å½“æ—¶çš„è¯»æ•°äº†ï¼‰ã€‚é Full æ¨¡å¼çš„é£æ‰‡è½¬é€Ÿæ˜¾ç„¶ä¸æ˜¯æ»¡é€Ÿï¼Œè€Œ BMC å®šæ—¶ç›‘æµ‹åˆ°æœ‰é£æ‰‡è½¬é€Ÿä½äº Lower LNR é˜ˆå€¼åå°±ä¼šè§¦å‘æ‰€æœ‰é£æ‰‡è¿›å…¥å…¨é€Ÿæ¨¡å¼ã€‚è¿™ä¸ª 15000 çš„é˜ˆå€¼å¾ˆæ˜æ˜¾æ˜¯åŒ¹é…å…¶åŸå§‹çš„å·¥ä½œè´Ÿè½½å¯¹è±¡ â€” 2U / 4U æœºç®±ä¸­çš„å‡ ä¸‡è½¬å¤§é£é‡æš´åŠ›é£æ‰‡ï¼Œæˆ‘çš„é£æ‰‡æ˜¾ç„¶æ˜¯æ°´åœŸä¸æœã€‚\nå¸–å­ä¸­æåˆ°çš„å‡ ä¸ªé˜ˆå€¼æ˜¯ï¼š\nName Abbreviation Supermicro Term (Via BMC Web Console) Lower Non-Recoverable LNR Low NR Lower Critical LCR Low CT Lower Non-Critical LNC \\ Upper Non-Recoverable UNR High NR Upper Critical UCR High CT Upper Non-Critical UNC \\ å„ä¼ æ„Ÿå™¨å·²è®¾ç½®çš„é˜ˆå€¼å¯ä»¥åœ¨ BMC ç½‘é¡µçš„ Server Health -\u0026gt; Sensor Readings ä¸­ç‚¹å‡» Show Thresholds æŒ‰é’®æŸ¥çœ‹ï¼Œæˆ–è€…ä½¿ç”¨ ipmitoolsï¼š\nipmitool sensor list all æ­£å¦‚å¸–å­ä¸­æå‡ºçš„é‚£æ ·ï¼Œè®¾ç½® BMC ä¸­ä¼ æ„Ÿå™¨å„ç§é˜ˆå€¼çš„æ‰‹æ®µæœ€å¥½æ˜¯é€šè¿‡ ipmitoolï¼Œå› ä¸ºè¶…å¾®çš„ BMC ç½‘é¡µä¸Šæ ¹æœ¬ä¸å­˜åœ¨è®¾ç½®çš„åœ°æ–¹ï¼Œè€Œè¶…å¾®è‡ªå·±çš„ IPMI å·¥å…·åˆå¹¶ä¸æ˜¯æ€»èƒ½æ­£å¸¸å·¥ä½œã€‚\nä½¿ç”¨ ipmitool è°ƒæ•´ä¸¤ä¸ªé£æ‰‡çš„ Lower LNRã€LCRã€LNC ä»¥åŒ¹é…æˆ‘çš„å®é™…æƒ…å†µåï¼Œé£æ‰‡å‘¨è€Œå¤å§‹çš„è½¬é€Ÿæ³¢åŠ¨æƒ…å†µä¸å†å‡ºç°ã€‚\nipmitool sensor thresh FAN2 lower 0 100 200 ipmitool sensor thresh FAN6 lower 0 100 200 è€Œæ¥è‡ª servethehome çš„è¿™ç¯‡ Supermicro X9/X10/X11 Fan Speed Control å¸–å­åˆ™ä»£æ›¿è¶…å¾®å®˜æ–¹è¡¥å……æè¿°äº† Standardã€Optimalã€HeavyIO è¿™ 3 ç§æ¨¡å¼çš„å…·ä½“å®šä¹‰ï¼š\näºæ˜¯å®é™…æµ‹è¯•äº†ä¸‹è¿™å‡ ä¸ªæ¨¡å¼ä¸‹é£æ‰‡çš„ RPMï¼Œç»“æœå¦‚ä¸‹ï¼š\nFan Mode FAN2 RPM, Ratio FAN6 RPM, Ratio Standard 800, = 50% 700, = 50% Optimal 700, â‰Œ 43% 600, â‰Œ 42% HeavyIO 900, â‰Œ 56% 600, â‰Œ 42% ä¸å…‰ä¸å¸–å­ä¸­çš„æè¿°ä¸æ˜¯å®Œå…¨ä¸€è‡´ï¼Œæ›´è®©äººçº³é—·çš„æ˜¯ï¼Œåœ¨è¿™å‡ ä¸ªæ¨¡å¼ä¸­æ¥å›åå¤åˆ‡æ¢å‡ æ¬¡å°±ä¼šå‡ºç°ï¼šåŒä¸€ä¸ªæ¨¡å¼ä¸‹ç¬¬ 1 æ¬¡å’Œç¬¬ N æ¬¡çš„ç»“æœä¸æ˜¯å®Œå…¨ä¸€è‡´çš„ç°è±¡ã€‚çŒœæµ‹ BMC ä¸ä»…ä»…æ˜¯æŒ‰å›ºå®šç™¾åˆ†æ¯”å»æ§åˆ¶è½¬é€Ÿï¼Œå¯èƒ½è¿˜ä¸å¯¹åº” Zone çš„æ¸©åº¦æœ‰å…³ã€‚\nå¥½åœ¨å¸–å­ä¸­ä¹Ÿç»™å‡ºäº†è‡ªå®šä¹‰æ§åˆ¶é£æ‰‡è½¬é€Ÿçš„æ–¹æ³•ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘æœ€åé‡‡ç”¨çš„æ–¹å¼ã€‚ç®€è¦æ¥è¯´ï¼Œéœ€è¦åšåˆ°ï¼š\nBMC çš„ Fan Mode é…ç½®ä¸º Full å‘é€ IPMI RAW æŒ‡ä»¤æŒ‡å®šå…·ä½“é£æ‰‡è½¬é€Ÿæ¯”ä¾‹ é™¤äº†é€šè¿‡ BMC ç½‘é¡µä¸Šè®¾ç½®é£æ‰‡æ¨¡å¼ä¸º Fullï¼Œä¹Ÿå¯ä»¥é€šè¿‡ ipmitool å·¥å…·è¿›è¡Œï¼š\n# Gets the fan mode # 0/1/2/4 Standard/Full/Optimal/HeavyIO ipmitool raw 0x30 0x45 0x00 # Sets the fan mode to Standard ipmitool raw 0x30 0x45 0x01 0x00 # Sets the fan mode to Full ipmitool raw 0x30 0x45 0x01 0x01 # Sets the fan mode to Optimal ipmitool raw 0x30 0x45 0x01 0x02 # Sets the fan mode to HeavyIO ipmitool raw 0x30 0x45 0x01 0x04 æ ¹æ®å¸–å­æè¿°ï¼ŒRAW æŒ‡ä»¤ä¸­éœ€è¦ä½¿ç”¨ Hex æ¥æè¿°è½¬é€Ÿç™¾åˆ†æ¯”ï¼Œ0x64 æ˜¯åè¿›åˆ¶çš„ 100ï¼Œå°±æ˜¯è¡¨ç¤º 100%ï¼Œ0x32 è¡¨ç¤º 50%ï¼Œä¾æ­¤ç±»æ¨ã€‚ä¾‹å¦‚è®¾ç½® CPU zone (0) çš„é£æ‰‡ä½¿ç”¨ 50% è½¬é€Ÿï¼š\nipmitool raw 0x30 0x70 0x66 0x01 0x00 0x32 ä½†æ˜¯ï¼Œå®é™…è§‚å¯Ÿåˆ°çš„æƒ…å†µåˆä¸å¸–å­å­˜åœ¨å‡ºå…¥ã€‚Â¯\\_(ãƒ„)_/Â¯\n0x64 ç¡®å®æ˜¯æ»¡é€Ÿï¼Œè€Œ 0x32 åœ¨æˆ‘æ‰§è¡ŒæŒ‡ä»¤åé€šè¿‡ ipmitool sdr è§‚å¯Ÿå‘ç°ï¼ŒCPU zone çš„ FAN2ã€FAN6 é£æ‰‡è½¬é€Ÿåˆ†åˆ«æ˜¯ 1000 å’Œ 900ï¼Œæ¥è¿‘ 64% çš„æ¯”ä¾‹ã€‚\n$ ipmitool raw 0x30 0x70 0x66 0x01 0x00 0x32 $ ipmitool sdr | grep FAN FAN1 | no reading | ns FAN2 | 1000 RPM | ok FAN3 | no reading | ns FAN4 | no reading | ns FAN5 | no reading | ns FAN6 | 900 RPM | ok FANA | no reading | ns FANB | no reading | ns è¿™ä¸ª 3.91 çš„ BMC æ˜¯ 2021 å¹´çš„ï¼Œservethehome å¸–å­çš„æœ€åä¿®æ”¹æ—¶é—´æ˜¯ 2016ï¼Œå¯èƒ½æ˜¯è¶…å¾®åˆæ”¹äº†ä»€ä¹ˆä¸œè¥¿å¯¼è‡´çš„ã€‚\nåå¤æµ‹è¯•åå‘ç°åªæœ‰ 0x24 æ‰ç¬¦åˆ 50% è½¬é€Ÿ: FAN2 800 RPMï¼ŒFAN6 700 RPMï¼Œä¸”å¤šæ¬¡ç»“æœå®Œå…¨ä¸€è‡´ã€‚åŸºäºé™éŸ³å’Œæ•£çƒ­çš„è€ƒé‡ï¼Œæœ€ç»ˆé€‰æ‹©çš„ä¹Ÿæ˜¯è¿™ä¸ªå€¼ã€‚\né€šè¿‡ RAW æŒ‡ä»¤è®¾ç½®è½¬é€Ÿçš„ç¼ºç‚¹æ˜¯ï¼Œè®¾ç½®åœ¨ BMC Reset (æ‰ç”µ/é‡ç½®) åä¼šä¸¢å¤±ã€‚å¦‚æœä½ åƒæˆ‘ä¸€æ ·ä½¿ç”¨çš„æ˜¯ Linux (æ¯”å¦‚ PVE)ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨ Systemd çš„ oneshot unit æ¥åšåˆ°åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨è®¾ç½®ï¼š\n$ systemctl cat ipmi_fan.service # /etc/systemd/system/ipmi_fan.service [Unit] Description=ipmi_fan script After=openipmi.service [Service] Type=oneshot User=root Group=root ExecStart={PATH_TO_YOUR_SCRIPT} KillSignal=SIGQUIT TimeoutStopSec=5 KillMode=process [Install] WantedBy=multi-user.target æƒ³è¦æ‰‹åŠ¨è§¦å‘ BMC Reset å¯ä»¥ä½¿ç”¨ BMC ç½‘é¡µä¸Šçš„ Maintenance -\u0026gt; Unit Resetï¼Œæˆ–è€…ä½¿ç”¨ ipmitoolï¼š\nipmitool mc reset cold Github ä¸Šæœ‰ä¸ª Python é¡¹ç›® smfc (Super Micro fan control for Linux (home) servers.)ï¼Œå·ç§°å¯ä»¥åšåˆ°æŒ‰éœ€è‡ªåŠ¨è°ƒæ•´é£æ‰‡è½¬é€Ÿï¼Œä½†æˆ‘æ²¡æœ‰ç”¨è¿‡ã€‚\n","date":"2022-05-21","externalUrl":null,"permalink":"/posts/2022/05/using-supermicro-x10drl-i/","section":"åšå®¢","summary":"åœ¨æŸæµ·é²œäºŒæ‰‹å¸‚åœºä¹°äº†ä¸€å—è¶…å¾®çš„ X10DRL-iï¼Œç”¨æ¥åšå®¶é‡Œçš„ HomeLabã€‚","title":"ä½¿ç”¨ Supermicro X10DRL-i","type":"posts"},{"content":"","date":"2021-05-30","externalUrl":null,"permalink":"/tags/oom/","section":"Tags","summary":"","title":"OOM","type":"tags"},{"content":"åœ¨ä½¿ç”¨ Linux çš„å®é™…ç”Ÿäº§å®è·µä¸­ï¼Œå…¶ä¸Šè¿è¡Œçš„ç¨‹åºæœ‰å¯èƒ½ä¼šå‘ç”Ÿè¢« OOM Kill çš„æƒ…å†µã€‚æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¼šæƒ³æŠŠå®ƒç›‘æ§èµ·æ¥ã€‚\nPrometheus ç”Ÿæ€ä¸­çš„ node_exporter åœ¨ v0.16.0 å¼€å§‹åŠ å¼ºäº†å¯¹ vmstat çš„ parse \u0026amp; collectï¼Œé»˜è®¤æƒ…å†µä¸‹æ–°å¢äº†ä¸€ä¸ªå…³é”®çš„ Metricï¼šnode_vmstat_oom_killã€‚\nå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª Counterã€‚å¹¶ä¸”è¿™ä¸ª Metric çš„æ˜¯å¦å­˜åœ¨å…¶å®ä¾èµ–äº Linux Kernel çš„ç‰ˆæœ¬: åªæœ‰ç‰ˆæœ¬åœ¨ 4.13+ çš„å†…æ ¸æ‰ä¼šé€šè¿‡ /proc/vmstat æš´éœ²è¿™ä¸ª oom_kill è®¡æ•°ä¿¡æ¯ã€‚\nå¤šæ•°æƒ…å†µä¸‹è¿™ä¸ª Metric ä¹Ÿå¤Ÿç”¨ã€‚ä½†ï¼Œå¦‚æœä½ ä¸åªæ˜¯æƒ³è¦è¿™æ ·å•çº¯çš„ OOM è®¡æ•°ï¼Œè€Œæ˜¯æƒ³é‡‡é›†å…·ä½“çš„ OOM ä¿¡æ¯ï¼Œæ¯”å¦‚é‡‡é›†å¹¶ç»“æ„åŒ–å­˜å‚¨è‡³ ELK æˆ–è€…å…¶ä»–ä»€ä¹ˆçš„ç³»ç»Ÿï¼Œå†æ‰©å±•å‡ºå‘Šè­¦ï¼Œé€šçŸ¥ç­‰åŠŸèƒ½ï¼Œå¯ä»¥åœ¨ rsyslog ä¸­ä½¿ç”¨ imkmsg æ¨¡å—ï¼Œç²¾ç»†åŒ–å®šä¹‰ä¸€å¥—å¤æ‚çš„ input / parse / output ç­‰é€»è¾‘å®ç°ã€‚\nå¦‚æœä¹ æƒ¯è‡ªå·±ç¼–ç¨‹è€Œä¸æƒ³æ¥è§¦ rsyslog é‚£ä¸€å † DSLã€é…ç½®è¯­æ³•ç­‰ï¼Œä¹Ÿå¯ä»¥ä» imkmsg æ¨¡å—çš„ä¿¡æ¯æºå¤´å¤„ /dev/kmsg è‡ªè¡Œé‡‡é›†ã€è§£æã€å¤„ç†æ¥è¿›è¡Œã€‚/dev/kmsg è¾“å‡ºçš„ä¿¡æ¯æ˜¯é«˜åº¦ç»“æ„åŒ–çš„ï¼Œæ ¼å¼ä¸º \u0026quot;level,sequnum,timestamp;\u0026lt;message text\u0026gt;\\n\u0026quot;ï¼Œæ›´å¤šä¿¡æ¯å¯ä»¥å‚è€ƒ Rsyslog çš„ imkmsg æ–‡æ¡£ã€‚\nä¸ºä»€ä¹ˆä¸æ˜¯é€‰æ‹©å¯¹ /proc/kmsg è¿›è¡Œè§£æï¼Œæ˜¯å› ä¸º /proc/kmsg æ˜¯ä¸€æ¬¡æ€§ç¼“å†²çš„ï¼Œè¯»å–è¿‡çš„æ•°æ®æ— æ³•å†æ¬¡è¯»å–ï¼Œè€Œ /dev/kmsg æ”¯æŒå¤šæ¬¡é‡å¤è¯»å–ã€‚\nå½“ç„¶ï¼Œå¦‚æœæ˜¯ä¹ æƒ¯ä½¿ç”¨ golang çš„è¯»è€…ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªå¼€æºçš„ parserï¼šgo-kmsg-parserã€‚\n","date":"2021-05-30","externalUrl":null,"permalink":"/posts/2021/05/monitoring-oom-kill/","section":"åšå®¢","summary":"åœ¨ä½¿ç”¨ Linux çš„å®é™…ç”Ÿäº§å®è·µä¸­ï¼Œå…¶ä¸Šè¿è¡Œçš„ç¨‹åºæœ‰å¯èƒ½ä¼šå‘ç”Ÿè¢« OOM Kill çš„æƒ…å†µã€‚æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¼šæƒ³æŠŠå®ƒç›‘æ§èµ·æ¥ã€‚","title":"ç›‘æ§ Linux ä¸Šçš„ OOM","type":"posts"},{"content":"","date":"2019-01-06","externalUrl":null,"permalink":"/tags/collectd-web/","section":"Tags","summary":"","title":"Collectd-Web","type":"tags"},{"content":"æˆ‘æœ‰ä¸€ä¸ª VPSï¼Œå†…å­˜åªæœ‰ 237 MiBï¼Œä¸Šé¢è¿è¡Œçš„æ˜¯ Debian 9ã€‚ä¾›åº”å•†è‡ªå·±çš„ç›‘æ§åŠŸèƒ½å’Œé¡µé¢åªèƒ½è¯„ä»·ä¸ºå­˜åœ¨. æˆ‘æƒ³è‡ªå·±ç›‘æ§ä¸‹æœºå™¨çš„ä¸€äº›æŒ‡æ ‡ï¼Œç”¨ Prometheu ç”Ÿæ€çš„ node_exporter + grafana æ˜¾ç„¶ä¸åˆé€‚ï¼Œå› ä¸ºèµ„æºå®åœ¨æ˜¯æ‰è¥Ÿè§è‚˜ã€‚\nè¿™æ—¶å€™å°±éœ€è¦ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå¤è€çš„é‚£äº›ä½¿ç”¨ RRD æŠ€æœ¯çš„ç›‘æ§é‡‡é›†è½¯ä»¶ä¸Šåœºäº†ã€‚æˆ‘é€‰æ‹©çš„æ˜¯ä½¿ç”¨ collectdï¼Œå…·ä½“ä¸€å¥—æ–¹æ¡ˆæ˜¯ï¼š\ncollectd è´Ÿè´£é‡‡é›†æ•°æ® collectd-web æ¥æä¾› Web çš„ UI/UX fcgiwrap å¤„ç† fcgi nginx åš Web Server ä¸‹é¢ç®€è¦è®°å½•ä¸€ä¸‹å¯¹åº”ç¨‹åºçš„å®‰è£…è¿‡ç¨‹å’Œé…ç½®ã€‚\ncollectd ç›´æ¥ä½¿ç”¨ apt å®‰è£…ã€‚å®‰è£…å®Œåï¼Œå¯ä»¥å¯¹ç…§ç€æ–‡æ¡£å»ç¼–è¾‘ /etc/collectd/collectd.confï¼Œé…ç½®å¼€å¯æƒ³è¦çš„æ’ä»¶ã€‚æˆ‘é…ç½®äº†ä»¥ä¸‹æ’ä»¶:\nLoadPlugin syslog \u0026lt;Plugin syslog\u0026gt; LogLevel info \u0026lt;/Plugin\u0026gt; LoadPlugin conntrack LoadPlugin contextswitch LoadPlugin cpu LoadPlugin cpufreq LoadPlugin df LoadPlugin disk LoadPlugin entropy LoadPlugin interface LoadPlugin iptables LoadPlugin irq LoadPlugin load LoadPlugin memory LoadPlugin netlink LoadPlugin processes LoadPlugin rrdtool LoadPlugin swap LoadPlugin tcpconns LoadPlugin uptime LoadPlugin users \u0026lt;Plugin df\u0026gt; FSType rootfs FSType sysfs FSType proc FSType devtmpfs FSType devpts FSType tmpfs FSType fusectl FSType cgroup IgnoreSelected true \u0026lt;/Plugin\u0026gt; \u0026lt;Plugin memory\u0026gt; ValuesAbsolute true ValuesPercentage true \u0026lt;/Plugin\u0026gt; \u0026lt;Plugin rrdtool\u0026gt; DataDir \u0026#34;/var/lib/collectd/rrd\u0026#34; \u0026lt;/Plugin\u0026gt; \u0026lt;Plugin tcpconns\u0026gt; ListeningPorts true AllPortsSummary false \u0026lt;/Plugin\u0026gt; æ¥ç€ collectd-web çš„å®‰è£…ï¼Œæˆ‘é€‰æ‹©ç›´æ¥ä½¿ç”¨ git ä»“åº“çš„éƒ¨ç½²æ¨¡å¼ï¼Œä» github clone ä¸‹æ¥ï¼š\n[root@vps collectd-web]# git remote -v origin https://github.com/httpdss/collectd-web.git (fetch) origin https://github.com/httpdss/collectd-web.git (push) fcgi çš„å·¥ä½œäº¤ç»™ fcgiwrapï¼ŒåŒæ ·ç›´æ¥ä½¿ç”¨ apt å®‰è£…å³å¯ï¼Œè®°å¾—å¯ç”¨å¯¹åº”çš„ socket unitã€‚\n[root@vps nginx]# dpkg -S /lib/systemd/system/fcgiwrap.socket fcgiwrap: /lib/systemd/system/fcgiwrap.socket [root@vps nginx]# systemctl enable fcgiwrap.socket æœ€åé…ç½® nginxï¼Œæˆ‘è¿™é‡Œ collectd-web æ˜¯ git clone åœ¨äº† /opt/collectd-webï¼Œè¯»è€…éœ€è¦è‡ªè¡Œä¿®æ”¹ä»¥åŒ¹é…è‡ªå·±çš„å®é™…æƒ…å†µã€‚\nserver { listen *:443 ssl http2; ssl_certificate x.crt; ssl_certificate_key x.key; server_name abc.com; charset utf-8; auth_basic \u0026#34;Restricted area\u0026#34;; auth_basic_user_file auth.db; location / { default_type text/html; root /opt/collectd-web; } location /cgi-bin/ { gzip off; root /opt/collectd-web; fastcgi_pass unix:/run/fcgiwrap.socket; include fastcgi_params; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; } } ","date":"2019-01-06","externalUrl":null,"permalink":"/posts/2019/01/monitoring-linux-node-with-collected-web/","section":"åšå®¢","summary":"æˆ‘æœ‰ä¸€ä¸ª VPSï¼Œå†…å­˜åªæœ‰ 237 MiBï¼Œä¸Šé¢è¿è¡Œçš„æ˜¯ Debian 9ã€‚ä¾›åº”å•†è‡ªå·±çš„ç›‘æ§åŠŸèƒ½å’Œé¡µé¢åªèƒ½è¯„ä»·ä¸ºå­˜åœ¨.","title":"ä½¿ç”¨ Collectd-web ç›‘æ§ Linux èŠ‚ç‚¹","type":"posts"},{"content":"","date":"2018-01-09","externalUrl":null,"permalink":"/tags/bcache/","section":"Tags","summary":"","title":"Bcache","type":"tags"},{"content":"bcache æ˜¯ Linux å†…æ ¸çº§åˆ«æä¾›çš„ä¸€ç§ç¼“å­˜æ–¹æ¡ˆ(è¦æ±‚å†…æ ¸ç‰ˆæœ¬ 3.10+ å¹¶ä¸”å†…æ ¸ç¼–è¯‘æ—¶å†…éƒ¨æœ‰åŠ å…¥ bcache æ”¯æŒ), å¯ä»¥ä½¿ç”¨ä¸€ä¸ª SSD çš„åˆ†åŒºæˆ–æ•´å—ç¡¬ç›˜ç©ºé—´ä½œä¸ºå¦ä¸€ä¸ªå¤§å®¹é‡ HDD åˆ†åŒºçš„ç‰¹å®šç¼“å­˜æ¥åŠ é€Ÿ HDD çš„éšæœºè¯»å†™æ“ä½œ.\nä¸‹é¢å°†è®°å½•åœ¨ CentOS 7 ä¸Šå®‰è£…å¹¶é…ç½®çš„å®éªŒè¿‡ç¨‹.\ninstall # CentOS 7 å®˜æ–¹å¹¶æœªæä¾› bcache çš„æ¨¡å—æ”¯æŒ, å¯ä»¥è‡ªå·±ç¼–è¯‘ bcache æ¨¡å—æˆ–è€…ä½¿ç”¨åˆ«äººå·²æ‰“åŒ…å¥½çš„ rpm æº.\nè‡ªè¡Œç¼–è¯‘ bcache æ¨¡å—éœ€è¦æ•´ä¸ª linux kernel source, ä½¿ç”¨å®˜æ–¹å‘è¡Œç‰ˆå†…æ ¸æ¥ç¼–è¯‘æ¨¡å—çš„è¯, æ ¹æ®å®˜æ–¹æŒ‡å¯¼è·å¾—ä½ éœ€è¦çš„ç‰ˆæœ¬çš„ æºç \nè¿™é‡Œåˆç•¥æ¦‚æ‹¬ä¸‹æ ¹æ®å®˜æ–¹æŒ‡å¯¼çš„å¦‚ä½• ç¼–è¯‘æ¨¡å—, æˆ‘ä»¬è¿™é‡Œé€‰æ‹©ç¬¬ä¸€ç§ build *.ko çš„æ–¹å¼\nåœ¨ kernel æºç ç›®å½•, æˆ‘ä»¬é¦–å…ˆéœ€è¦è·å–ä½ æœŸæœ›ç¼–è¯‘çš„ kernel ç‰ˆæœ¬çš„ kernel configuration æ–‡ä»¶:\nModule.symvers .config # å‘½ä»¤æ¥è‡ª https://wiki.archlinux.org/index.php/Compile_kernel_module $ cp /usr/lib/modules/$(uname -r)/build/.config ./ $ cp /usr/lib/modules/$(uname -r)/build/Module.symvers ./ å¦‚æœæ²¡å¤åˆ¶ Module.symvers, ç¼–è¯‘ä¼šå‡ºç° no symbol version for module_layout é”™è¯¯.\nä¸Šé¢å‘½ä»¤çš„ä½¿ç”¨äº† uname -r æ¥ç›´æ¥å®šä½åˆ°å½“å‰ç³»ç»Ÿè¿è¡Œçš„å†…æ ¸ç‰ˆæœ¬çš„ source ç›®å½•, å¦‚æœä½ ä¸æ˜¯ç¼–è¯‘å½“å‰è¿è¡Œçš„å†…æ ¸çš„ bcache æ¨¡å—å¯è‡ªè¡ŒæŒ‡å®š kernel çš„ source ç›®å½•.\nmake oldconfig åå† make menuconfig, æ ¹æ®æ–‡æ¡£æ‰¾åˆ° bcache çš„é…ç½®,å°†å…¶é€‰æ‹©ä¸º M, è¡¨ç¤ºç¼–è¯‘ä¸ºæ¨¡å—.\nå…¶ä»–æ­¥éª¤æŒ‰å®˜æ–¹æ­¥éª¤æ‰§è¡Œ, è‹¥ä¸­é€”å‡ºé”™ä¸€èˆ¬æ˜¯æœªå®‰è£…æŸäº›è½¯ä»¶, å¯ä»¥æ ¹æ®å‡ºé”™æç¤º, å®‰è£…å¯¹åº”è½¯ä»¶è§£å†³.\næ¨¡å—ç¼–è¯‘å, è¿˜è¦æ ¹æ®å‘è¡Œç‰ˆçš„çº¦æŸå°†æ¨¡å—è®¾ç½®ä¸º boot æ—¶åŠ è½½, éœ€è¦åœ¨ /etc/modules-load.d/ ç›®å½•ä¸‹æ–°å»º /etc/modules-load.d/bcache.conf, åŠ å…¥å†…å®¹\n# Load bcache.ko at boot # See the modules-load.d(5) and systemd-modules-load.service(8) man pages for more information. bcache bcache-tools # å†…æ ¸æ¨¡å—ç¼–è¯‘å®Œæˆå, è¿˜éœ€è¦ userspace tools çš„æ”¯æŒ, å°±æ˜¯ bcache-tools è½¯ä»¶åŒ….\næ­¤è½¯ä»¶åŒ…ä¸å…‰æä¾›äº†å¸¸ç”¨çš„å‘½ä»¤è¡Œå·¥å…·, è¿˜ä¼šè‡ªåŠ¨çš„ç”Ÿæˆ udev rules.\nç›®å‰ red hat ç³»å’Œ debian ç³»çš„ bcache-tools å·¥å…·é›†é‡Œçš„ udev rules ç­‰ç•¥æœ‰å·®åˆ«, æºç åŠä¸‹è½½åœ°å€éƒ½ä¸ä¸€æ ·, fedora 20 ä»¥ä¸Šçš„ç³»ç»Ÿæºé‡Œå·²åŒ…å«æ­¤å·¥å…·é›†, åŒ…åå°±å« bcache-tools\nå…·ä½“ä¸åŒå‘è¡Œç‰ˆçš„å®‰è£…æ–¹å¼, ä» bcache çš„ å®˜æ–¹ç½‘å€ æ‘˜æŠ„å¯è§\nBcache has been merged into the mainline Linux kernel; for the latest stable bcache release use the latest 3.10 or 3.11 stable kernel.\nFor the userspace tools,\ngit clone http://evilpiepirate.org/git/bcache-tools.git\nThe udev rules, Debian/Ubuntu source package, and Ubuntu PPA are maintained here:\ngit clone https://github.com/g2p/bcache-tools.git\nTo use the PPA (Ubuntu Raring and Saucy):\nsudo add-apt-repository ppa:g2p/storage sudo apt-get update sudo apt-get install bcache-tools\nThe PPA also contains blocks, a conversion tool.\nA Fedora package is available in Fedora 20, and maintained here.\nmake-bcache # å®‰è£…å®Œæˆç”¨æˆ·æ€å·¥å…· bcache-tools å, ä½¿ç”¨å…¶ä¸­çš„ make-bcache æ¥æ“ä½œç£ç›˜\n[root@pure-test ~]# make-bcache --help Usage: make-bcache [options] device -C, --cache Format a cache device -B, --bdev Format a backing device -b, --bucket bucket size -w, --block block size (hard sector size of SSD, often 2k) -o, --data-offset data offset in sectors --cset-uuid UUID for the cache set --writeback enable writeback --discard enable discards --cache_replacement_policy=(lru|fifo) -h, --help display this help and exit å¯¹è®¾å¤‡è¿›è¡Œæ“ä½œå‰éœ€è¦å…ˆæ¸…ç†æ•´ä¸ªè®¾å¤‡çš„åˆ†åŒºåŠå…¶ä»–ä¿¡æ¯:\n# wipefs -a \u0026#39;devices\u0026#39; wipefs -a /dev/sda2 # åˆ†åŒº wipefs -a /dev/sdb # æ•´ä¸ªç£ç›˜ device å¯ä»¥æ˜¯æ•´ä¸ªç£ç›˜, ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåˆ†åŒº\nå‡è®¾ /dev/sdb æ˜¯ä¸€å—ssd, /dev/sda æ˜¯ä¸€å—HDD, ç°åœ¨ä½¿ç”¨ /dev/sdb1 ä½œä¸º cache, /dev/sda2 ä½œä¸º backend, 2 ä¸ªåˆ†åŒºéƒ½å·²ç»ä½¿ç”¨ wipefs å¤„ç†è¿‡. æ¥ä¸‹æ¥å°±å¼€å§‹åˆ†åˆ«åˆ›å»º cache è®¾å¤‡å’Œ backend è®¾å¤‡.\ncache # ç”Ÿæˆ cache è®¾å¤‡\n[root@pure-test ~]# make-bcache -C /dev/sdb1 UUID: bf8f710d-5c99-4d40-8747-00d72a5af2cf Set UUID: 5da393d6-b157-4bb3-a105-235a1425894d version: 0 nbuckets: 244206 block_size: 1 bucket_size: 1024 nr_in_set: 1 nr_this_dev: 0 first_bucket: 1 UUID \u0026ndash;\u0026gt; å®ä½“è®¾å¤‡ /dev/sdb1 çš„ UUID\nSet UUID \u0026ndash;\u0026gt; æ­¤ cache è®¾å¤‡è¢«è™šæ‹Ÿçš„ UUID \u0026ndash;\u0026gt; 5da393d6-b157-4bb3-a105-235a1425894d\næ­¤ UUID è¿˜å¯ä»¥é€šè¿‡æŸ¥çœ‹ /sys/fs/bcache/ æ¥ç¡®å®š\n[root@pure-test ~]# ls -lh /sys/fs/bcache/ total 0 drwxr-xr-x 7 root root 0 Sep 28 15:15 5da393d6-b157-4bb3-a105-235a1425894d --w------- 1 root root 4.0K Sep 28 15:15 register --w------- 1 root root 4.0K Sep 28 15:15 register_quiet æŸ¥çœ‹æ­¤ cache è®¾å¤‡å¯¹åº”çš„å®ä½“è®¾å¤‡\n[root@pure-test ~]# ls -lh /sys/fs/bcache/5da393d6-b157-4bb3-a105-235a1425894d/ total 0 -r--r--r-- 1 root root 4.0K Sep 29 10:49 average_key_size -r--r--r-- 1 root root 4.0K Sep 29 10:49 block_size -r--r--r-- 1 root root 4.0K Sep 29 10:49 btree_cache_size -r--r--r-- 1 root root 4.0K Sep 29 10:49 bucket_size lrwxrwxrwx 1 root root 0 Sep 29 10:49 cache0 -\u0026gt; ../../../devices/pci0000:00/0000:00:1f.2/ata6/host5/target5:0:0/5:0:0:0/block/sdb/sdb1/bcache -r--r--r-- 1 root root 4.0K Sep 29 10:49 cache_available_percent --w------- 1 root root 4.0K Sep 29 10:49 clear_stats -r--r--r-- 1 root root 4.0K Sep 29 10:49 congested -rw-r--r-- 1 root root 4.0K Sep 29 10:49 congested_read_threshold_us -rw-r--r-- 1 root root 4.0K Sep 29 10:49 congested_write_threshold_us -rw-r--r-- 1 root root 4.0K Sep 29 10:49 errors --w------- 1 root root 4.0K Sep 29 10:49 flash_vol_create drwxr-xr-x 2 root root 0 Sep 29 10:49 internal -rw-r--r-- 1 root root 4.0K Sep 29 10:49 io_error_halflife -rw-r--r-- 1 root root 4.0K Sep 29 10:49 io_error_limit -rw-r--r-- 1 root root 4.0K Sep 29 10:49 journal_delay_ms -r--r--r-- 1 root root 4.0K Sep 29 10:49 root_usage_percent drwxr-xr-x 2 root root 0 Sep 29 10:49 stats_day drwxr-xr-x 2 root root 0 Sep 29 10:49 stats_five_minute drwxr-xr-x 2 root root 0 Sep 29 10:49 stats_hour drwxr-xr-x 2 root root 0 Sep 29 10:49 stats_total --w------- 1 root root 4.0K Sep 29 10:49 stop -rw-r--r-- 1 root root 4.0K Sep 29 10:49 synchronous -r--r--r-- 1 root root 4.0K Sep 29 10:49 tree_depth --w------- 1 root root 4.0K Sep 29 10:49 unregister å¯ä»¥çœ‹è§æ­¤å— cache è®¾å¤‡å¯¹åº”çš„æ˜¯ /dev/sdb1\nbcakend # ä»¥ä¸‹å‘½ä»¤ä¼šåœ¨ /dev ä¸‹ç”Ÿæˆä¸€ä¸ªåä¸º bcache0 çš„ backend è®¾å¤‡\n[root@pure-test ~]# make-bcache -B /dev/sda2 UUID: eaad4f10-2e58-4379-ba32-75deaa57eda0 Set UUID: 3246bd30-130d-4a5b-b1ff-e71fe37bedf4 version: 1 block_size: 1 data_offset: 16 backend è®¾å¤‡ä¸€æ—¦æ­£å¸¸ç”Ÿæˆ,å°±å¯å¯¹å…¶è¿›è¡Œæ™®é€šçš„æ ¼å¼åŒ–ç­‰æ“ä½œ,ä¸æ“ä½œæ™®é€šç¡¬ç›˜åˆ†åŒºä¸€èˆ¬\nmkfs.ext4 /dev/bcache0 show real device # æŸ¥çœ‹æ­¤åç«¯ bcache0 è®¾å¤‡å®é™…å¯¹åº”çš„å®ä½“ç£ç›˜\nå½“ /dev/bcache0 æœªæ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿæ—¶\n[root@pure-test ~]# ls -lh /dev/bcache/by-uuid/ total 0 lrwxrwxrwx 1 root root 13 Sep 29 15:45 eaad4f10-2e58-4379-ba32-75deaa57eda0 -\u0026gt; ../../bcache0 å¯ä»¥çœ‹è§æ­¤è®¾å¤‡å®é™…æŒ‡å‘çš„æ˜¯ uuid eaad4f10-2e58-4379-ba32-75deaa57eda0 çš„è®¾å¤‡\n[root@pure-test ~]# ls -lh /dev/disk/by-uuid/ total 0 lrwxrwxrwx 1 root root 10 Sep 29 15:38 388e01f1-a27c-4f6c-bcac-823962963259 -\u0026gt; ../../sda1 lrwxrwxrwx 1 root root 10 Sep 29 15:38 71683e71-2990-48a1-840d-0f43fb11340c -\u0026gt; ../../sda5 lrwxrwxrwx 1 root root 10 Sep 29 15:38 abeedced-9450-4159-927b-5b4298d96bc1 -\u0026gt; ../../sda3 lrwxrwxrwx 1 root root 10 Sep 29 15:38 bf8f710d-5c99-4d40-8747-00d72a5af2cf -\u0026gt; ../../sdb1 lrwxrwxrwx 1 root root 10 Sep 29 15:45 eaad4f10-2e58-4379-ba32-75deaa57eda0 -\u0026gt; ../../sda2 lrwxrwxrwx 1 root root 10 Sep 29 15:38 f1982595-8044-48ae-a344-54836d487666 -\u0026gt; ../../sda6 lrwxrwxrwx 1 root root 13 Sep 29 16:30 ff8e456b-a5a0-4d20-8697-241e451e486e -\u0026gt; ../../bcache0 å¯å‘ç°æ­¤ UUID å¯¹åº”ä¸º /dev/sda2\nå½“ /dev/bcache0 å·²ç»æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿå\nç›´æ¥æŸ¥çœ‹ /sys/block/bcache0/\n[root@pure-test ~]# ls -lh /sys/block/bcache0/ total 0 -r--r--r-- 1 root root 4.0K Sep 29 10:53 alignment_offset lrwxrwxrwx 1 root root 0 Sep 29 10:53 bcache -\u0026gt; ../../../pci0000:00/0000:00:1f.2/ata1/host0/target0:0:0/0:0:0:0/block/sda/sda2/bcache lrwxrwxrwx 1 root root 0 Sep 29 10:53 bdi -\u0026gt; ../../bdi/253:0 -r--r--r-- 1 root root 4.0K Sep 29 10:53 capability -r--r--r-- 1 root root 4.0K Sep 29 10:53 dev -r--r--r-- 1 root root 4.0K Sep 29 10:53 discard_alignment -r--r--r-- 1 root root 4.0K Sep 29 10:53 ext_range drwxr-xr-x 2 root root 0 Sep 29 10:53 holders -r--r--r-- 1 root root 4.0K Sep 29 10:53 inflight drwxr-xr-x 2 root root 0 Sep 29 10:53 power drwxr-xr-x 2 root root 0 Sep 29 10:53 queue -r--r--r-- 1 root root 4.0K Sep 29 10:53 range -r--r--r-- 1 root root 4.0K Sep 29 10:53 removable -r--r--r-- 1 root root 4.0K Sep 29 10:53 ro -r--r--r-- 1 root root 4.0K Sep 29 10:53 size drwxr-xr-x 2 root root 0 Sep 29 10:53 slaves -r--r--r-- 1 root root 4.0K Sep 29 10:53 stat lrwxrwxrwx 1 root root 0 Sep 29 10:53 subsystem -\u0026gt; ../../../../class/block drwxr-xr-x 2 root root 0 Sep 29 10:53 trace -rw-r--r-- 1 root root 4.0K Sep 29 10:53 uevent å¯ä»¥çœ‹è§æ­¤åç«¯è®¾å¤‡å®é™…å¯¹åº”çš„æ˜¯ /dev/sda2\nbackend è®¾å¤‡ bcache0 ä¸ä¸€èˆ¬ç¡¬ç›˜è¡¨ç°çœ‹èµ·æ¥æ— å¼‚, å¯é€šè¿‡å¸¸è§„çš„ UUID æŸ¥çœ‹æ³•æŸ¥çœ‹å…¶ UUID\n# æœªæ ¼å¼åŒ– /dev/bcache0 è®¾å¤‡æ—¶, è®¾å¤‡æ˜¯æœªæ‹¥æœ‰ uuid çš„, æ ¼å¼åŒ–åæ‰æ‹¥æœ‰ uuid [root@pure-test ~]# blkid /dev/sda1: UUID=\u0026#34;388e01f1-a27c-4f6c-bcac-823962963259\u0026#34; TYPE=\u0026#34;ext4\u0026#34; /dev/sda3: UUID=\u0026#34;abeedced-9450-4159-927b-5b4298d96bc1\u0026#34; TYPE=\u0026#34;ext4\u0026#34; /dev/sda5: UUID=\u0026#34;71683e71-2990-48a1-840d-0f43fb11340c\u0026#34; TYPE=\u0026#34;ext4\u0026#34; /dev/sda6: UUID=\u0026#34;f1982595-8044-48ae-a344-54836d487666\u0026#34; SEC_TYPE=\u0026#34;ext2\u0026#34; TYPE=\u0026#34;ext3\u0026#34; /dev/block/8:3: UUID=\u0026#34;abeedced-9450-4159-927b-5b4298d96bc1\u0026#34; TYPE=\u0026#34;ext4\u0026#34; /dev/bcache0: UUID=\u0026#34;ff8e456b-a5a0-4d20-8697-241e451e486e\u0026#34; TYPE=\u0026#34;ext4\u0026#34; [root@pure-test ~]# ls -lh /dev/disk/by-uuid/ total 0 lrwxrwxrwx 1 root root 10 Sep 29 15:38 388e01f1-a27c-4f6c-bcac-823962963259 -\u0026gt; ../../sda1 lrwxrwxrwx 1 root root 10 Sep 29 15:38 71683e71-2990-48a1-840d-0f43fb11340c -\u0026gt; ../../sda5 lrwxrwxrwx 1 root root 10 Sep 29 15:38 abeedced-9450-4159-927b-5b4298d96bc1 -\u0026gt; ../../sda3 lrwxrwxrwx 1 root root 10 Sep 29 15:38 bf8f710d-5c99-4d40-8747-00d72a5af2cf -\u0026gt; ../../sdb1 lrwxrwxrwx 1 root root 10 Sep 29 15:45 eaad4f10-2e58-4379-ba32-75deaa57eda0 -\u0026gt; ../../sda2 lrwxrwxrwx 1 root root 10 Sep 29 15:38 f1982595-8044-48ae-a344-54836d487666 -\u0026gt; ../../sda6 lrwxrwxrwx 1 root root 13 Sep 29 16:30 ff8e456b-a5a0-4d20-8697-241e451e486e -\u0026gt; ../../bcache0 eaad4f10-2e58-4379-ba32-75deaa57eda0 å°±æ˜¯åç«¯ HDD å­˜å‚¨ bcache0 çš„ UUID\none step # å¯é€šè¿‡å°†ä¸€è¡ŒæŒ‡ä»¤åŒæ—¶ç”Ÿäº§ cacahe å’Œ backend è®¾å¤‡\nmake-bcache -B /dev/sda2 -C /dev/sdb1 æŒ‡å®šç›¸å…³å‚æ•°\nmake-bcache --wipe-bcache -w512 --discard --writeback -B /dev/sda2 -C /dev/sdb1 attach \u0026amp; detach # åœ¨ bcache-tools ç¼–è¯‘å®‰è£…æ—¶, ä¼šå®‰è£…ç›¸åº”çš„ udev rules, ä¼šå°† cache è®¾å¤‡ä¸ backend è®¾å¤‡è‡ªåŠ¨è¿›è¡Œ attch (ç»‘å®š).\nç›¸åº”çš„, æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿›è¡Œæ‰‹åŠ¨ attch æˆ– detach\nattach # #attach echo 5da393d6-b157-4bb3-a105-235a1425894d \u0026gt; /sys/block/bcache0/bcache/attach å³å°† cache è®¾å¤‡çš„ UUID å†™å…¥åˆ° backend (bcache0) è®¾å¤‡çš„ /sys/block/{è®¾å¤‡}/bcache/attach ä¸­\næ‰§è¡Œæ­¤å‘½ä»¤å,ä¼šåœ¨ /sys/block/bcache0/bcache/ ä¸‹ç”Ÿæˆä¸€ä¸ª cache ç›®å½• å®é™…æŒ‡å‘ä¸º cache è®¾å¤‡ç›®å½• å°±è¡¨ç¤ºå·²ç» attch æˆåŠŸ\n[root@pure-test ~]# ls -lh /sys/block/bcache0/bcache/ total 0 --w------- 1 root root 4.0K Sep 28 16:01 attach -rw-r--r-- 1 root root 4.0K Sep 28 15:13 bypass_torture_test lrwxrwxrwx 1 root root 0 Sep 28 16:01 cache -\u0026gt; ../../../../../../../../../../../fs/bcache/5da393d6-b157-4bb3-a105-235a1425894d -rw-r--r-- 1 root root 4.0K Sep 28 15:13 cache_mode --w------- 1 root root 4.0K Sep 28 15:13 clear_stats --w------- 1 root root 4.0K Sep 28 16:01 detach lrwxrwxrwx 1 root root 0 Sep 28 15:13 dev -\u0026gt; ../../../../../../../../../../virtual/block/bcache0 -r--r--r-- 1 root root 4.0K Sep 28 15:13 dirty_data -rw-r--r-- 1 root root 4.0K Sep 28 15:13 label -r--r--r-- 1 root root 4.0K Sep 28 15:13 partial_stripes_expensive -rw-r--r-- 1 root root 4.0K Sep 28 15:13 readahead -rw-r--r-- 1 root root 4.0K Sep 28 15:13 running -rw-r--r-- 1 root root 4.0K Sep 28 15:13 sequential_cutoff -r--r--r-- 1 root root 4.0K Sep 28 15:13 state drwxr-xr-x 2 root root 0 Sep 28 15:13 stats_day drwxr-xr-x 2 root root 0 Sep 28 15:13 stats_five_minute drwxr-xr-x 2 root root 0 Sep 28 15:13 stats_hour drwxr-xr-x 2 root root 0 Sep 28 15:13 stats_total --w------- 1 root root 4.0K Sep 28 15:13 stop -r--r--r-- 1 root root 4.0K Sep 28 15:13 stripe_size -rw-r--r-- 1 root root 4.0K Sep 28 15:13 verify -rw-r--r-- 1 root root 4.0K Sep 28 15:13 writeback_delay -rw-r--r-- 1 root root 4.0K Sep 28 15:13 writeback_metadata -rw-r--r-- 1 root root 4.0K Sep 28 15:13 writeback_percent -rw-r--r-- 1 root root 4.0K Sep 28 15:13 writeback_rate -r--r--r-- 1 root root 4.0K Sep 28 15:13 writeback_rate_debug -rw-r--r-- 1 root root 4.0K Sep 28 15:13 writeback_rate_d_term -rw-r--r-- 1 root root 4.0K Sep 28 15:13 writeback_rate_p_term_inverse -rw-r--r-- 1 root root 4.0K Sep 28 15:13 writeback_rate_update_seconds -rw-r--r-- 1 root root 4.0K Sep 28 15:13 writeback_running å¯ä»¥çœ‹è§ cache ç›®å½•, å·²ç» attch æˆåŠŸ\ndetach # #detach echo 5da393d6-b157-4bb3-a105-235a1425894d \u0026gt; /sys/block/bcache0/bcache/detach ç›¸åº”å¯¹äº attach, detach æˆåŠŸä¹‹å /sys/block/bcache0/bcache/ ä¸‹çš„ cache ç›®å½•å°±ä¼šæ¶ˆå¤±\n[root@pure-test ~]# ls -lh /sys/block/bcache0/bcache/ total 0 --w------- 1 root root 4.0K Sep 28 16:01 attach -rw-r--r-- 1 root root 4.0K Sep 28 15:13 bypass_torture_test -rw-r--r-- 1 root root 4.0K Sep 28 15:13 cache_mode --w------- 1 root root 4.0K Sep 28 15:13 clear_stats --w------- 1 root root 4.0K Sep 28 16:01 detach lrwxrwxrwx 1 root root 0 Sep 28 15:13 dev -\u0026gt; ../../../../../../../../../../virtual/block/bcache0 -r--r--r-- 1 root root 4.0K Sep 28 15:13 dirty_data -rw-r--r-- 1 root root 4.0K Sep 28 15:13 label -r--r--r-- 1 root root 4.0K Sep 28 15:13 partial_stripes_expensive -rw-r--r-- 1 root root 4.0K Sep 28 15:13 readahead -rw-r--r-- 1 root root 4.0K Sep 28 15:13 running -rw-r--r-- 1 root root 4.0K Sep 28 15:13 sequential_cutoff -r--r--r-- 1 root root 4.0K Sep 28 15:13 state drwxr-xr-x 2 root root 0 Sep 28 15:13 stats_day drwxr-xr-x 2 root root 0 Sep 28 15:13 stats_five_minute drwxr-xr-x 2 root root 0 Sep 28 15:13 stats_hour drwxr-xr-x 2 root root 0 Sep 28 15:13 stats_total --w------- 1 root root 4.0K Sep 28 15:13 stop -r--r--r-- 1 root root 4.0K Sep 28 15:13 stripe_size -rw-r--r-- 1 root root 4.0K Sep 28 15:13 verify -rw-r--r-- 1 root root 4.0K Sep 28 15:13 writeback_delay -rw-r--r-- 1 root root 4.0K Sep 28 15:13 writeback_metadata -rw-r--r-- 1 root root 4.0K Sep 28 15:13 writeback_percent -rw-r--r-- 1 root root 4.0K Sep 28 15:13 writeback_rate -r--r--r-- 1 root root 4.0K Sep 28 15:13 writeback_rate_debug -rw-r--r-- 1 root root 4.0K Sep 28 15:13 writeback_rate_d_term -rw-r--r-- 1 root root 4.0K Sep 28 15:13 writeback_rate_p_term_inverse -rw-r--r-- 1 root root 4.0K Sep 28 15:13 writeback_rate_update_seconds -rw-r--r-- 1 root root 4.0K Sep 28 15:13 writeback_running cache mode # å¯ä»¥é€šè¿‡æŸ¥çœ‹ç›®å½•ä¸‹çš„ cache_mode æ–‡ä»¶æ¥æŸ¥çœ‹ cache çš„ç¼“å­˜ç­–ç•¥\n[root@pure-test ~]# cat /sys/block/bcache0/bcache/cache_mode writethrough [writeback] writearound none ä¿®æ”¹ç­–ç•¥\n[root@pure-test ~]# echo writethrough \u0026gt; /sys/block/bcache0/bcache/cache_mode [root@pure-test ~]# cat /sys/block/bcache0/bcache/cache_mode [writethrough] writeback writearound none å¼ºåˆ¶è®© backend è®¾å¤‡åœ¨æ—  cache è®¾å¤‡æƒ…å†µä¸‹è¿è¡Œ\n[root@pure-test ~]# echo 1 \u0026gt; /sys/block/sda/sda2/bcache/running æ­¤å¤„ä¸èƒ½ä½¿ç”¨ /sys/block/bcache0, å› ä¸ºæ­¤æ—¶ bcach0 å¹¶ä¸å­˜åœ¨.\nå‡å¦‚ä½ çš„ backend è®¾å¤‡æœªä½¿ç”¨åˆ†åŒº, åˆ™ bcache ç›®å½•ä¸º /sys/block/sda/bcache\nstop bcache # åœæ­¢ bcache\n[root@pure-test ~]# echo 1 \u0026gt; /sys/block/sda/sda2/bcache/stop bcache-status # å¯ä»¥é€šæŸ¥çœ‹ bcache ç›®å½•ä¸‹çš„ state æ–‡ä»¶æ¥æŸ¥çœ‹ bcache çš„çŠ¶æ€\ncat /sys/block/bcache0/bcache/state ä¹Ÿå¯ä»¥é€šè¿‡ python å†™çš„ bcache-status å°ç¨‹åºæ¥æŸ¥çœ‹ bcache çš„çŠ¶æ€ æ­¤å·¥å…·åŒ…å«åœ¨ fedora 20 ä»¥ä¸Šçš„ bcache-tools å·¥å…·é‡Œ, debian ç³»æˆ–è‡ªè¡Œç¼–è¯‘çš„ bcache-tools é‡Œå¹¶æœªæœ‰æ­¤å·¥å…·, éœ€è¦è‡ªè¡Œä¸Š github ä¸‹è½½.\n[root@pure-test ~]# bcache-status --help usage: bcache-status [--help] [-f] [-h] [-d] [-t] [-a] [-r] [-s] [-g] optional arguments: --help Show this help message and exit -f, --five-minute Print the last five minutes of stats. -h, --hour Print the last hour of stats. -d, --day Print the last day of stats. -t, --total Print total stats. -a, --all Print all stats. -r, --reset-stats Reset stats after printing them. -s, --sub-status Print subdevice status. -g, --gc Invoke GC before printing status. è¿™æ˜¯æ­£å¸¸ attach åå¹¶æœ‰ä½¿ç”¨çš„çŠ¶æ€, å¯ä»¥çœ‹è§ cache size, hits, cache mode ç­‰è¯¦ç»†ä¿¡æ¯\n[root@pure-test ~]# bcache-status -a --- bcache --- UUID 5da393d6-b157-4bb3-a105-235a1425894d Block Size 512 B Bucket Size 512.00 KiB Congested? False Read Congestion 2.0ms Write Congestion 20.0ms Total Cache Size 28 GiB Total Cache Used 6 GiB (23%) Total Cache Unused 22 GiB (77%) Evictable Cache 28 GiB (100%) Replacement Policy [lru] fifo random Cache Mode writethrough [writeback] writearound none Last 5min Hits 0 Last 5min Misses 0 Last 5min Bypass Hits 0 Last 5min Bypass Misses 0 Last 5min Bypassed 0 B Last Hour Hits 0 Last Hour Misses 0 Last Hour Bypass Hits 0 Last Hour Bypass Misses 0 Last Hour Bypassed 0 B Last Day Hits 10 (55%) Last Day Misses 8 Last Day Bypass Hits 0 Last Day Bypass Misses 0 Last Day Bypassed 0 B Total Hits 95 (53%) Total Misses 81 Total Bypass Hits 0 Total Bypass Misses 0 Total Bypassed 0 B è¿™æ˜¯ detach åçš„\n[root@pure-test ~]# bcache-status -a --- bcache --- UUID 5da393d6-b157-4bb3-a105-235a1425894d Block Size 512 B Bucket Size 512.00 KiB Congested? False Read Congestion 2.0ms Write Congestion 20.0ms Total Cache Size 28 GiB Total Cache Used 6 GiB (23%) Total Cache Unused 22 GiB (77%) Evictable Cache 28 GiB (100%) Replacement Policy [lru] fifo random Cache Mode (Various) Last 5min Hits 0 Last 5min Misses 0 Last 5min Bypass Hits 0 Last 5min Bypass Misses 0 Last 5min Bypassed 0 B Last Hour Hits 0 Last Hour Misses 0 Last Hour Bypass Hits 0 Last Hour Bypass Misses 0 Last Hour Bypassed 0 B Last Day Hits 10 (55%) Last Day Misses 8 Last Day Bypass Hits 0 Last Day Bypass Misses 0 Last Day Bypassed 0 B Total Hits 95 (53%) Total Misses 81 Total Bypass Hits 0 Total Bypass Misses 0 Total Bypassed 0 B å¯ä»¥çœ‹è§ Cache Mode (Various), è¿™è¡¨ç¤º cache è®¾å¤‡å·²ç» detach\nè¡¥å…… # kernel doc çš„æè¿°: bcache.txt\narchlinux çš„ wiki\n","date":"2018-01-09","externalUrl":null,"permalink":"/posts/2018/01/bcache-notes/","section":"åšå®¢","summary":"bcache æ˜¯ Linux å†…æ ¸çº§åˆ«æä¾›çš„ä¸€ç§ç¼“å­˜æ–¹æ¡ˆ(è¦æ±‚å†…æ ¸ç‰ˆæœ¬ 3.","title":"Bcache å°è®°","type":"posts"},{"content":"","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"},{"content":" ","externalUrl":null,"permalink":"/about/","section":"å‘“è¯­","summary":" ","title":"å…³äº","type":"page"}]